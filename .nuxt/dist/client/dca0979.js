/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{319:function(t,e,r){"use strict";var n=r(10),o=r(12),h=r(60),c=r(41),l=r(50),f=r(25),d=r(11),y=r(216),v=r(157),m=r(343),x=r(344),S=r(100),w=r(345),E=[],F=o(E.sort),A=o(E.push),P=d((function(){E.sort(void 0)})),D=d((function(){E.sort(null)})),I=v("sort"),C=!d((function(){if(S)return S<70;if(!(m&&m>3)){if(x)return!0;if(w)return w<603;var code,t,e,r,n="";for(code=65;code<76;code++){switch(t=String.fromCharCode(code),code){case 66:case 69:case 70:case 72:e=3;break;case 68:case 71:e=4;break;default:e=2}for(r=0;r<47;r++)E.push({k:t+r,v:e})}for(E.sort((function(a,b){return b.v-a.v})),r=0;r<E.length;r++)t=E[r].k.charAt(0),n.charAt(n.length-1)!==t&&(n+=t);return"DGBEFHACIJK"!==n}}));n({target:"Array",proto:!0,forced:P||!D||!I||!C},{sort:function(t){void 0!==t&&h(t);var e=c(this);if(C)return void 0===t?F(e):F(e,t);var r,n,o=[],d=l(e);for(n=0;n<d;n++)n in e&&A(o,e[n]);for(y(o,function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:f(e)>f(r)?1:-1}}(t)),r=o.length,n=0;n<r;)e[n]=o[n++];for(;n<d;)delete e[n++];return e}})},320:function(t,e,r){"use strict";var n=r(346),o=r(355),h=r(326);t.exports={formats:h,parse:o,stringify:n}},322:function(t,e,r){(function(t,r){var n="__lodash_hash_undefined__",o=9007199254740991,h="[object Arguments]",c="[object Array]",l="[object Boolean]",f="[object Date]",d="[object Error]",y="[object Function]",v="[object Map]",m="[object Number]",x="[object Object]",S="[object Promise]",w="[object RegExp]",E="[object Set]",F="[object String]",A="[object Symbol]",P="[object WeakMap]",D="[object ArrayBuffer]",I="[object DataView]",C=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,R=/^\w*$/,T=/^\./,B=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,N=/\\(\\)?/g,O=/^\[object .+?Constructor\]$/,j=/^(?:0|[1-9]\d*)$/,H={};H["[object Float32Array]"]=H["[object Float64Array]"]=H["[object Int8Array]"]=H["[object Int16Array]"]=H["[object Int32Array]"]=H["[object Uint8Array]"]=H["[object Uint8ClampedArray]"]=H["[object Uint16Array]"]=H["[object Uint32Array]"]=!0,H[h]=H[c]=H[D]=H[l]=H[I]=H[f]=H[d]=H[y]=H[v]=H[m]=H[x]=H[w]=H[E]=H[F]=H[P]=!1;var V="object"==typeof t&&t&&t.Object===Object&&t,_="object"==typeof self&&self&&self.Object===Object&&self,k=V||_||Function("return this")(),L=e&&!e.nodeType&&e,K=L&&"object"==typeof r&&r&&!r.nodeType&&r,M=K&&K.exports===L&&V.process,U=function(){try{return M&&M.binding("util")}catch(t){}}(),G=U&&U.isTypedArray;function z(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}function W(t,e){for(var r=-1,n=t?t.length:0;++r<n;)if(e(t[r],r,t))return!0;return!1}function Y(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function J(map){var t=-1,e=Array(map.size);return map.forEach((function(r,n){e[++t]=[n,r]})),e}function $(t,e){return function(r){return t(e(r))}}function X(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var Z,Q=Array.prototype,tt=Function.prototype,et=Object.prototype,nt=k["__core-js_shared__"],it=(Z=/[^.]+$/.exec(nt&&nt.keys&&nt.keys.IE_PROTO||""))?"Symbol(src)_1."+Z:"",st=tt.toString,at=et.hasOwnProperty,ot=et.toString,ut=RegExp("^"+st.call(at).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ht=k.Symbol,ct=k.Uint8Array,lt=$(Object.getPrototypeOf,Object),ft=et.propertyIsEnumerable,pt=Q.splice,gt=Object.getOwnPropertySymbols,yt=$(Object.keys,Object),vt=Yt(k,"DataView"),mt=Yt(k,"Map"),xt=Yt(k,"Promise"),St=Yt(k,"Set"),wt=Yt(k,"WeakMap"),bt=Yt(Object,"create"),Et=se(vt),Ft=se(mt),At=se(xt),Pt=se(St),Dt=se(wt),It=ht?ht.prototype:void 0,Ct=It?It.valueOf:void 0,Rt=It?It.toString:void 0;function Tt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Bt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Nt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ot(t){var e=-1,r=t?t.length:0;for(this.__data__=new Nt;++e<r;)this.add(t[e])}function jt(t){this.__data__=new Bt(t)}function Ht(t,e){var r=he(t)||ue(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],n=r.length,o=!!n;for(var h in t)!e&&!at.call(t,h)||o&&("length"==h||Zt(h,n))||r.push(h);return r}function Vt(t,e){for(var r=t.length;r--;)if(oe(t[r][0],e))return r;return-1}function _t(object,path){for(var t=0,e=(path=Qt(path,object)?[path]:qt(path)).length;null!=object&&t<e;)object=object[ie(path[t++])];return t&&t==e?object:void 0}function kt(object,t){return null!=object&&t in Object(object)}function Lt(t,e,r,n,o){return t===e||(null==t||null==e||!pe(t)&&!ge(e)?t!=t&&e!=e:function(object,t,e,r,n,o){var y=he(object),S=he(t),P=c,C=c;y||(P=(P=Xt(object))==h?x:P);S||(C=(C=Xt(t))==h?x:C);var R=P==x&&!Y(object),T=C==x&&!Y(t),B=P==C;if(B&&!R)return o||(o=new jt),y||ve(object)?Gt(object,t,e,r,n,o):function(object,t,e,r,n,o,h){switch(e){case I:if(object.byteLength!=t.byteLength||object.byteOffset!=t.byteOffset)return!1;object=object.buffer,t=t.buffer;case D:return!(object.byteLength!=t.byteLength||!r(new ct(object),new ct(t)));case l:case f:case m:return oe(+object,+t);case d:return object.name==t.name&&object.message==t.message;case w:case F:return object==t+"";case v:var c=J;case E:var y=2&o;if(c||(c=X),object.size!=t.size&&!y)return!1;var x=h.get(object);if(x)return x==t;o|=1,h.set(object,t);var S=Gt(c(object),c(t),r,n,o,h);return h.delete(object),S;case A:if(Ct)return Ct.call(object)==Ct.call(t)}return!1}(object,t,P,e,r,n,o);if(!(2&n)){var N=R&&at.call(object,"__wrapped__"),O=T&&at.call(t,"__wrapped__");if(N||O){var j=N?object.value():object,H=O?t.value():t;return o||(o=new jt),e(j,H,r,n,o)}}if(!B)return!1;return o||(o=new jt),function(object,t,e,r,n,o){var h=2&n,c=me(object),l=c.length,f=me(t).length;if(l!=f&&!h)return!1;var d=l;for(;d--;){var y=c[d];if(!(h?y in t:at.call(t,y)))return!1}var v=o.get(object);if(v&&o.get(t))return v==t;var m=!0;o.set(object,t),o.set(t,object);var x=h;for(;++d<l;){var S=object[y=c[d]],w=t[y];if(r)var E=h?r(w,S,y,t,object,o):r(S,w,y,object,t,o);if(!(void 0===E?S===w||e(S,w,r,n,o):E)){m=!1;break}x||(x="constructor"==y)}if(m&&!x){var F=object.constructor,A=t.constructor;F==A||!("constructor"in object)||!("constructor"in t)||"function"==typeof F&&F instanceof F&&"function"==typeof A&&A instanceof A||(m=!1)}return o.delete(object),o.delete(t),m}(object,t,e,r,n,o)}(t,e,Lt,r,n,o))}function Kt(t){return!(!pe(t)||(e=t,it&&it in e))&&(le(t)||Y(t)?ut:O).test(se(t));var e}function Mt(t){return"function"==typeof t?t:null==t?Se:"object"==typeof t?he(t)?function(path,t){if(Qt(path)&&ee(t))return re(ie(path),t);return function(object){var e=function(object,path,t){var e=null==object?void 0:_t(object,path);return void 0===e?t:e}(object,path);return void 0===e&&e===t?function(object,path){return null!=object&&function(object,path,t){path=Qt(path,object)?[path]:qt(path);var e,r=-1,n=path.length;for(;++r<n;){var o=ie(path[r]);if(!(e=null!=object&&t(object,o)))break;object=object[o]}if(e)return e;return!!(n=object?object.length:0)&&fe(n)&&Zt(o,n)&&(he(object)||ue(object))}(object,path,kt)}(object,path):Lt(t,e,void 0,3)}}(t[0],t[1]):function(source){var t=function(object){var t=me(object),e=t.length;for(;e--;){var r=t[e],n=object[r];t[e]=[r,n,ee(n)]}return t}(source);if(1==t.length&&t[0][2])return re(t[0][0],t[0][1]);return function(object){return object===source||function(object,source,t,e){var r=t.length,n=r,o=!e;if(null==object)return!n;for(object=Object(object);r--;){var data=t[r];if(o&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++r<n;){var h=(data=t[r])[0],c=object[h],l=data[1];if(o&&data[2]){if(void 0===c&&!(h in object))return!1}else{var f=new jt;if(e)var d=e(c,l,h,object,source,f);if(!(void 0===d?Lt(l,c,e,3,f):d))return!1}}return!0}(object,source,t)}}(t):Qt(path=t)?(e=ie(path),function(object){return null==object?void 0:object[e]}):function(path){return function(object){return _t(object,path)}}(path);var path,e}function Ut(object){if(!pe(object))return function(object){var t=[];if(null!=object)for(var e in Object(object))t.push(e);return t}(object);var t=te(object),e=[];for(var r in object)("constructor"!=r||!t&&at.call(object,r))&&e.push(r);return e}function qt(t){return he(t)?t:ne(t)}function Gt(t,e,r,n,o,h){var c=2&o,l=t.length,f=e.length;if(l!=f&&!(c&&f>l))return!1;var d=h.get(t);if(d&&h.get(e))return d==e;var y=-1,v=!0,m=1&o?new Ot:void 0;for(h.set(t,e),h.set(e,t);++y<l;){var x=t[y],S=e[y];if(n)var w=c?n(S,x,y,e,t,h):n(x,S,y,t,e,h);if(void 0!==w){if(w)continue;v=!1;break}if(m){if(!W(e,(function(t,e){if(!m.has(e)&&(x===t||r(x,t,n,o,h)))return m.add(e)}))){v=!1;break}}else if(x!==S&&!r(x,S,n,o,h)){v=!1;break}}return h.delete(t),h.delete(e),v}function zt(object){return function(object,t,e){var r=t(object);return he(object)?r:z(r,e(object))}(object,xe,$t)}function Wt(map,t){var e,r,data=map.__data__;return("string"==(r=typeof(e=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==e:null===e)?data["string"==typeof t?"string":"hash"]:data.map}function Yt(object,t){var e=function(object,t){return null==object?void 0:object[t]}(object,t);return Kt(e)?e:void 0}Tt.prototype.clear=function(){this.__data__=bt?bt(null):{}},Tt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Tt.prototype.get=function(t){var data=this.__data__;if(bt){var e=data[t];return e===n?void 0:e}return at.call(data,t)?data[t]:void 0},Tt.prototype.has=function(t){var data=this.__data__;return bt?void 0!==data[t]:at.call(data,t)},Tt.prototype.set=function(t,e){return this.__data__[t]=bt&&void 0===e?n:e,this},Bt.prototype.clear=function(){this.__data__=[]},Bt.prototype.delete=function(t){var data=this.__data__,e=Vt(data,t);return!(e<0)&&(e==data.length-1?data.pop():pt.call(data,e,1),!0)},Bt.prototype.get=function(t){var data=this.__data__,e=Vt(data,t);return e<0?void 0:data[e][1]},Bt.prototype.has=function(t){return Vt(this.__data__,t)>-1},Bt.prototype.set=function(t,e){var data=this.__data__,r=Vt(data,t);return r<0?data.push([t,e]):data[r][1]=e,this},Nt.prototype.clear=function(){this.__data__={hash:new Tt,map:new(mt||Bt),string:new Tt}},Nt.prototype.delete=function(t){return Wt(this,t).delete(t)},Nt.prototype.get=function(t){return Wt(this,t).get(t)},Nt.prototype.has=function(t){return Wt(this,t).has(t)},Nt.prototype.set=function(t,e){return Wt(this,t).set(t,e),this},Ot.prototype.add=Ot.prototype.push=function(t){return this.__data__.set(t,n),this},Ot.prototype.has=function(t){return this.__data__.has(t)},jt.prototype.clear=function(){this.__data__=new Bt},jt.prototype.delete=function(t){return this.__data__.delete(t)},jt.prototype.get=function(t){return this.__data__.get(t)},jt.prototype.has=function(t){return this.__data__.has(t)},jt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Bt){var n=r.__data__;if(!mt||n.length<199)return n.push([t,e]),this;r=this.__data__=new Nt(n)}return r.set(t,e),this};var Jt=gt?$(gt,Object):we,$t=gt?function(object){for(var t=[];object;)z(t,Jt(object)),object=lt(object);return t}:we,Xt=function(t){return ot.call(t)};function Zt(t,e){return!!(e=null==e?o:e)&&("number"==typeof t||j.test(t))&&t>-1&&t%1==0&&t<e}function Qt(t,object){if(he(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!de(t))||(R.test(t)||!C.test(t)||null!=object&&t in Object(object))}function te(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||et)}function ee(t){return t==t&&!pe(t)}function re(t,e){return function(object){return null!=object&&(object[t]===e&&(void 0!==e||t in Object(object)))}}(vt&&Xt(new vt(new ArrayBuffer(1)))!=I||mt&&Xt(new mt)!=v||xt&&Xt(xt.resolve())!=S||St&&Xt(new St)!=E||wt&&Xt(new wt)!=P)&&(Xt=function(t){var e=ot.call(t),r=e==x?t.constructor:void 0,n=r?se(r):void 0;if(n)switch(n){case Et:return I;case Ft:return v;case At:return S;case Pt:return E;case Dt:return P}return e});var ne=ae((function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(de(t))return Rt?Rt.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(e);var r=[];return T.test(t)&&r.push(""),t.replace(B,(function(t,e,n,o){r.push(n?o.replace(N,"$1"):e||t)})),r}));function ie(t){if("string"==typeof t||de(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function se(t){if(null!=t){try{return st.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function ae(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],h=r.cache;if(h.has(o))return h.get(o);var c=t.apply(this,n);return r.cache=h.set(o,c),c};return r.cache=new(ae.Cache||Nt),r}function oe(t,e){return t===e||t!=t&&e!=e}function ue(t){return function(t){return ge(t)&&ce(t)}(t)&&at.call(t,"callee")&&(!ft.call(t,"callee")||ot.call(t)==h)}ae.Cache=Nt;var he=Array.isArray;function ce(t){return null!=t&&fe(t.length)&&!le(t)}function le(t){var e=pe(t)?ot.call(t):"";return e==y||"[object GeneratorFunction]"==e}function fe(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}function pe(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function ge(t){return!!t&&"object"==typeof t}function de(t){return"symbol"==typeof t||ge(t)&&ot.call(t)==A}var ye,ve=G?(ye=G,function(t){return ye(t)}):function(t){return ge(t)&&fe(t.length)&&!!H[ot.call(t)]};function me(object){return ce(object)?Ht(object):function(object){if(!te(object))return yt(object);var t=[];for(var e in Object(object))at.call(object,e)&&"constructor"!=e&&t.push(e);return t}(object)}function xe(object){return ce(object)?Ht(object,!0):Ut(object)}function Se(t){return t}function we(){return[]}r.exports=function(object,t){return null==object?{}:function(object,t,e){for(var r=-1,n=t.length,o={};++r<n;){var h=t[r],c=object[h];e(c,h)&&(o[h]=c)}return o}(object,zt(object),Mt(t))}}).call(this,r(45),r(356)(t))},323:function(t,e,r){(function(t){var r,a,b,n,o,h,c,l,f,i,d,y={userAgent:!1},v={},m=m||(r=Math,b=(a={}).lib={},n=b.Base=function(){function t(){}return{extend:function(p){t.prototype=this;var e=new t;return p&&e.mixIn(p),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(p){for(var t in p)p.hasOwnProperty(t)&&(this[t]=p[t]);p.hasOwnProperty("toString")&&(this.toString=p.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),o=b.WordArray=n.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||c).stringify(this)},concat:function(t){var q=this.words,p=t.words,e=this.sigBytes,s=t.sigBytes;if(this.clamp(),e%4)for(var r=0;r<s;r++){var n=p[r>>>2]>>>24-r%4*8&255;q[e+r>>>2]|=n<<24-(e+r)%4*8}else for(r=0;r<s;r+=4)q[e+r>>>2]=p[r>>>2];return this.sigBytes+=s,this},clamp:function(){var t=this.words,e=this.sigBytes;t[e>>>2]&=4294967295<<32-e%4*8,t.length=r.ceil(e/4)},clone:function(){var t=n.clone.call(this);return t.words=this.words.slice(0),t},random:function(p){for(var t=[],e=0;e<p;e+=4)t.push(4294967296*r.random()|0);return new o.init(t,p)}}),h=a.enc={},c=h.Hex={stringify:function(p){for(var t=p.words,e=p.sigBytes,q=[],r=0;r<e;r++){var s=t[r>>>2]>>>24-r%4*8&255;q.push((s>>>4).toString(16)),q.push((15&s).toString(16))}return q.join("")},parse:function(p){for(var t=p.length,q=[],e=0;e<t;e+=2)q[e>>>3]|=parseInt(p.substr(e,2),16)<<24-e%8*4;return new o.init(q,t/2)}},l=h.Latin1={stringify:function(q){for(var t=q.words,p=q.sigBytes,e=[],r=0;r<p;r++){var s=t[r>>>2]>>>24-r%4*8&255;e.push(String.fromCharCode(s))}return e.join("")},parse:function(p){for(var t=p.length,q=[],e=0;e<t;e++)q[e>>>2]|=(255&p.charCodeAt(e))<<24-e%4*8;return new o.init(q,t)}},f=h.Utf8={stringify:function(t){try{return decodeURIComponent(escape(l.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return l.parse(unescape(encodeURIComponent(t)))}},i=b.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=f.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var q=this._data,e=q.words,n=q.sigBytes,h=this.blockSize,u=n/(4*h),s=(u=t?r.ceil(u):r.max((0|u)-this._minBufferSize,0))*h,c=r.min(4*s,n);if(s){for(var p=0;p<s;p+=h)this._doProcessBlock(e,p);var l=e.splice(0,s);q.sigBytes-=c}return new o.init(l,c)},clone:function(){var t=n.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),b.Hasher=i.extend({cfg:n.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){i.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(p,e){return new t.init(e).finalize(p)}},_createHmacHelper:function(t){return function(p,e){return new d.HMAC.init(t,e).finalize(p)}}}),d=a.algo={},a);!function(g){var a,t=(a=m).lib,e=t.Base,r=t.WordArray;(a=a.x64={}).Word=e.extend({init:function(b,t){this.high=b,this.low=t}}),a.WordArray=e.extend({init:function(b,t){b=this.words=b||[],this.sigBytes=null!=t?t:8*b.length},toX32:function(){for(var b=this.words,t=b.length,a=[],e=0;e<t;e++){var n=b[e];a.push(n.high),a.push(n.low)}return r.create(a,this.sigBytes)},clone:function(){for(var b=e.clone.call(this),t=b.words=this.words.slice(0),a=t.length,r=0;r<a;r++)t[r]=t[r].clone();return b}})}(),m.lib.Cipher||function(u){var t=(g=m).lib,e=t.Base,r=t.WordArray,q=t.BufferedBlockAlgorithm,n=g.enc.Base64,o=g.algo.EvpKDF,h=t.Cipher=q.extend({cfg:e.extend(),createEncryptor:function(a,b){return this.create(this._ENC_XFORM_MODE,a,b)},createDecryptor:function(a,b){return this.create(this._DEC_XFORM_MODE,a,b)},init:function(a,b,t){this.cfg=this.cfg.extend(t),this._xformMode=a,this._key=b,this.reset()},reset:function(){q.reset.call(this),this._doReset()},process:function(a){return this._append(a),this._process()},finalize:function(a){return a&&this._append(a),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(a){return{encrypt:function(b,t,e){return("string"==typeof t?s:d).encrypt(a,b,t,e)},decrypt:function(b,t,e){return("string"==typeof t?s:d).decrypt(a,b,t,e)}}}});t.StreamCipher=h.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var c=g.mode={},l=function(a,b,t){var e=this._iv;e?this._iv=undefined:e=this._prevBlock;for(var r=0;r<t;r++)a[b+r]^=e[r]},f=(t.BlockCipherMode=e.extend({createEncryptor:function(a,b){return this.Encryptor.create(a,b)},createDecryptor:function(a,b){return this.Decryptor.create(a,b)},init:function(a,b){this._cipher=a,this._iv=b}})).extend();f.Encryptor=f.extend({processBlock:function(a,b){var t=this._cipher,e=t.blockSize;l.call(this,a,b,e),t.encryptBlock(a,b),this._prevBlock=a.slice(b,b+e)}}),f.Decryptor=f.extend({processBlock:function(a,b){var t=this._cipher,e=t.blockSize,r=a.slice(b,b+e);t.decryptBlock(a,b),l.call(this,a,b,e),this._prevBlock=r}}),c=c.CBC=f,f=(g.pad={}).Pkcs7={pad:function(a,b){for(var t,e=(t=(t=4*b)-a.sigBytes%t)<<24|t<<16|t<<8|t,n=[],o=0;o<t;o+=4)n.push(e);t=r.create(n,t),a.concat(t)},unpad:function(a){a.sigBytes-=255&a.words[a.sigBytes-1>>>2]}},t.BlockCipher=h.extend({cfg:h.cfg.extend({mode:c,padding:f}),reset:function(){h.reset.call(this);var b=(a=this.cfg).iv,a=a.mode;if(this._xformMode==this._ENC_XFORM_MODE)var t=a.createEncryptor;else t=a.createDecryptor,this._minBufferSize=1;this._mode=t.call(a,this,b&&b.words)},_doProcessBlock:function(a,b){this._mode.processBlock(a,b)},_doFinalize:function(){var a=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){a.pad(this._data,this.blockSize);var b=this._process(!0)}else b=this._process(!0),a.unpad(b);return b},blockSize:4});var p=t.CipherParams=e.extend({init:function(a){this.mixIn(a)},toString:function(a){return(a||this.formatter).stringify(this)}}),d=(c=(g.format={}).OpenSSL={stringify:function(a){var b=a.ciphertext;return((a=a.salt)?r.create([1398893684,1701076831]).concat(a).concat(b):b).toString(n)},parse:function(a){var b=(a=n.parse(a)).words;if(1398893684==b[0]&&1701076831==b[1]){var t=r.create(b.slice(2,4));b.splice(0,4),a.sigBytes-=16}return p.create({ciphertext:a,salt:t})}},t.SerializableCipher=e.extend({cfg:e.extend({format:c}),encrypt:function(a,b,t,e){e=this.cfg.extend(e);var r=a.createEncryptor(t,e);return b=r.finalize(b),r=r.cfg,p.create({ciphertext:b,key:t,iv:r.iv,algorithm:a,mode:r.mode,padding:r.padding,blockSize:a.blockSize,formatter:e.format})},decrypt:function(a,b,t,e){return e=this.cfg.extend(e),b=this._parse(b,e.format),a.createDecryptor(t,e).finalize(b.ciphertext)},_parse:function(a,b){return"string"==typeof a?b.parse(a,this):a}})),g=(g.kdf={}).OpenSSL={execute:function(a,b,t,e){return e||(e=r.random(8)),a=o.create({keySize:b+t}).compute(a,e),t=r.create(a.words.slice(b),4*t),a.sigBytes=4*b,p.create({key:a,iv:t,salt:e})}},s=t.PasswordBasedCipher=d.extend({cfg:d.cfg.extend({kdf:g}),encrypt:function(a,b,t,e){return t=(e=this.cfg.extend(e)).kdf.execute(t,a.keySize,a.ivSize),e.iv=t.iv,(a=d.encrypt.call(this,a,b,t.key,e)).mixIn(t),a},decrypt:function(a,b,t,e){return e=this.cfg.extend(e),b=this._parse(b,e.format),t=e.kdf.execute(t,a.keySize,a.ivSize,b.salt),e.iv=t.iv,d.decrypt.call(this,a,b,t.key,e)}})}(),function(){for(var q=m,t=q.lib.BlockCipher,e=q.algo,r=[],n=[],o=[],h=[],c=[],l=[],s=[],u=[],f=[],d=[],g=[],y=0;256>y;y++)g[y]=128>y?y<<1:y<<1^283;var v=0,x=0;for(y=0;256>y;y++){var S=(S=x^x<<1^x<<2^x<<3^x<<4)>>>8^255&S^99;r[v]=S,n[S]=v;var w=g[v],E=g[w],F=g[E],b=257*g[S]^16843008*S;o[v]=b<<24|b>>>8,h[v]=b<<16|b>>>16,c[v]=b<<8|b>>>24,l[v]=b,b=16843009*F^65537*E^257*w^16843008*v,s[S]=b<<24|b>>>8,u[S]=b<<16|b>>>16,f[S]=b<<8|b>>>24,d[S]=b,v?(v=w^g[g[g[F^w]]],x^=g[g[x]]):v=x=1}var A=[0,1,2,4,8,16,32,64,128,27,54];e=e.AES=t.extend({_doReset:function(){for(var t=(e=this._key).words,a=e.sigBytes/4,e=4*((this._nRounds=a+6)+1),b=this._keySchedule=[],n=0;n<e;n++)if(n<a)b[n]=t[n];else{var o=b[n-1];n%a?6<a&&4==n%a&&(o=r[o>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o]):(o=r[(o=o<<8|o>>>24)>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o],o^=A[n/a|0]<<24),b[n]=b[n-a]^o}for(t=this._invKeySchedule=[],a=0;a<e;a++)n=e-a,o=a%4?b[n]:b[n-4],t[a]=4>a||4>=n?o:s[r[o>>>24]]^u[r[o>>>16&255]]^f[r[o>>>8&255]]^d[r[255&o]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,o,h,c,l,r)},decryptBlock:function(t,e){var a=t[e+1];t[e+1]=t[e+3],t[e+3]=a,this._doCryptBlock(t,e,this._invKeySchedule,s,u,f,d,n),a=t[e+1],t[e+1]=t[e+3],t[e+3]=a},_doCryptBlock:function(t,e,a,b,r,n,o,h){for(var c=this._nRounds,l=t[e]^a[0],g=t[e+1]^a[1],f=t[e+2]^a[2],p=t[e+3]^a[3],d=4,y=1;y<c;y++){var q=b[l>>>24]^r[g>>>16&255]^n[f>>>8&255]^o[255&p]^a[d++],v=b[g>>>24]^r[f>>>16&255]^n[p>>>8&255]^o[255&l]^a[d++],s=b[f>>>24]^r[p>>>16&255]^n[l>>>8&255]^o[255&g]^a[d++];p=b[p>>>24]^r[l>>>16&255]^n[g>>>8&255]^o[255&f]^a[d++],l=q,g=v,f=s}q=(h[l>>>24]<<24|h[g>>>16&255]<<16|h[f>>>8&255]<<8|h[255&p])^a[d++],v=(h[g>>>24]<<24|h[f>>>16&255]<<16|h[p>>>8&255]<<8|h[255&l])^a[d++],s=(h[f>>>24]<<24|h[p>>>16&255]<<16|h[l>>>8&255]<<8|h[255&g])^a[d++],p=(h[p>>>24]<<24|h[l>>>16&255]<<16|h[g>>>8&255]<<8|h[255&f])^a[d++],t[e]=q,t[e+1]=v,t[e+2]=s,t[e+3]=p},keySize:8});q.AES=t._createHelper(e)}(),function(){function t(b,t){var a=(this._lBlock>>>b^this._rBlock)&t;this._rBlock^=a,this._lBlock^=a<<b}function e(b,t){var a=(this._rBlock>>>b^this._lBlock)&t;this._lBlock^=a,this._rBlock^=a<<b}var r=m,n=(o=r.lib).WordArray,o=o.BlockCipher,g=r.algo,q=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],p=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],h=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],s=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],c=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],l=g.DES=o.extend({_doReset:function(){for(var b=this._key.words,t=[],a=0;56>a;a++){var e=q[a]-1;t[a]=b[e>>>5]>>>31-e%32&1}for(b=this._subKeys=[],e=0;16>e;e++){var r=b[e]=[],n=h[e];for(a=0;24>a;a++)r[a/6|0]|=t[(p[a]-1+n)%28]<<31-a%6,r[4+(a/6|0)]|=t[28+(p[a+24]-1+n)%28]<<31-a%6;for(r[0]=r[0]<<1|r[0]>>>31,a=1;7>a;a++)r[a]>>>=4*(a-1)+3;r[7]=r[7]<<5|r[7]>>>27}for(t=this._invSubKeys=[],a=0;16>a;a++)t[a]=b[15-a]},encryptBlock:function(b,t){this._doCryptBlock(b,t,this._subKeys)},decryptBlock:function(b,t){this._doCryptBlock(b,t,this._invSubKeys)},_doCryptBlock:function(b,r,a){this._lBlock=b[r],this._rBlock=b[r+1],t.call(this,4,252645135),t.call(this,16,65535),e.call(this,2,858993459),e.call(this,8,16711935),t.call(this,1,1431655765);for(var n=0;16>n;n++){for(var o=a[n],h=this._lBlock,l=this._rBlock,g=0,f=0;8>f;f++)g|=s[f][((l^o[f])&c[f])>>>0];this._lBlock=l,this._rBlock=h^g}a=this._lBlock,this._lBlock=this._rBlock,this._rBlock=a,t.call(this,1,1431655765),e.call(this,8,16711935),e.call(this,2,858993459),t.call(this,16,65535),t.call(this,4,252645135),b[r]=this._lBlock,b[r+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});r.DES=o._createHelper(l),g=g.TripleDES=o.extend({_doReset:function(){var b=this._key.words;this._des1=l.createEncryptor(n.create(b.slice(0,2))),this._des2=l.createEncryptor(n.create(b.slice(2,4))),this._des3=l.createEncryptor(n.create(b.slice(4,6)))},encryptBlock:function(b,t){this._des1.encryptBlock(b,t),this._des2.decryptBlock(b,t),this._des3.encryptBlock(b,t)},decryptBlock:function(b,t){this._des3.decryptBlock(b,t),this._des2.encryptBlock(b,t),this._des1.decryptBlock(b,t)},keySize:6,ivSize:2,blockSize:2}),r.TripleDES=o._createHelper(g)}(),function(){var t=m,e=t.lib.WordArray;t.enc.Base64={stringify:function(b){var t=b.words,e=b.sigBytes,r=this._map;b.clamp(),b=[];for(var a=0;a<e;a+=3)for(var n=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,g=0;4>g&&a+.75*g<e;g++)b.push(r.charAt(n>>>6*(3-g)&63));if(t=r.charAt(64))for(;b.length%4;)b.push(t);return b.join("")},parse:function(b){var t=b.length,r=this._map;(n=r.charAt(64))&&(-1!=(n=b.indexOf(n))&&(t=n));for(var n=[],a=0,o=0;o<t;o++)if(o%4){var g=r.indexOf(b.charAt(o-1))<<o%4*2,h=r.indexOf(b.charAt(o))>>>6-o%4*2;n[a>>>2]|=(g|h)<<24-a%4*8,a++}return e.create(n,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){function e(a,t,g,e,p,r,n){return((a=a+(t&g|~t&e)+p+n)<<r|a>>>32-r)+t}function r(a,t,g,e,p,r,n){return((a=a+(t&e|g&~e)+p+n)<<r|a>>>32-r)+t}function n(a,t,g,e,r,n,o){return((a=a+(t^g^e)+r+o)<<n|a>>>32-n)+t}function o(a,t,g,e,r,n,o){return((a=a+(g^(t|~e))+r+o)<<n|a>>>32-n)+t}for(var h=m,c=(q=h.lib).WordArray,s=q.Hasher,q=h.algo,a=[],l=0;64>l;l++)a[l]=4294967296*t.abs(t.sin(l+1))|0;q=q.MD5=s.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,h){for(var g=0;16>g;g++){var p=t[c=h+g];t[c]=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8)}g=this._hash.words;var c=t[h+0],q=(p=t[h+1],t[h+2]),l=t[h+3],s=t[h+4],f=t[h+5],u=t[h+6],d=t[h+7],y=t[h+8],v=t[h+9],m=t[h+10],x=t[h+11],S=t[h+12],w=t[h+13],E=t[h+14],F=t[h+15],b=e(b=g[0],D=g[1],P=g[2],A=g[3],c,7,a[0]),A=e(A,b,D,P,p,12,a[1]),P=e(P,A,b,D,q,17,a[2]),D=e(D,P,A,b,l,22,a[3]);b=e(b,D,P,A,s,7,a[4]),A=e(A,b,D,P,f,12,a[5]),P=e(P,A,b,D,u,17,a[6]),D=e(D,P,A,b,d,22,a[7]),b=e(b,D,P,A,y,7,a[8]),A=e(A,b,D,P,v,12,a[9]),P=e(P,A,b,D,m,17,a[10]),D=e(D,P,A,b,x,22,a[11]),b=e(b,D,P,A,S,7,a[12]),A=e(A,b,D,P,w,12,a[13]),P=e(P,A,b,D,E,17,a[14]),b=r(b,D=e(D,P,A,b,F,22,a[15]),P,A,p,5,a[16]),A=r(A,b,D,P,u,9,a[17]),P=r(P,A,b,D,x,14,a[18]),D=r(D,P,A,b,c,20,a[19]),b=r(b,D,P,A,f,5,a[20]),A=r(A,b,D,P,m,9,a[21]),P=r(P,A,b,D,F,14,a[22]),D=r(D,P,A,b,s,20,a[23]),b=r(b,D,P,A,v,5,a[24]),A=r(A,b,D,P,E,9,a[25]),P=r(P,A,b,D,l,14,a[26]),D=r(D,P,A,b,y,20,a[27]),b=r(b,D,P,A,w,5,a[28]),A=r(A,b,D,P,q,9,a[29]),P=r(P,A,b,D,d,14,a[30]),b=n(b,D=r(D,P,A,b,S,20,a[31]),P,A,f,4,a[32]),A=n(A,b,D,P,y,11,a[33]),P=n(P,A,b,D,x,16,a[34]),D=n(D,P,A,b,E,23,a[35]),b=n(b,D,P,A,p,4,a[36]),A=n(A,b,D,P,s,11,a[37]),P=n(P,A,b,D,d,16,a[38]),D=n(D,P,A,b,m,23,a[39]),b=n(b,D,P,A,w,4,a[40]),A=n(A,b,D,P,c,11,a[41]),P=n(P,A,b,D,l,16,a[42]),D=n(D,P,A,b,u,23,a[43]),b=n(b,D,P,A,v,4,a[44]),A=n(A,b,D,P,S,11,a[45]),P=n(P,A,b,D,F,16,a[46]),b=o(b,D=n(D,P,A,b,q,23,a[47]),P,A,c,6,a[48]),A=o(A,b,D,P,d,10,a[49]),P=o(P,A,b,D,E,15,a[50]),D=o(D,P,A,b,f,21,a[51]),b=o(b,D,P,A,S,6,a[52]),A=o(A,b,D,P,l,10,a[53]),P=o(P,A,b,D,m,15,a[54]),D=o(D,P,A,b,p,21,a[55]),b=o(b,D,P,A,y,6,a[56]),A=o(A,b,D,P,F,10,a[57]),P=o(P,A,b,D,u,15,a[58]),D=o(D,P,A,b,w,21,a[59]),b=o(b,D,P,A,s,6,a[60]),A=o(A,b,D,P,x,10,a[61]),P=o(P,A,b,D,q,15,a[62]),D=o(D,P,A,b,v,21,a[63]);g[0]=g[0]+b|0,g[1]=g[1]+D|0,g[2]=g[2]+P|0,g[3]=g[3]+A|0},_doFinalize:function(){var a=this._data,e=a.words,g=8*this._nDataBytes,r=8*a.sigBytes;e[r>>>5]|=128<<24-r%32;var n=t.floor(g/4294967296);for(e[15+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e[14+(r+64>>>9<<4)]=16711935&(g<<8|g>>>24)|4278255360&(g<<24|g>>>8),a.sigBytes=4*(e.length+1),this._process(),e=(a=this._hash).words,g=0;4>g;g++)r=e[g],e[g]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);return a},clone:function(){var a=s.clone.call(this);return a._hash=this._hash.clone(),a}}),h.MD5=s._createHelper(q),h.HmacMD5=s._createHmacHelper(q)}(Math),function(){var t=m,e=(b=t.lib).WordArray,r=b.Hasher,n=[],b=t.algo.SHA1=r.extend({_doReset:function(){this._hash=new e.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,p){for(var a=this._hash.words,e=a[0],r=a[1],o=a[2],h=a[3],b=a[4],c=0;80>c;c++){if(16>c)n[c]=0|t[p+c];else{var g=n[c-3]^n[c-8]^n[c-14]^n[c-16];n[c]=g<<1|g>>>31}g=(e<<5|e>>>27)+b+n[c],g=20>c?g+(1518500249+(r&o|~r&h)):40>c?g+(1859775393+(r^o^h)):60>c?g+((r&o|r&h|o&h)-1894007588):g+((r^o^h)-899497514),b=h,h=o,o=r<<30|r>>>2,r=e,e=g}a[0]=a[0]+e|0,a[1]=a[1]+r|0,a[2]=a[2]+o|0,a[3]=a[3]+h|0,a[4]=a[4]+b|0},_doFinalize:function(){var b=this._data,t=b.words,a=8*this._nDataBytes,e=8*b.sigBytes;return t[e>>>5]|=128<<24-e%32,t[14+(e+64>>>9<<4)]=Math.floor(a/4294967296),t[15+(e+64>>>9<<4)]=a,b.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var b=r.clone.call(this);return b._hash=this._hash.clone(),b}});t.SHA1=r._createHelper(b),t.HmacSHA1=r._createHmacHelper(b)}(),function(t){for(var g=m,e=(n=g.lib).WordArray,r=n.Hasher,n=g.algo,s=[],o=[],u=function(q){return 4294967296*(q-(0|q))|0},h=2,b=0;64>b;){var c;t:{c=h;for(var l=t.sqrt(c),f=2;f<=l;f++)if(!(c%f)){c=!1;break t}c=!0}c&&(8>b&&(s[b]=u(t.pow(h,.5))),o[b]=u(t.pow(h,1/3)),b++),h++}var d=[];n=n.SHA256=r.extend({_doReset:function(){this._hash=new e.init(s.slice(0))},_doProcessBlock:function(q,t){for(var a=this._hash.words,e=a[0],r=a[1],b=a[2],n=a[3],h=a[4],g=a[5],c=a[6],l=a[7],f=0;64>f;f++){if(16>f)d[f]=0|q[t+f];else{var y=d[f-15],p=d[f-2];d[f]=((y<<25|y>>>7)^(y<<14|y>>>18)^y>>>3)+d[f-7]+((p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10)+d[f-16]}y=l+((h<<26|h>>>6)^(h<<21|h>>>11)^(h<<7|h>>>25))+(h&g^~h&c)+o[f]+d[f],p=((e<<30|e>>>2)^(e<<19|e>>>13)^(e<<10|e>>>22))+(e&r^e&b^r&b),l=c,c=g,g=h,h=n+y|0,n=b,b=r,r=e,e=y+p|0}a[0]=a[0]+e|0,a[1]=a[1]+r|0,a[2]=a[2]+b|0,a[3]=a[3]+n|0,a[4]=a[4]+h|0,a[5]=a[5]+g|0,a[6]=a[6]+c|0,a[7]=a[7]+l|0},_doFinalize:function(){var e=this._data,b=e.words,a=8*this._nDataBytes,r=8*e.sigBytes;return b[r>>>5]|=128<<24-r%32,b[14+(r+64>>>9<<4)]=t.floor(a/4294967296),b[15+(r+64>>>9<<4)]=a,e.sigBytes=4*b.length,this._process(),this._hash},clone:function(){var b=r.clone.call(this);return b._hash=this._hash.clone(),b}});g.SHA256=r._createHelper(n),g.HmacSHA256=r._createHmacHelper(n)}(Math),function(){var b=m,t=b.lib.WordArray,e=(a=b.algo).SHA256,a=a.SHA224=e.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var a=e._doFinalize.call(this);return a.sigBytes-=4,a}});b.SHA224=e._createHelper(a),b.HmacSHA224=e._createHmacHelper(a)}(),function(){function a(){return r.create.apply(r,arguments)}for(var t=m,e=t.lib.Hasher,r=(o=t.x64).Word,n=o.WordArray,o=t.algo,h=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],c=[],l=0;80>l;l++)c[l]=a();o=o.SHA512=e.extend({_doReset:function(){this._hash=new n.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(a,t){for(var e=(y=this._hash.words)[0],r=y[1],n=y[2],o=y[3],l=y[4],f=y[5],d=y[6],y=y[7],v=e.high,m=e.low,x=r.high,S=r.low,w=n.high,E=n.low,F=o.high,A=o.low,P=l.high,D=l.low,I=f.high,C=f.low,R=d.high,T=d.low,B=y.high,N=y.low,O=v,g=m,j=x,H=S,V=w,_=E,k=F,L=A,K=P,M=D,U=I,G=C,z=R,W=T,Y=B,J=N,$=0;80>$;$++){var s=c[$];if(16>$)var X=s.high=0|a[t+2*$],b=s.low=0|a[t+2*$+1];else{X=((b=(X=c[$-15]).high)>>>1|(p=X.low)<<31)^(b>>>8|p<<24)^b>>>7;var p=(p>>>1|b<<31)^(p>>>8|b<<24)^(p>>>7|b<<25),u=((b=(u=c[$-2]).high)>>>19|(Z=u.low)<<13)^(b<<3|Z>>>29)^b>>>6,Z=(Z>>>19|b<<13)^(Z<<3|b>>>29)^(Z>>>6|b<<26),Q=(b=c[$-7]).high,q=(tt=c[$-16]).high,tt=tt.low;X=(X=(X=X+Q+((b=p+b.low)>>>0<p>>>0?1:0))+u+((b=b+Z)>>>0<Z>>>0?1:0))+q+((b=b+tt)>>>0<tt>>>0?1:0);s.high=X,s.low=b}Q=K&U^~K&z,tt=M&G^~M&W,s=O&j^O&V^j&V;var et=g&H^g&_^H&_,nt=(p=(O>>>28|g<<4)^(O<<30|g>>>2)^(O<<25|g>>>7),u=(g>>>28|O<<4)^(g<<30|O>>>2)^(g<<25|O>>>7),(Z=h[$]).high),it=Z.low;q=Y+((K>>>14|M<<18)^(K>>>18|M<<14)^(K<<23|M>>>9))+((Z=J+((M>>>14|K<<18)^(M>>>18|K<<14)^(M<<23|K>>>9)))>>>0<J>>>0?1:0),Y=z,J=W,z=U,W=G,U=K,G=M,K=k+(q=(q=(q=q+Q+((Z=Z+tt)>>>0<tt>>>0?1:0))+nt+((Z=Z+it)>>>0<it>>>0?1:0))+X+((Z=Z+b)>>>0<b>>>0?1:0))+((M=L+Z|0)>>>0<L>>>0?1:0)|0,k=V,L=_,V=j,_=H,j=O,H=g,O=q+(s=p+s+((b=u+et)>>>0<u>>>0?1:0))+((g=Z+b|0)>>>0<Z>>>0?1:0)|0}m=e.low=m+g,e.high=v+O+(m>>>0<g>>>0?1:0),S=r.low=S+H,r.high=x+j+(S>>>0<H>>>0?1:0),E=n.low=E+_,n.high=w+V+(E>>>0<_>>>0?1:0),A=o.low=A+L,o.high=F+k+(A>>>0<L>>>0?1:0),D=l.low=D+M,l.high=P+K+(D>>>0<M>>>0?1:0),C=f.low=C+G,f.high=I+U+(C>>>0<G>>>0?1:0),T=d.low=T+W,d.high=R+z+(T>>>0<W>>>0?1:0),N=y.low=N+J,y.high=B+Y+(N>>>0<J>>>0?1:0)},_doFinalize:function(){var a=this._data,t=a.words,e=8*this._nDataBytes,r=8*a.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(e/4294967296),t[31+(r+128>>>10<<5)]=e,a.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var a=e.clone.call(this);return a._hash=this._hash.clone(),a},blockSize:32}),t.SHA512=e._createHelper(o),t.HmacSHA512=e._createHmacHelper(o)}(),function(){var t=m,b=(a=t.x64).Word,e=a.WordArray,r=(a=t.algo).SHA512,a=a.SHA384=r.extend({_doReset:function(){this._hash=new e.init([new b.init(3418070365,3238371032),new b.init(1654270250,914150663),new b.init(2438529370,812702999),new b.init(355462360,4144912697),new b.init(1731405415,4290775857),new b.init(2394180231,1750603025),new b.init(3675008525,1694076839),new b.init(1203062813,3204075428)])},_doFinalize:function(){var a=r._doFinalize.call(this);return a.sigBytes-=16,a}});t.SHA384=r._createHelper(a),t.HmacSHA384=r._createHmacHelper(a)}(),function(){var q=m,t=(e=q.lib).WordArray,p=e.Hasher,e=q.algo,r=t.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),n=t.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),o=t.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),h=t.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),c=t.create([0,1518500249,1859775393,2400959708,2840853838]),l=t.create([1352829926,1548603684,1836072691,2053994217,0]);e=e.RIPEMD160=p.extend({_doReset:function(){this._hash=t.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var b=0;16>b;b++){var f=t[E=e+b];t[E]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8)}var d,g,y,v,m,u,x,S,w,s,E=this._hash.words,F=(f=c.words,l.words),A=r.words,q=n.words,p=o.words,P=h.words;u=d=E[0],x=g=E[1],S=y=E[2],w=v=E[3],s=m=E[4];var a;for(b=0;80>b;b+=1)a=d+t[e+A[b]]|0,a=16>b?a+((g^y^v)+f[0]):32>b?a+((g&y|~g&v)+f[1]):48>b?a+(((g|~y)^v)+f[2]):64>b?a+((g&v|y&~v)+f[3]):a+((g^(y|~v))+f[4]),a=(a=(a|=0)<<p[b]|a>>>32-p[b])+m|0,d=m,m=v,v=y<<10|y>>>22,y=g,g=a,a=u+t[e+q[b]]|0,a=16>b?a+((x^(S|~w))+F[0]):32>b?a+((x&w|S&~w)+F[1]):48>b?a+(((x|~S)^w)+F[2]):64>b?a+((x&S|~x&w)+F[3]):a+((x^S^w)+F[4]),a=(a=(a|=0)<<P[b]|a>>>32-P[b])+s|0,u=s,s=w,w=S<<10|S>>>22,S=x,x=a;a=E[1]+y+w|0,E[1]=E[2]+v+s|0,E[2]=E[3]+m+u|0,E[3]=E[4]+d+x|0,E[4]=E[0]+g+S|0,E[0]=a},_doFinalize:function(){var t=this._data,e=t.words,b=8*this._nDataBytes,r=8*t.sigBytes;for(e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=16711935&(b<<8|b>>>24)|4278255360&(b<<24|b>>>8),t.sigBytes=4*(e.length+1),this._process(),e=(t=this._hash).words,b=0;5>b;b++)r=e[b],e[b]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);return t},clone:function(){var t=p.clone.call(this);return t._hash=this._hash.clone(),t}});q.RIPEMD160=p._createHelper(e),q.HmacRIPEMD160=p._createHmacHelper(e)}(Math),function(){var t=m,e=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(a,b){a=this._hasher=new a.init,"string"==typeof b&&(b=e.parse(b));var t=a.blockSize,r=4*t;b.sigBytes>r&&(b=a.finalize(b)),b.clamp();for(var n=this._oKey=b.clone(),g=this._iKey=b.clone(),o=n.words,h=g.words,c=0;c<t;c++)o[c]^=1549556828,h[c]^=909522486;n.sigBytes=g.sigBytes=r,this.reset()},reset:function(){var a=this._hasher;a.reset(),a.update(this._iKey)},update:function(a){return this._hasher.update(a),this},finalize:function(a){var b=this._hasher;return a=b.finalize(a),b.reset(),b.finalize(this._oKey.clone().concat(a))}})}(),function(){var a,b=m,t=(a=b.lib).Base,e=a.WordArray,q=(a=b.algo).HMAC,r=a.PBKDF2=t.extend({cfg:t.extend({keySize:4,hasher:a.SHA1,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,b){var t=this.cfg,r=q.create(t.hasher,a),g=e.create(),n=e.create([1]),o=g.words,h=n.words,c=t.keySize;for(t=t.iterations;o.length<c;){var l=r.update(b).finalize(n);r.reset();for(var f=l.words,s=f.length,d=l,p=1;p<t;p++){d=r.finalize(d),r.reset();for(var y=d.words,v=0;v<s;v++)f[v]^=y[v]}g.concat(l),h[0]++}return g.sigBytes=4*c,g}});b.PBKDF2=function(a,b,t){return r.create(t).compute(a,b)}}();var x,S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function w(t){var b,e,a="";for(b=0;b+3<=t.length;b+=3)e=parseInt(t.substring(b,b+3),16),a+=S.charAt(e>>6)+S.charAt(63&e);for(b+1==t.length?(e=parseInt(t.substring(b,b+1),16),a+=S.charAt(e<<2)):b+2==t.length&&(e=parseInt(t.substring(b,b+2),16),a+=S.charAt(e>>2)+S.charAt((3&e)<<4)),"=";(3&a.length)>0;)a+="=";return a}function E(t){var e,r,a,n="",b=0;for(e=0;e<t.length&&"="!=t.charAt(e);++e)(a=S.indexOf(t.charAt(e)))<0||(0==b?(n+=R(a>>2),r=3&a,b=1):1==b?(n+=R(r<<2|a>>4),r=15&a,b=2):2==b?(n+=R(r),n+=R(a>>2),r=3&a,b=3):(n+=R(r<<2|a>>4),n+=R(15&a),b=0));return 1==b&&(n+=R(r<<2)),n}function F(t){var e,r=E(t),b=new Array;for(e=0;2*e<r.length;++e)b[e]=parseInt(r.substring(2*e,2*e+2),16);return b}function A(t,e,r){null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function P(){return new A(null)}"Microsoft Internet Explorer"==y.appName?(A.prototype.am=function(t,q,e,r,n,a){for(var o=32767&q,p=q>>15;--a>=0;){var h=32767&this[t],g=this[t++]>>15,b=p*h+g*o;n=((h=o*h+((32767&b)<<15)+e[r]+(1073741823&n))>>>30)+(b>>>15)+p*g+(n>>>30),e[r++]=1073741823&h}return n},x=30):"Netscape"!=y.appName?(A.prototype.am=function(t,a,b,e,r,g){for(;--g>=0;){var n=a*this[t++]+b[e]+r;r=Math.floor(n/67108864),b[e++]=67108863&n}return r},x=26):(A.prototype.am=function(t,q,e,r,n,a){for(var o=16383&q,p=q>>14;--a>=0;){var h=16383&this[t],g=this[t++]>>14,b=p*h+g*o;n=((h=o*h+((16383&b)<<14)+e[r]+n)>>28)+(b>>14)+p*g,e[r++]=268435455&h}return n},x=28),A.prototype.DB=x,A.prototype.DM=(1<<x)-1,A.prototype.DV=1<<x;A.prototype.FV=Math.pow(2,52),A.prototype.F1=52-x,A.prototype.F2=2*x-52;var D,I,C=new Array;for(D="0".charCodeAt(0),I=0;I<=9;++I)C[D++]=I;for(D="a".charCodeAt(0),I=10;I<36;++I)C[D++]=I;for(D="A".charCodeAt(0),I=10;I<36;++I)C[D++]=I;function R(a){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(a)}function T(b,a){var t=C[b.charCodeAt(a)];return null==t?-1:t}function B(a){var b=P();return b.fromInt(a),b}function N(a){var b,t=1;return 0!=(b=a>>>16)&&(a=b,t+=16),0!=(b=a>>8)&&(a=b,t+=8),0!=(b=a>>4)&&(a=b,t+=4),0!=(b=a>>2)&&(a=b,t+=2),0!=(b=a>>1)&&(a=b,t+=1),t}function O(a){this.m=a}function j(a){this.m=a,this.mp=a.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<a.DB-15)-1,this.mt2=2*a.t}function H(a,b){return a&b}function V(a,b){return a|b}function _(a,b){return a^b}function k(a,b){return a&~b}function L(a){if(0==a)return-1;var b=0;return 0==(65535&a)&&(a>>=16,b+=16),0==(255&a)&&(a>>=8,b+=8),0==(15&a)&&(a>>=4,b+=4),0==(3&a)&&(a>>=2,b+=2),0==(1&a)&&++b,b}function K(a){for(var b=0;0!=a;)a&=a-1,++b;return b}function M(){}function U(a){return a}function G(a){this.r2=P(),this.q3=P(),A.ONE.dlShiftTo(2*a.t,this.r2),this.mu=this.r2.divide(a),this.m=a}O.prototype.convert=function(a){return a.s<0||a.compareTo(this.m)>=0?a.mod(this.m):a},O.prototype.revert=function(a){return a},O.prototype.reduce=function(a){a.divRemTo(this.m,null,a)},O.prototype.mulTo=function(a,t,b){a.multiplyTo(t,b),this.reduce(b)},O.prototype.sqrTo=function(a,b){a.squareTo(b),this.reduce(b)},j.prototype.convert=function(a){var b=P();return a.abs().dlShiftTo(this.m.t,b),b.divRemTo(this.m,null,b),a.s<0&&b.compareTo(A.ZERO)>0&&this.m.subTo(b,b),b},j.prototype.revert=function(a){var b=P();return a.copyTo(b),this.reduce(b),b},j.prototype.reduce=function(a){for(;a.t<=this.mt2;)a[a.t++]=0;for(var t=0;t<this.m.t;++t){var b=32767&a[t],e=b*this.mpl+((b*this.mph+(a[t]>>15)*this.mpl&this.um)<<15)&a.DM;for(a[b=t+this.m.t]+=this.m.am(0,e,a,t,0,this.m.t);a[b]>=a.DV;)a[b]-=a.DV,a[++b]++}a.clamp(),a.drShiftTo(this.m.t,a),a.compareTo(this.m)>=0&&a.subTo(this.m,a)},j.prototype.mulTo=function(a,t,b){a.multiplyTo(t,b),this.reduce(b)},j.prototype.sqrTo=function(a,b){a.squareTo(b),this.reduce(b)},A.prototype.copyTo=function(b){for(var a=this.t-1;a>=0;--a)b[a]=this[a];b.t=this.t,b.s=this.s},A.prototype.fromInt=function(a){this.t=1,this.s=a<0?-1:0,a>0?this[0]=a:a<-1?this[0]=a+this.DV:this.t=0},A.prototype.fromString=function(t,e){var r;if(16==e)r=4;else if(8==e)r=3;else if(256==e)r=8;else if(2==e)r=1;else if(32==e)r=5;else{if(4!=e)return void this.fromRadix(t,e);r=2}this.t=0,this.s=0;for(var g=t.length,n=!1,o=0;--g>=0;){var a=8==r?255&t[g]:T(t,g);a<0?"-"==t.charAt(g)&&(n=!0):(n=!1,0==o?this[this.t++]=a:o+r>this.DB?(this[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this[this.t++]=a>>this.DB-o):this[this.t-1]|=a<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),n&&A.ZERO.subTo(this,this)},A.prototype.clamp=function(){for(var a=this.s&this.DM;this.t>0&&this[this.t-1]==a;)--this.t},A.prototype.dlShiftTo=function(t,b){var a;for(a=this.t-1;a>=0;--a)b[a+t]=this[a];for(a=t-1;a>=0;--a)b[a]=0;b.t=this.t+t,b.s=this.s},A.prototype.drShiftTo=function(t,b){for(var a=t;a<this.t;++a)b[a-t]=this[a];b.t=Math.max(this.t-t,0),b.s=this.s},A.prototype.lShiftTo=function(t,e){var r,b=t%this.DB,a=this.DB-b,g=(1<<a)-1,n=Math.floor(t/this.DB),o=this.s<<b&this.DM;for(r=this.t-1;r>=0;--r)e[r+n+1]=this[r]>>a|o,o=(this[r]&g)<<b;for(r=n-1;r>=0;--r)e[r]=0;e[n]=o,e.t=this.t+n+1,e.s=this.s,e.clamp()},A.prototype.rShiftTo=function(g,t){t.s=this.s;var e=Math.floor(g/this.DB);if(e>=this.t)t.t=0;else{var b=g%this.DB,a=this.DB-b,r=(1<<b)-1;t[0]=this[e]>>b;for(var n=e+1;n<this.t;++n)t[n-e-1]|=(this[n]&r)<<a,t[n-e]=this[n]>>b;b>0&&(t[this.t-e-1]|=(this.s&r)<<a),t.t=this.t-e,t.clamp()}},A.prototype.subTo=function(t,e){for(var r=0,g=0,b=Math.min(t.t,this.t);r<b;)g+=this[r]-t[r],e[r++]=g&this.DM,g>>=this.DB;if(t.t<this.t){for(g-=t.s;r<this.t;)g+=this[r],e[r++]=g&this.DM,g>>=this.DB;g+=this.s}else{for(g+=this.s;r<t.t;)g-=t[r],e[r++]=g&this.DM,g>>=this.DB;g-=t.s}e.s=g<0?-1:0,g<-1?e[r++]=this.DV+g:g>0&&(e[r++]=g),e.t=r,e.clamp()},A.prototype.multiplyTo=function(t,e){var b=this.abs(),r=t.abs(),n=b.t;for(e.t=n+r.t;--n>=0;)e[n]=0;for(n=0;n<r.t;++n)e[n+b.t]=b.am(0,r[n],e,n,0,b.t);e.s=0,e.clamp(),this.s!=t.s&&A.ZERO.subTo(e,e)},A.prototype.squareTo=function(t){for(var a=this.abs(),b=t.t=2*a.t;--b>=0;)t[b]=0;for(b=0;b<a.t-1;++b){var e=a.am(b,a[b],t,2*b,0,1);(t[b+a.t]+=a.am(b+1,2*a[b],t,2*b+1,e,a.t-b-1))>=a.DV&&(t[b+a.t]-=a.DV,t[b+a.t+1]=1)}t.t>0&&(t[t.t-1]+=a.am(b,a[b],t,2*b,0,1)),t.s=0,t.clamp()},A.prototype.divRemTo=function(t,e,g){var r=t.abs();if(!(r.t<=0)){var n=this.abs();if(n.t<r.t)return null!=e&&e.fromInt(0),void(null!=g&&this.copyTo(g));null==g&&(g=P());var o=P(),a=this.s,h=t.s,c=this.DB-N(r[r.t-1]);c>0?(r.lShiftTo(c,o),n.lShiftTo(c,g)):(r.copyTo(o),n.copyTo(g));var p=o.t,b=o[p-1];if(0!=b){var l=b*(1<<this.F1)+(p>1?o[p-2]>>this.F2:0),f=this.FV/l,d=(1<<this.F1)/l,y=1<<this.F2,u=g.t,s=u-p,v=null==e?P():e;for(o.dlShiftTo(s,v),g.compareTo(v)>=0&&(g[g.t++]=1,g.subTo(v,g)),A.ONE.dlShiftTo(p,v),v.subTo(o,o);o.t<p;)o[o.t++]=0;for(;--s>=0;){var m=g[--u]==b?this.DM:Math.floor(g[u]*f+(g[u-1]+y)*d);if((g[u]+=o.am(0,m,g,s,0,p))<m)for(o.dlShiftTo(s,v),g.subTo(v,g);g[u]<--m;)g.subTo(v,g)}null!=e&&(g.drShiftTo(p,e),a!=h&&A.ZERO.subTo(e,e)),g.t=p,g.clamp(),c>0&&g.rShiftTo(c,g),a<0&&A.ZERO.subTo(g,g)}}},A.prototype.invDigit=function(){if(this.t<1)return 0;var a=this[0];if(0==(1&a))return 0;var b=3&a;return(b=(b=(b=(b=b*(2-(15&a)*b)&15)*(2-(255&a)*b)&255)*(2-((65535&a)*b&65535))&65535)*(2-a*b%this.DV)%this.DV)>0?this.DV-b:-b},A.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},A.prototype.exp=function(t,e){if(t>4294967295||t<1)return A.ONE;var r=P(),a=P(),n=e.convert(this),o=N(t)-1;for(n.copyTo(r);--o>=0;)if(e.sqrTo(r,a),(t&1<<o)>0)e.mulTo(a,n,r);else{var b=r;r=a,a=b}return e.revert(r)},A.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,g=(1<<e)-1,a=!1,n="",o=this.t,h=this.DB-o*this.DB%e;if(o-- >0)for(h<this.DB&&(r=this[o]>>h)>0&&(a=!0,n=R(r));o>=0;)h<e?(r=(this[o]&(1<<h)-1)<<e-h,r|=this[--o]>>(h+=this.DB-e)):(r=this[o]>>(h-=e)&g,h<=0&&(h+=this.DB,--o)),r>0&&(a=!0),a&&(n+=R(r));return a?n:"0"},A.prototype.negate=function(){var a=P();return A.ZERO.subTo(this,a),a},A.prototype.abs=function(){return this.s<0?this.negate():this},A.prototype.compareTo=function(b){var t=this.s-b.s;if(0!=t)return t;var e=this.t;if(0!=(t=e-b.t))return this.s<0?-t:t;for(;--e>=0;)if(0!=(t=this[e]-b[e]))return t;return 0},A.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+N(this[this.t-1]^this.s&this.DM)},A.prototype.mod=function(b){var t=P();return this.abs().divRemTo(b,null,t),this.s<0&&t.compareTo(A.ZERO)>0&&b.subTo(t,t),t},A.prototype.modPowInt=function(b,a){var t;return t=b<256||a.isEven()?new O(a):new j(a),this.exp(b,t)},A.ZERO=B(0),A.ONE=B(1),M.prototype.convert=U,M.prototype.revert=U,M.prototype.mulTo=function(a,t,b){a.multiplyTo(t,b)},M.prototype.sqrTo=function(a,b){a.squareTo(b)},G.prototype.convert=function(a){if(a.s<0||a.t>2*this.m.t)return a.mod(this.m);if(a.compareTo(this.m)<0)return a;var b=P();return a.copyTo(b),this.reduce(b),b},G.prototype.revert=function(a){return a},G.prototype.reduce=function(a){for(a.drShiftTo(this.m.t-1,this.r2),a.t>this.m.t+1&&(a.t=this.m.t+1,a.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);a.compareTo(this.r2)<0;)a.dAddOffset(1,this.m.t+1);for(a.subTo(this.r2,a);a.compareTo(this.m)>=0;)a.subTo(this.m,a)},G.prototype.mulTo=function(a,t,b){a.multiplyTo(t,b),this.reduce(b)},G.prototype.sqrTo=function(a,b){a.squareTo(b),this.reduce(b)};var z=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],W=(1<<26)/z[z.length-1];function Y(){this.i=0,this.j=0,this.S=new Array}A.prototype.chunkSize=function(a){return Math.floor(Math.LN2*this.DB/Math.log(a))},A.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),i=B(r),n=P(),o=P(),g="";for(this.divRemTo(i,n,o);n.signum()>0;)g=(r+o.intValue()).toString(t).substr(1)+g,n.divRemTo(i,n,o);return o.intValue().toString(t)+g},A.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var r=this.chunkSize(e),g=Math.pow(e,r),n=!1,a=0,o=0,h=0;h<t.length;++h){var c=T(t,h);c<0?"-"==t.charAt(h)&&0==this.signum()&&(n=!0):(o=e*o+c,++a>=r&&(this.dMultiply(g),this.dAddOffset(o,0),a=0,o=0))}a>0&&(this.dMultiply(Math.pow(e,a)),this.dAddOffset(o,0)),n&&A.ZERO.subTo(this,this)},A.prototype.fromNumber=function(t,e,r){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(A.ONE.shiftLeft(t-1),V,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(A.ONE.shiftLeft(t-1),this);else{var n=new Array,g=7&t;n.length=1+(t>>3),e.nextBytes(n),g>0?n[0]&=(1<<g)-1:n[0]=0,this.fromString(n,256)}},A.prototype.bitwiseTo=function(t,e,r){var n,g,b=Math.min(t.t,this.t);for(n=0;n<b;++n)r[n]=e(this[n],t[n]);if(t.t<this.t){for(g=t.s&this.DM,n=b;n<this.t;++n)r[n]=e(this[n],g);r.t=this.t}else{for(g=this.s&this.DM,n=b;n<t.t;++n)r[n]=e(g,t[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()},A.prototype.changeBit=function(t,b){var a=A.ONE.shiftLeft(t);return this.bitwiseTo(a,b,a),a},A.prototype.addTo=function(t,e){for(var r=0,g=0,b=Math.min(t.t,this.t);r<b;)g+=this[r]+t[r],e[r++]=g&this.DM,g>>=this.DB;if(t.t<this.t){for(g+=t.s;r<this.t;)g+=this[r],e[r++]=g&this.DM,g>>=this.DB;g+=this.s}else{for(g+=this.s;r<t.t;)g+=t[r],e[r++]=g&this.DM,g>>=this.DB;g+=t.s}e.s=g<0?-1:0,g>0?e[r++]=g:g<-1&&(e[r++]=this.DV+g),e.t=r,e.clamp()},A.prototype.dMultiply=function(a){this[this.t]=this.am(0,a-1,this,0,0,this.t),++this.t,this.clamp()},A.prototype.dAddOffset=function(b,a){if(0!=b){for(;this.t<=a;)this[this.t++]=0;for(this[a]+=b;this[a]>=this.DV;)this[a]-=this.DV,++a>=this.t&&(this[this.t++]=0),++this[a]}},A.prototype.multiplyLowerTo=function(b,t,e){var r,n=Math.min(this.t+b.t,t);for(e.s=0,e.t=n;n>0;)e[--n]=0;for(r=e.t-this.t;n<r;++n)e[n+this.t]=this.am(0,b[n],e,n,0,this.t);for(r=Math.min(b.t,t);n<r;++n)this.am(0,b[n],e,n,0,t-n);e.clamp()},A.prototype.multiplyUpperTo=function(b,t,e){--t;var r=e.t=this.t+b.t-t;for(e.s=0;--r>=0;)e[r]=0;for(r=Math.max(t-this.t,0);r<b.t;++r)e[this.t+r-t]=this.am(t-r,b[r],e,0,0,this.t+r-t);e.clamp(),e.drShiftTo(1,e)},A.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,b=this.s<0?t-1:0;if(this.t>0)if(0==e)b=this[0]%t;else for(var a=this.t-1;a>=0;--a)b=(e*b+this[a])%t;return b},A.prototype.millerRabin=function(t){var g=this.subtract(A.ONE),e=g.getLowestSetBit();if(e<=0)return!1;var r=g.shiftRight(e);(t=t+1>>1)>z.length&&(t=z.length);for(var b=P(),n=0;n<t;++n){b.fromInt(z[Math.floor(Math.random()*z.length)]);var o=b.modPow(r,this);if(0!=o.compareTo(A.ONE)&&0!=o.compareTo(g)){for(var h=1;h++<e&&0!=o.compareTo(g);)if(0==(o=o.modPowInt(2,this)).compareTo(A.ONE))return!1;if(0!=o.compareTo(g))return!1}}return!0},A.prototype.clone=function(){var a=P();return this.copyTo(a),a},A.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},A.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},A.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},A.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},A.prototype.toByteArray=function(){var b=this.t,t=new Array;t[0]=this.s;var e,r=this.DB-b*this.DB%8,a=0;if(b-- >0)for(r<this.DB&&(e=this[b]>>r)!=(this.s&this.DM)>>r&&(t[a++]=e|this.s<<this.DB-r);b>=0;)r<8?(e=(this[b]&(1<<r)-1)<<8-r,e|=this[--b]>>(r+=this.DB-8)):(e=this[b]>>(r-=8)&255,r<=0&&(r+=this.DB,--b)),0!=(128&e)&&(e|=-256),0==a&&(128&this.s)!=(128&e)&&++a,(a>0||e!=this.s)&&(t[a++]=e);return t},A.prototype.equals=function(b){return 0==this.compareTo(b)},A.prototype.min=function(b){return this.compareTo(b)<0?this:b},A.prototype.max=function(b){return this.compareTo(b)>0?this:b},A.prototype.and=function(b){var t=P();return this.bitwiseTo(b,H,t),t},A.prototype.or=function(b){var t=P();return this.bitwiseTo(b,V,t),t},A.prototype.xor=function(b){var t=P();return this.bitwiseTo(b,_,t),t},A.prototype.andNot=function(b){var t=P();return this.bitwiseTo(b,k,t),t},A.prototype.not=function(){for(var b=P(),a=0;a<this.t;++a)b[a]=this.DM&~this[a];return b.t=this.t,b.s=~this.s,b},A.prototype.shiftLeft=function(b){var a=P();return b<0?this.rShiftTo(-b,a):this.lShiftTo(b,a),a},A.prototype.shiftRight=function(b){var a=P();return b<0?this.lShiftTo(-b,a):this.rShiftTo(b,a),a},A.prototype.getLowestSetBit=function(){for(var a=0;a<this.t;++a)if(0!=this[a])return a*this.DB+L(this[a]);return this.s<0?this.t*this.DB:-1},A.prototype.bitCount=function(){for(var t=0,a=this.s&this.DM,b=0;b<this.t;++b)t+=K(this[b]^a);return t},A.prototype.testBit=function(b){var a=Math.floor(b/this.DB);return a>=this.t?0!=this.s:0!=(this[a]&1<<b%this.DB)},A.prototype.setBit=function(a){return this.changeBit(a,V)},A.prototype.clearBit=function(a){return this.changeBit(a,k)},A.prototype.flipBit=function(a){return this.changeBit(a,_)},A.prototype.add=function(b){var t=P();return this.addTo(b,t),t},A.prototype.subtract=function(b){var t=P();return this.subTo(b,t),t},A.prototype.multiply=function(b){var t=P();return this.multiplyTo(b,t),t},A.prototype.divide=function(b){var t=P();return this.divRemTo(b,t,null),t},A.prototype.remainder=function(b){var t=P();return this.divRemTo(b,null,t),t},A.prototype.divideAndRemainder=function(b){var t=P(),e=P();return this.divRemTo(b,t,e),new Array(t,e)},A.prototype.modPow=function(q,t){var e,r,n=q.bitLength(),b=B(1);if(n<=0)return b;e=n<18?1:n<48?3:n<144?4:n<768?5:6,r=n<8?new O(t):t.isEven()?new G(t):new j(t);var p=new Array,o=3,s=e-1,a=(1<<e)-1;if(p[1]=r.convert(this),e>1){var h=P();for(r.sqrTo(p[1],h);o<=a;)p[o]=P(),r.mulTo(h,p[o-2],p[o]),o+=2}var c,l,f=q.t-1,u=!0,d=P();for(n=N(q[f])-1;f>=0;){for(n>=s?c=q[f]>>n-s&a:(c=(q[f]&(1<<n+1)-1)<<s-n,f>0&&(c|=q[f-1]>>this.DB+n-s)),o=e;0==(1&c);)c>>=1,--o;if((n-=o)<0&&(n+=this.DB,--f),u)p[c].copyTo(b),u=!1;else{for(;o>1;)r.sqrTo(b,d),r.sqrTo(d,b),o-=2;o>0?r.sqrTo(b,d):(l=b,b=d,d=l),r.mulTo(d,p[c],b)}for(;f>=0&&0==(q[f]&1<<n);)r.sqrTo(b,d),l=b,b=d,d=l,--n<0&&(n=this.DB-1,--f)}return r.revert(b)},A.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return A.ZERO;for(var i=t.clone(),r=this.clone(),g=B(1),n=B(0),o=B(0),h=B(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),e?(g.isEven()&&n.isEven()||(g.addTo(this,g),n.subTo(t,n)),g.rShiftTo(1,g)):n.isEven()||n.subTo(t,n),n.rShiftTo(1,n);for(;r.isEven();)r.rShiftTo(1,r),e?(o.isEven()&&h.isEven()||(o.addTo(this,o),h.subTo(t,h)),o.rShiftTo(1,o)):h.isEven()||h.subTo(t,h),h.rShiftTo(1,h);i.compareTo(r)>=0?(i.subTo(r,i),e&&g.subTo(o,g),n.subTo(h,n)):(r.subTo(i,r),e&&o.subTo(g,o),h.subTo(n,h))}return 0!=r.compareTo(A.ONE)?A.ZERO:h.compareTo(t)>=0?h.subtract(t):h.signum()<0?(h.addTo(t,h),h.signum()<0?h.add(t):h):h},A.prototype.pow=function(a){return this.exp(a,new M)},A.prototype.gcd=function(t){var b=this.s<0?this.negate():this.clone(),e=t.s<0?t.negate():t.clone();if(b.compareTo(e)<0){var r=b;b=e,e=r}var n=b.getLowestSetBit(),o=e.getLowestSetBit();if(o<0)return b;for(n<o&&(o=n),o>0&&(b.rShiftTo(o,b),e.rShiftTo(o,e));b.signum()>0;)(n=b.getLowestSetBit())>0&&b.rShiftTo(n,b),(n=e.getLowestSetBit())>0&&e.rShiftTo(n,e),b.compareTo(e)>=0?(b.subTo(e,b),b.rShiftTo(1,b)):(e.subTo(b,e),e.rShiftTo(1,e));return o>0&&e.lShiftTo(o,e),e},A.prototype.isProbablePrime=function(t){var e,b=this.abs();if(1==b.t&&b[0]<=z[z.length-1]){for(e=0;e<z.length;++e)if(b[0]==z[e])return!0;return!1}if(b.isEven())return!1;for(e=1;e<z.length;){for(var a=z[e],r=e+1;r<z.length&&a<W;)a*=z[r++];for(a=b.modInt(a);e<r;)if(a%z[e++]==0)return!1}return b.millerRabin(t)},A.prototype.square=function(){var a=P();return this.squareTo(a),a},Y.prototype.init=function(t){var e,a,b;for(e=0;e<256;++e)this.S[e]=e;for(a=0,e=0;e<256;++e)a=a+this.S[e]+t[e%t.length]&255,b=this.S[e],this.S[e]=this.S[a],this.S[a]=b;this.i=0,this.j=0},Y.prototype.next=function(){var a;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,a=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=a,this.S[a+this.S[this.i]&255]};var J,$,X;function Z(){!function(a){$[X++]^=255&a,$[X++]^=a>>8&255,$[X++]^=a>>16&255,$[X++]^=a>>24&255,X>=256&&(X-=256)}((new Date).getTime())}if(null==$){var Q;if($=new Array,X=0,void 0!==v&&(void 0!==v.crypto||void 0!==v.msCrypto)){var tt=v.crypto||v.msCrypto;if(tt.getRandomValues){var et=new Uint8Array(32);for(tt.getRandomValues(et),Q=0;Q<32;++Q)$[X++]=et[Q]}else if("Netscape"==y.appName&&y.appVersion<"5"){var nt=v.crypto.random(32);for(Q=0;Q<nt.length;++Q)$[X++]=255&nt.charCodeAt(Q)}}for(;X<256;)Q=Math.floor(65536*Math.random()),$[X++]=Q>>>8,$[X++]=255&Q;X=0,Z()}function it(){if(null==J){for(Z(),(J=new Y).init($),X=0;X<$.length;++X)$[X]=0;X=0}return J.next()}function st(){}function at(b,a){return new A(b,a)}function ot(t,a,e){for(var b="",r=0;b.length<a;)b+=e(String.fromCharCode.apply(String,t.concat([(4278190080&r)>>24,(16711680&r)>>16,(65280&r)>>8,255&r]))),r+=1;return b}function ut(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function ht(t,a,e){for(var b="",r=0;b.length<a;)b+=e(t+String.fromCharCode.apply(String,[(4278190080&r)>>24,(16711680&r)>>16,(65280&r)>>8,255&r])),r+=1;return b}function ct(b,a){this.x=a,this.q=b}function lt(t,a,e,b){this.curve=t,this.x=a,this.y=e,this.z=null==b?A.ONE:b,this.zinv=null}function ft(t,e,r){this.q=t,this.a=this.fromBigInteger(e),this.b=this.fromBigInteger(r),this.infinity=new lt(this,null,null)}st.prototype.nextBytes=function(b){var a;for(a=0;a<b.length;++a)b[a]=it()},ut.prototype.doPublic=function(a){return a.modPowInt(this.e,this.n)},ut.prototype.setPublic=function(b,a){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof b)this.n=b,this.e=a;else{if(!(null!=b&&null!=a&&b.length>0&&a.length>0))throw"Invalid RSA public key";this.n=at(b,16),this.e=parseInt(a,16)}},ut.prototype.encrypt=function(t){var a=function(t,e){if(e<t.length+11)throw"Message too long for RSA";for(var g=new Array,r=t.length-1;r>=0&&e>0;){var n=t.charCodeAt(r--);n<128?g[--e]=n:n>127&&n<2048?(g[--e]=63&n|128,g[--e]=n>>6|192):(g[--e]=63&n|128,g[--e]=n>>6&63|128,g[--e]=n>>12|224)}g[--e]=0;for(var b=new st,a=new Array;e>2;){for(a[0]=0;0==a[0];)b.nextBytes(a);g[--e]=a[0]}return g[--e]=2,g[--e]=0,new A(g)}(t,this.n.bitLength()+7>>3);if(null==a)return null;var e=this.doPublic(a);if(null==e)return null;var b=e.toString(16);return 0==(1&b.length)?b:"0"+b},ut.prototype.encryptOAEP=function(t,e,b){var a=function(q,a,t,e){var r=gt.crypto.MessageDigest,n=gt.crypto.Util,b=null;if(t||(t="sha1"),"string"==typeof t&&(b=r.getCanonicalAlgName(t),e=r.getHashLength(b),t=function(i){return Rt(n.hashHex(Tt(i),b))}),q.length+2*e+2>a)throw"Message too long for RSA";var o,h="";for(o=0;o<a-q.length-2*e-2;o+=1)h+="\0";var c=t("")+h+""+q,g=new Array(e);(new st).nextBytes(g);var l=ot(g,c.length,t),p=[];for(o=0;o<c.length;o+=1)p[o]=c.charCodeAt(o)^l.charCodeAt(o);var f=ot(p,g.length,t),d=[0];for(o=0;o<g.length;o+=1)d[o+1]=g[o]^f.charCodeAt(o);return new A(d.concat(p))}(t,this.n.bitLength()+7>>3,e,b);if(null==a)return null;var g=this.doPublic(a);if(null==g)return null;var r=g.toString(16);return 0==(1&r.length)?r:"0"+r},ut.prototype.type="RSA",ut.prototype.doPrivate=function(a){if(null==this.p||null==this.q)return a.modPow(this.d,this.n);for(var t=a.mod(this.p).modPow(this.dmp1,this.p),b=a.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(b)<0;)t=t.add(this.p);return t.subtract(b).multiply(this.coeff).mod(this.p).multiply(this.q).add(b)},ut.prototype.setPrivate=function(t,a,b){if(this.isPrivate=!0,"string"!=typeof t)this.n=t,this.e=a,this.d=b;else{if(!(null!=t&&null!=a&&t.length>0&&a.length>0))throw"Invalid RSA private key";this.n=at(t,16),this.e=parseInt(a,16),this.d=at(b,16)}},ut.prototype.setPrivateEx=function(g,t,e,r,b,a,n,o){if(this.isPrivate=!0,this.isPublic=!1,null==g)throw"RSASetPrivateEx N == null";if(null==t)throw"RSASetPrivateEx E == null";if(0==g.length)throw"RSASetPrivateEx N.length == 0";if(0==t.length)throw"RSASetPrivateEx E.length == 0";if(!(null!=g&&null!=t&&g.length>0&&t.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=at(g,16),this.e=parseInt(t,16),this.d=at(e,16),this.p=at(r,16),this.q=at(b,16),this.dmp1=at(a,16),this.dmq1=at(n,16),this.coeff=at(o,16)},ut.prototype.generate=function(b,t){var a=new st,g=b>>1;this.e=parseInt(t,16);for(var e=new A(t,16),r=b/2-100,n=A.ONE.shiftLeft(r);;){for(;this.p=new A(b-g,1,a),0!=this.p.subtract(A.ONE).gcd(e).compareTo(A.ONE)||!this.p.isProbablePrime(10););for(;this.q=new A(g,1,a),0!=this.q.subtract(A.ONE).gcd(e).compareTo(A.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var o=this.p;this.p=this.q,this.q=o}var h=this.q.subtract(this.p).abs();if(!(h.bitLength()<r||h.compareTo(n)<=0)){var i=this.p.subtract(A.ONE),c=this.q.subtract(A.ONE),l=i.multiply(c);if(0==l.gcd(e).compareTo(A.ONE)&&(this.n=this.p.multiply(this.q),this.n.bitLength()==b)){this.d=e.modInverse(l),this.dmp1=this.d.mod(i),this.dmq1=this.d.mod(c),this.coeff=this.q.modInverse(this.p);break}}}this.isPrivate=!0},ut.prototype.decrypt=function(b){if(b.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var t=at(b,16),a=this.doPrivate(t);return null==a?null:function(g,t){for(var a=g.toByteArray(),e=0;e<a.length&&0==a[e];)++e;if(a.length-e!=t-1||2!=a[e])return null;for(++e;0!=a[e];)if(++e>=a.length)return null;for(var r="";++e<a.length;){var n=255&a[e];n<128?r+=String.fromCharCode(n):n>191&&n<224?(r+=String.fromCharCode((31&n)<<6|63&a[e+1]),++e):(r+=String.fromCharCode((15&n)<<12|(63&a[e+1])<<6|63&a[e+2]),e+=2)}return r}(a,this.n.bitLength()+7>>3)},ut.prototype.decryptOAEP=function(t,e,b){if(t.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var r=at(t,16),a=this.doPrivate(r);return null==a?null:function(t,b,g,p){var e=gt.crypto.MessageDigest,r=gt.crypto.Util,n=null;for(g||(g="sha1"),"string"==typeof g&&(n=e.getCanonicalAlgName(g),p=e.getHashLength(n),g=function(t){return Rt(r.hashHex(Tt(t),n))}),t=t.toByteArray(),o=0;o<t.length;o+=1)t[o]&=255;for(;t.length<b;)t.unshift(0);if((t=String.fromCharCode.apply(String,t)).length<2*p+2)throw"Cipher too short";var o,h=t.substr(1,p),s=t.substr(p+1),q=ht(s,p,g),c=[];for(o=0;o<h.length;o+=1)c[o]=h.charCodeAt(o)^q.charCodeAt(o);var l=ht(String.fromCharCode.apply(String,c),t.length-p,g),f=[];for(o=0;o<s.length;o+=1)f[o]=s.charCodeAt(o)^l.charCodeAt(o);if((f=String.fromCharCode.apply(String,f)).substr(0,p)!==g(""))throw"Hash mismatch";var a=(f=f.substr(p)).indexOf("");if((-1!=a?f.substr(0,a).lastIndexOf("\0"):-1)+1!=a)throw"Malformed data";return f.substr(a+1)}(a,this.n.bitLength()+7>>3,e,b)},ct.prototype.equals=function(a){return a==this||this.q.equals(a.q)&&this.x.equals(a.x)},ct.prototype.toBigInteger=function(){return this.x},ct.prototype.negate=function(){return new ct(this.q,this.x.negate().mod(this.q))},ct.prototype.add=function(a){return new ct(this.q,this.x.add(a.toBigInteger()).mod(this.q))},ct.prototype.subtract=function(a){return new ct(this.q,this.x.subtract(a.toBigInteger()).mod(this.q))},ct.prototype.multiply=function(a){return new ct(this.q,this.x.multiply(a.toBigInteger()).mod(this.q))},ct.prototype.square=function(){return new ct(this.q,this.x.square().mod(this.q))},ct.prototype.divide=function(a){return new ct(this.q,this.x.multiply(a.toBigInteger().modInverse(this.q)).mod(this.q))},ct.prototype.sqrt=function(){return new ct(this.q,this.x.sqrt().mod(this.q))},lt.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},lt.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},lt.prototype.equals=function(a){return a==this||(this.isInfinity()?a.isInfinity():a.isInfinity()?this.isInfinity():!!a.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(a.z)).mod(this.curve.q).equals(A.ZERO)&&a.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(a.z)).mod(this.curve.q).equals(A.ZERO))},lt.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(A.ZERO)&&!this.y.toBigInteger().equals(A.ZERO)},lt.prototype.negate=function(){return new lt(this.curve,this.x,this.y.negate(),this.z)},lt.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var p=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),e=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q);if(A.ZERO.equals(e))return A.ZERO.equals(p)?this.twice():this.curve.getInfinity();var r=new A("3"),n=this.x.toBigInteger(),o=this.y.toBigInteger(),h=(t.x.toBigInteger(),t.y.toBigInteger(),e.square()),i=h.multiply(e),c=n.multiply(h),g=p.square().multiply(this.z),a=g.subtract(c.shiftLeft(1)).multiply(t.z).subtract(i).multiply(e).mod(this.curve.q),l=c.multiply(r).multiply(p).subtract(o.multiply(i)).subtract(g.multiply(p)).multiply(t.z).add(p.multiply(i)).mod(this.curve.q),f=i.multiply(this.z).multiply(t.z).mod(this.curve.q);return new lt(this.curve,this.curve.fromBigInteger(a),this.curve.fromBigInteger(l),f)},lt.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var g=new A("3"),t=this.x.toBigInteger(),e=this.y.toBigInteger(),r=e.multiply(this.z),n=r.multiply(e).mod(this.curve.q),i=this.curve.a.toBigInteger(),o=t.square().multiply(g);A.ZERO.equals(i)||(o=o.add(this.z.square().multiply(i)));var b=(o=o.mod(this.curve.q)).square().subtract(t.shiftLeft(3).multiply(n)).shiftLeft(1).multiply(r).mod(this.curve.q),h=o.multiply(g).multiply(t).subtract(n.shiftLeft(1)).shiftLeft(2).multiply(n).subtract(o.square().multiply(o)).mod(this.curve.q),c=r.square().multiply(r).shiftLeft(3).mod(this.curve.q);return new lt(this.curve,this.curve.fromBigInteger(b),this.curve.fromBigInteger(h),c)},lt.prototype.multiply=function(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var g,e=t,r=e.multiply(new A("3")),b=this.negate(),n=this,q=this.curve.q.subtract(t),o=q.multiply(new A("3")),h=new lt(this.curve,this.x,this.y),a=h.negate();for(g=r.bitLength()-2;g>0;--g){n=n.twice();var c=r.testBit(g);c!=e.testBit(g)&&(n=n.add(c?this:b))}for(g=o.bitLength()-2;g>0;--g){h=h.twice();var p=o.testBit(g);p!=q.testBit(g)&&(h=h.add(p?h:a))}return n},lt.prototype.multiplyTwo=function(t,a,b){var e;e=t.bitLength()>b.bitLength()?t.bitLength()-1:b.bitLength()-1;for(var r=this.curve.getInfinity(),n=this.add(a);e>=0;)r=r.twice(),t.testBit(e)?r=b.testBit(e)?r.add(n):r.add(this):b.testBit(e)&&(r=r.add(a)),--e;return r},ft.prototype.getQ=function(){return this.q},ft.prototype.getA=function(){return this.a},ft.prototype.getB=function(){return this.b},ft.prototype.equals=function(a){return a==this||this.q.equals(a.q)&&this.a.equals(a.a)&&this.b.equals(a.b)},ft.prototype.getInfinity=function(){return this.infinity},ft.prototype.fromBigInteger=function(a){return new ct(this.q,a)},ft.prototype.decodePointHex=function(t){switch(parseInt(t.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:var e=t.substr(0,2),r=(t.substr(2),this.fromBigInteger(new A(h,16))),i=this.getA(),n=this.getB(),g=r.square().add(i).multiply(r).add(n).sqrt();return"03"==e&&(g=g.negate()),new lt(this,r,g);case 4:case 6:case 7:var o=(t.length-2)/2,h=t.substr(2,o),c=t.substr(o+2,o);return new lt(this,this.fromBigInteger(new A(h,16)),this.fromBigInteger(new A(c,16)));default:return null}},ct.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},lt.prototype.getEncoded=function(t){var e=function(t,e){var g=t.toByteArrayUnsigned();if(e<g.length)g=g.slice(g.length-e);else for(;e>g.length;)g.unshift(0);return g},a=this.getX().toBigInteger(),r=this.getY().toBigInteger(),b=e(a,32);return t?r.isEven()?b.unshift(2):b.unshift(3):(b.unshift(4),b=b.concat(e(r,32))),b},lt.decodeFrom=function(g,t){t[0];var e=t.length-1,r=t.slice(1,1+e/2),b=t.slice(1+e/2,1+e);r.unshift(0),b.unshift(0);var a=new A(r),n=new A(b);return new lt(g,g.fromBigInteger(a),g.fromBigInteger(n))},lt.decodeFromHex=function(g,t){t.substr(0,2);var e=t.length-2,r=t.substr(2,e/2),b=t.substr(2+e/2,e/2),a=new A(r,16),n=new A(b,16);return new lt(g,g.fromBigInteger(a),g.fromBigInteger(n))},lt.prototype.add2D=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;if(this.x.equals(t.x))return this.y.equals(t.y)?this.twice():this.curve.getInfinity();var g=t.x.subtract(this.x),a=t.y.subtract(this.y).divide(g),e=a.square().subtract(this.x).subtract(t.x),r=a.multiply(this.x.subtract(e)).subtract(this.y);return new lt(this.curve,e,r)},lt.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var b=this.curve.fromBigInteger(A.valueOf(2)),t=this.curve.fromBigInteger(A.valueOf(3)),a=this.x.square().multiply(t).add(this.curve.a).divide(this.y.multiply(b)),e=a.square().subtract(this.x.multiply(b)),r=a.multiply(this.x.subtract(e)).subtract(this.y);return new lt(this.curve,e,r)},lt.prototype.multiply2D=function(b){if(this.isInfinity())return this;if(0==b.signum())return this.curve.getInfinity();var t,g=b,e=g.multiply(new A("3")),r=this.negate(),n=this;for(t=e.bitLength()-2;t>0;--t){n=n.twice();var a=e.testBit(t);a!=g.testBit(t)&&(n=n.add2D(a?this:r))}return n},lt.prototype.isOnCurve=function(){var t=this.getX().toBigInteger(),i=this.getY().toBigInteger(),e=this.curve.getA().toBigInteger(),r=this.curve.getB().toBigInteger(),n=this.curve.getQ(),o=i.multiply(i).mod(n),g=t.multiply(t).multiply(t).add(e.multiply(t)).add(r).mod(n);return o.equals(g)},lt.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},lt.prototype.validate=function(){var t=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var a=this.getX().toBigInteger(),b=this.getY().toBigInteger();if(a.compareTo(A.ONE)<0||a.compareTo(t.subtract(A.ONE))>0)throw new Error("x coordinate out of bounds");if(b.compareTo(A.ONE)<0||b.compareTo(t.subtract(A.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(t).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var pt=function(){var t=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),e=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),g={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function r(t,e,r){return e?g[e]:String.fromCharCode(parseInt(r,16))}var n=new String(""),b=Object.hasOwnProperty;return function(u,q){var o,h,p=u.match(t),c=p[0],l=!1;"{"===c?o={}:"["===c?o=[]:(o=[],l=!0);for(var f=[o],d=1-l,y=p.length;d<y;++d){var v;switch((c=p[d]).charCodeAt(0)){default:(v=f[0])[h||v.length]=+c,h=void 0;break;case 34:if(-1!==(c=c.substring(1,c.length-1)).indexOf("\\")&&(c=c.replace(e,r)),v=f[0],!h){if(!(v instanceof Array)){h=c||n;break}h=v.length}v[h]=c,h=void 0;break;case 91:v=f[0],f.unshift(v[h||v.length]=[]),h=void 0;break;case 93:case 125:f.shift();break;case 102:(v=f[0])[h||v.length]=!1,h=void 0;break;case 110:(v=f[0])[h||v.length]=null,h=void 0;break;case 116:(v=f[0])[h||v.length]=!0,h=void 0;break;case 123:v=f[0],f.unshift(v[h||v.length]={}),h=void 0}}if(l){if(1!==f.length)throw new Error;o=o[0]}else if(f.length)throw new Error;if(q){var s=function(t,e){var r=t[e];if(r&&"object"==typeof r){var n=null;for(var o in r)if(b.call(r,o)&&r!==t){var h=s(r,o);void 0!==h?r[o]=h:(n||(n=[]),n.push(o))}if(n)for(var c=n.length;--c>=0;)delete r[n[c]]}return q.call(t,e,r)};o=s({"":o},"")}return o}}();void 0!==gt&&gt||(gt={}),void 0!==gt.asn1&&gt.asn1||(gt.asn1={}),gt.asn1.ASN1Util=new function(){this.integerToByteHex=function(a){var b=a.toString(16);return b.length%2==1&&(b="0"+b),b},this.bigIntToMinTwosComplementsHex=function(t){var e=t.toString(16);if("-"!=e.substr(0,1))e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var r=e.substr(1).length;r%2==1?r+=1:e.match(/^[0-7]/)||(r+=2);for(var g="",n=0;n<r;n++)g+="f";e=new A(g,16).xor(t).add(A.ONE).toString(16).replace(/^-/,"")}return e},this.getPEMStringFromHex=function(a,b){return jt(a,b)},this.newObject=function(t){var e=gt.asn1,r=e.ASN1Object,n=e.DERBoolean,o=e.DERInteger,h=e.DERBitString,c=e.DEROctetString,l=e.DERNull,f=e.DERObjectIdentifier,d=e.DEREnumerated,g=e.DERUTF8String,y=e.DERNumericString,v=e.DERPrintableString,m=e.DERTeletexString,q=e.DERIA5String,x=e.DERUTCTime,S=e.DERGeneralizedTime,b=e.DERVisibleString,w=e.DERBMPString,E=e.DERSequence,F=e.DERSet,s=e.DERTaggedObject,p=e.ASN1Util.newObject;if(t instanceof e.ASN1Object)return t;var u=Object.keys(t);if(1!=u.length)throw new Error("key of param shall be only one.");var A=u[0];if(-1==":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+A+":"))throw new Error("undefined key: "+A);if("bool"==A)return new n(t[A]);if("int"==A)return new o(t[A]);if("bitstr"==A)return new h(t[A]);if("octstr"==A)return new c(t[A]);if("null"==A)return new l(t[A]);if("oid"==A)return new f(t[A]);if("enum"==A)return new d(t[A]);if("utf8str"==A)return new g(t[A]);if("numstr"==A)return new y(t[A]);if("prnstr"==A)return new v(t[A]);if("telstr"==A)return new m(t[A]);if("ia5str"==A)return new q(t[A]);if("utctime"==A)return new x(t[A]);if("gentime"==A)return new S(t[A]);if("visstr"==A)return new b(t[A]);if("bmpstr"==A)return new w(t[A]);if("asn1"==A)return new r(t[A]);if("seq"==A){for(var P=t[A],D=[],I=0;I<P.length;I++){var C=p(P[I]);D.push(C)}return new E({array:D})}if("set"==A){for(P=t[A],D=[],I=0;I<P.length;I++){C=p(P[I]);D.push(C)}return new F({array:D})}if("tag"==A){var R=t[A];if("[object Array]"===Object.prototype.toString.call(R)&&3==R.length){var T=p(R[2]);return new s({tag:R[0],explicit:R[1],obj:T})}return new s(R)}},this.jsonToASN1HEX=function(b){return this.newObject(b).tohex()}},gt.asn1.ASN1Util.oidHexToInt=function(a){for(var t="",e=parseInt(a.substr(0,2),16),r=(t=Math.floor(e/40)+"."+e%40,""),n=2;n<a.length;n+=2){var o=("00000000"+parseInt(a.substr(n,2),16).toString(2)).slice(-8);if(r+=o.substr(1,7),"0"==o.substr(0,1))t=t+"."+new A(r,2).toString(10),r=""}return t},gt.asn1.ASN1Util.oidIntToHex=function(t){var e=function(a){var t=a.toString(16);return 1==t.length&&(t="0"+t),t},r=function(t){var r="",a=new A(t,10).toString(2),n=7-a.length%7;7==n&&(n=0);for(var q="",o=0;o<n;o++)q+="0";a=q+a;for(o=0;o<a.length-1;o+=7){var p=a.substr(o,7);o!=a.length-7&&(p="1"+p),r+=e(parseInt(p,2))}return r};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var g="",b=t.split("."),n=40*parseInt(b[0])+parseInt(b[1]);g+=e(n),b.splice(0,2);for(var o=0;o<b.length;o++)g+=r(b[o]);return g},gt.asn1.ASN1Object=function(t){this.params=null,this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+"".length+",v="+this.hV);var t=this.hV.length/2,i=t.toString(16);if(i.length%2==1&&(i="0"+i),t<128)return i;var e=i.length/2;if(e>15)throw new Error("ASN.1 length too long to represent by 8x: n = "+t.toString(16));return(128+e).toString(16)+i},this.tohex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.getValueHex=function(){return this.tohex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(g){this.params=g},null!=t&&null!=t.tlv&&(this.hTLV=t.tlv,this.isModified=!1)},gt.asn1.DERAbstractString=function(t){gt.asn1.DERAbstractString.superclass.constructor.call(this);this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=Dt(this.s).toLowerCase()},this.setStringHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?this.setString(t):void 0!==t.str?this.setString(t.str):void 0!==t.hex&&this.setStringHex(t.hex))},re(gt.asn1.DERAbstractString,gt.asn1.ASN1Object),gt.asn1.DERAbstractTime=function(t){gt.asn1.DERAbstractTime.superclass.constructor.call(this);this.localDateToUTC=function(g){var t=g.getTime()+6e4*g.getTimezoneOffset();return new Date(t)},this.formatDate=function(t,e,r){var g=this.zeroPadding,n=this.localDateToUTC(t),p=String(n.getFullYear());"utc"==e&&(p=p.substr(2,2));var o=p+g(String(n.getMonth()+1),2)+g(String(n.getDate()),2)+g(String(n.getHours()),2)+g(String(n.getMinutes()),2)+g(String(n.getSeconds()),2);if(!0===r){var h=n.getMilliseconds();if(0!=h){var c=g(String(h),3);o=o+"."+(c=c.replace(/[0]+$/,""))}}return o+"Z"},this.zeroPadding=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},this.setByParam=function(t){this.hV=null,this.hTLV=null,this.params=t},this.getString=function(){},this.setString=function(t){this.hTLV=null,this.isModified=!0,null==this.params&&(this.params={}),this.params.str=t},this.setByDate=function(t){this.hTLV=null,this.isModified=!0,null==this.params&&(this.params={}),this.params.date=t},this.setByDateValue=function(t,e,r,n,o,g){var i=new Date(Date.UTC(t,e-1,r,n,o,g,0));this.setByDate(i)},this.getFreshValueHex=function(){return this.hV}},re(gt.asn1.DERAbstractTime,gt.asn1.ASN1Object),gt.asn1.DERAbstractStructured=function(b){gt.asn1.DERAbstractString.superclass.constructor.call(this);this.setByASN1ObjectArray=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array=t},this.appendASN1Object=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array.push(t)},this.asn1Array=new Array,void 0!==b&&void 0!==b.array&&(this.asn1Array=b.array)},re(gt.asn1.DERAbstractStructured,gt.asn1.ASN1Object),gt.asn1.DERBoolean=function(a){gt.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=0==a?"010100":"0101ff"},re(gt.asn1.DERBoolean,gt.asn1.ASN1Object),gt.asn1.DERInteger=function(a){gt.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(b){this.hTLV=null,this.isModified=!0,this.hV=gt.asn1.ASN1Util.bigIntToMinTwosComplementsHex(b)},this.setByInteger=function(t){var b=new A(String(t),10);this.setByBigInteger(b)},this.setValueHex=function(b){this.hV=b},this.getFreshValueHex=function(){return this.hV},void 0!==a&&(void 0!==a.bigint?this.setByBigInteger(a.bigint):void 0!==a.int?this.setByInteger(a.int):"number"==typeof a?this.setByInteger(a):void 0!==a.hex&&this.setValueHex(a.hex))},re(gt.asn1.DERInteger,gt.asn1.ASN1Object),gt.asn1.DERBitString=function(b){if(void 0!==b&&void 0!==b.obj){var a=gt.asn1.ASN1Util.newObject(b.obj);b.hex="00"+a.tohex()}gt.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(t){this.hTLV=null,this.isModified=!0,this.hV=t},this.setUnusedBitsAndHexValue=function(t,e){if(t<0||7<t)throw"unused bits shall be from 0 to 7: u = "+t;var r="0"+t;this.hTLV=null,this.isModified=!0,this.hV=r+e},this.setByBinaryString=function(t){var e=8-(t=t.replace(/0+$/,"")).length%8;8==e&&(e=0);for(var g=0;g<=e;g++)t+="0";var r="";for(g=0;g<t.length-1;g+=8){var n=t.substr(g,8),o=parseInt(n,2).toString(16);1==o.length&&(o="0"+o),r+=o}this.hTLV=null,this.isModified=!0,this.hV="0"+e+r},this.setByBooleanArray=function(t){for(var e="",r=0;r<t.length;r++)1==t[r]?e+="1":e+="0";this.setByBinaryString(e)},this.newFalseArray=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=!1;return e},this.getFreshValueHex=function(){return this.hV},void 0!==b&&("string"==typeof b&&b.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(b):void 0!==b.hex?this.setHexValueIncludingUnusedBits(b.hex):void 0!==b.bin?this.setByBinaryString(b.bin):void 0!==b.array&&this.setByBooleanArray(b.array))},re(gt.asn1.DERBitString,gt.asn1.ASN1Object),gt.asn1.DEROctetString=function(b){if(void 0!==b&&void 0!==b.obj){var a=gt.asn1.ASN1Util.newObject(b.obj);b.hex=a.tohex()}gt.asn1.DEROctetString.superclass.constructor.call(this,b),this.hT="04"},re(gt.asn1.DEROctetString,gt.asn1.DERAbstractString),gt.asn1.DERNull=function(){gt.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},re(gt.asn1.DERNull,gt.asn1.ASN1Object),gt.asn1.DERObjectIdentifier=function(a){gt.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(b){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=b},this.setValueOidString=function(b){var t=Xt(b);if(null==t)throw new Error("malformed oid string: "+b);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueName=function(t){var b=gt.asn1.x509.OID.name2oid(t);if(""===b)throw new Error("DERObjectIdentifier oidName undefined: "+t);this.setValueOidString(b)},this.setValueNameOrOid=function(b){b.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(b):this.setValueName(b)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(b){"string"==typeof b?this.setValueNameOrOid(b):void 0!==b.oid?this.setValueNameOrOid(b.oid):void 0!==b.name?this.setValueNameOrOid(b.name):void 0!==b.hex&&this.setValueHex(b.hex)},void 0!==a&&this.setByParam(a)},re(gt.asn1.DERObjectIdentifier,gt.asn1.ASN1Object),gt.asn1.DEREnumerated=function(a){gt.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(b){this.hTLV=null,this.isModified=!0,this.hV=gt.asn1.ASN1Util.bigIntToMinTwosComplementsHex(b)},this.setByInteger=function(t){var b=new A(String(t),10);this.setByBigInteger(b)},this.setValueHex=function(b){this.hV=b},this.getFreshValueHex=function(){return this.hV},void 0!==a&&(void 0!==a.int?this.setByInteger(a.int):"number"==typeof a?this.setByInteger(a):void 0!==a.hex&&this.setValueHex(a.hex))},re(gt.asn1.DEREnumerated,gt.asn1.ASN1Object),gt.asn1.DERUTF8String=function(a){gt.asn1.DERUTF8String.superclass.constructor.call(this,a),this.hT="0c"},re(gt.asn1.DERUTF8String,gt.asn1.DERAbstractString),gt.asn1.DERNumericString=function(a){gt.asn1.DERNumericString.superclass.constructor.call(this,a),this.hT="12"},re(gt.asn1.DERNumericString,gt.asn1.DERAbstractString),gt.asn1.DERPrintableString=function(a){gt.asn1.DERPrintableString.superclass.constructor.call(this,a),this.hT="13"},re(gt.asn1.DERPrintableString,gt.asn1.DERAbstractString),gt.asn1.DERTeletexString=function(a){gt.asn1.DERTeletexString.superclass.constructor.call(this,a),this.hT="14"},re(gt.asn1.DERTeletexString,gt.asn1.DERAbstractString),gt.asn1.DERIA5String=function(a){gt.asn1.DERIA5String.superclass.constructor.call(this,a),this.hT="16"},re(gt.asn1.DERIA5String,gt.asn1.DERAbstractString),gt.asn1.DERVisibleString=function(a){gt.asn1.DERIA5String.superclass.constructor.call(this,a),this.hT="1a"},re(gt.asn1.DERVisibleString,gt.asn1.DERAbstractString),gt.asn1.DERBMPString=function(a){gt.asn1.DERBMPString.superclass.constructor.call(this,a),this.hT="1e"},re(gt.asn1.DERBMPString,gt.asn1.DERAbstractString),gt.asn1.DERUTCTime=function(a){gt.asn1.DERUTCTime.superclass.constructor.call(this,a),this.hT="17",this.params=void 0,this.getFreshValueHex=function(){var t=this.params;if(null==this.params&&(t={date:new Date}),"string"==typeof t){if(!t.match(/^[0-9]{12}Z$/)&&!t.match(/^[0-9]{12}\.[0-9]+Z$/))throw new Error("malformed string for UTCTime: "+t);this.hV=bt(t)}else if(null!=t.str)this.hV=bt(t.str);else if(null==t.date&&1==t.millis){var e=new Date;this.hV=bt(this.formatDate(e,"utc",!0))}else if(null!=t.date&&t.date instanceof Date){var b=!0===t.millis;this.hV=bt(this.formatDate(t.date,"utc",b))}else t instanceof Date&&(this.hV=bt(this.formatDate(t,"utc")));if(null==this.hV)throw new Error("parameter not specified properly for UTCTime");return this.hV},null!=a&&this.setByParam(a)},re(gt.asn1.DERUTCTime,gt.asn1.DERAbstractTime),gt.asn1.DERGeneralizedTime=function(a){gt.asn1.DERGeneralizedTime.superclass.constructor.call(this,a),this.hT="18",this.params=a,this.getFreshValueHex=function(){var t=this.params;if(null==this.params&&(t={date:new Date}),"string"==typeof t){if(!t.match(/^[0-9]{14}Z$/)&&!t.match(/^[0-9]{14}\.[0-9]+Z$/))throw new Error("malformed string for GeneralizedTime: "+t);this.hV=bt(t)}else if(null!=t.str)this.hV=bt(t.str);else if(null==t.date&&1==t.millis){var e=new Date;this.hV=bt(this.formatDate(e,"gen",!0))}else if(null!=t.date&&t.date instanceof Date){var b=!0===t.millis;this.hV=bt(this.formatDate(t.date,"gen",b))}else t instanceof Date&&(this.hV=bt(this.formatDate(t,"gen")));if(null==this.hV)throw new Error("parameter not specified properly for GeneralizedTime");return this.hV},null!=a&&this.setByParam(a)},re(gt.asn1.DERGeneralizedTime,gt.asn1.DERAbstractTime),gt.asn1.DERSequence=function(a){gt.asn1.DERSequence.superclass.constructor.call(this,a),this.hT="30",this.getFreshValueHex=function(){for(var t="",b=0;b<this.asn1Array.length;b++){t+=this.asn1Array[b].tohex()}return this.hV=t,this.hV}},re(gt.asn1.DERSequence,gt.asn1.DERAbstractStructured),gt.asn1.DERSet=function(a){gt.asn1.DERSet.superclass.constructor.call(this,a),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var b=new Array,t=0;t<this.asn1Array.length;t++){var e=this.asn1Array[t];b.push(e.tohex())}return 1==this.sortFlag&&b.sort(),this.hV=b.join(""),this.hV},void 0!==a&&void 0!==a.sortflag&&0==a.sortflag&&(this.sortFlag=!1)},re(gt.asn1.DERSet,gt.asn1.DERAbstractStructured),gt.asn1.DERTaggedObject=function(t){gt.asn1.DERTaggedObject.superclass.constructor.call(this);var e=gt.asn1,r=mt,a=r.getV,b=(r.isASN1HEX,e.ASN1Util.newObject);this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.params={tag:"a0",explicit:!0},this.setASN1Object=function(g,t,i){this.params={tag:t,explicit:g,obj:i}},this.getFreshValueHex=function(){var t=this.params;if(null==t.explicit&&(t.explicit=!0),null!=t.tage&&(t.tag=t.tage,t.explicit=!0),null!=t.tagi&&(t.tag=t.tagi,t.explicit=!1),null!=t.str)this.hV=Dt(t.str);else if(null!=t.hex)this.hV=t.hex;else{if(null==t.obj)throw new Error("str, hex nor obj not specified");var g;t.obj instanceof e.ASN1Object?g=t.obj.tohex():"object"==typeof t.obj&&(g=b(t.obj).tohex()),t.explicit?this.hV=g:this.hV=a(g,0)}return null==t.tag&&(t.tag="a0"),this.hT=t.tag,this.hTLV=null,this.isModified=!0,this.hV},this.setByParam=function(g){this.params=g},void 0!==t&&this.setByParam(t)},re(gt.asn1.DERTaggedObject,gt.asn1.ASN1Object);var gt,yt,vt,mt=new function(){};function xt(t){for(var b=new Array,e=0;e<t.length;e++)b[e]=t.charCodeAt(e);return b}function St(b){for(var t="",e=0;e<b.length;e++)t+=String.fromCharCode(b[e]);return t}function wt(b){for(var t="",e=0;e<b.length;e++){var r=b[e].toString(16);1==r.length&&(r="0"+r),t+=r}return t}function bt(a){return wt(xt(a))}function Et(a){return a=(a=(a=a.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function Ft(a){return a.length%4==2?a+="==":a.length%4==3&&(a+="="),a=(a=a.replace(/-/g,"+")).replace(/_/g,"/")}function At(a){return a.length%2==1&&(a="0"+a),Et(w(a))}function Pt(a){return E(Ft(a))}function Dt(a){return kt(Yt(a)).toLowerCase()}function It(b){try{return decodeURIComponent(Lt(b))}catch(t){return null}}function Ct(a){return It(function(t){for(var e=t.match(/.{1,2}/g),b=[],r=0;r<e.length;r++){var n=parseInt(e[r],16);161<=n&&n<=191?(b.push("c2"),b.push(e[r])):192<=n&&n<=255?(b.push("c3"),b.push((n-64).toString(16))):b.push(e[r])}return b.join("")}(a))}function Rt(t){for(var b="",a=0;a<t.length-1;a+=2)b+=String.fromCharCode(parseInt(t.substr(a,2),16));return b}function Tt(t){for(var a="",b=0;b<t.length;b++)a+=("0"+t.charCodeAt(b).toString(16)).slice(-2);return a}function Bt(a){return w(a)}function Nt(b){var t=Bt(b).replace(/(.{64})/g,"$1\r\n");return t=t.replace(/\r\n$/,"")}function Ot(b){return E(b.replace(/[^0-9A-Za-z\/+=]*/g,""))}function jt(a,b){return"-----BEGIN "+b+"-----\r\n"+Nt(a)+"\r\n-----END "+b+"-----\r\n"}function Ht(a,b){if(-1==a.indexOf("-----BEGIN "))throw"can't find PEM header: "+b;return Ot(a=void 0!==b?(a=a.replace(new RegExp("^[^]*-----BEGIN "+b+"-----"),"")).replace(new RegExp("-----END "+b+"-----[^]*$"),""):(a=a.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function Vt(t){var e,r,n,o,h,i,b,a,c,g,l;if(l=t.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return a=l[1],e=parseInt(a),2===a.length&&(50<=e&&e<100?e=1900+e:0<=e&&e<50&&(e=2e3+e)),r=parseInt(l[2])-1,n=parseInt(l[3]),o=parseInt(l[4]),h=parseInt(l[5]),i=parseInt(l[6]),b=0,""!==(c=l[7])&&(g=(c.substr(1)+"00").substr(0,3),b=parseInt(g)),Date.UTC(e,r,n,o,h,i,b);throw new Error("unsupported zulu format: "+t)}function _t(a){return Math.round(Vt(a)/1e3)}function kt(a){return a.replace(/%/g,"")}function Lt(a){return a.replace(/(..)/g,"%$1")}function Kt(g){var b="malformed IPv6 address";if(!g.match(/^[0-9A-Fa-f:]+$/))throw b;var t=(g=g.toLowerCase()).split(":").length-1;if(t<2)throw b;var e=":".repeat(7-t+2),r=(g=g.replace("::",e)).split(":");if(8!=r.length)throw b;for(var n=0;n<8;n++)r[n]=("0000"+r[n]).slice(-4);return r.join("")}function Mt(t){if(!t.match(/^[0-9A-Fa-f]{32}$/))throw new Error("malformed IPv6 address: "+t);var b=(t=t.toLowerCase()).match(/.{1,4}/g);b=b.map((function(a){return a.replace(/^0+/,"")})),b=b.map((function(a){return""==a?"0":a}));var e=(t=":"+b.join(":")+":").match(/:(0:){2,}/g);if(null==e)return t.slice(1,-1);var r=e.sort().slice(-1)[0];return"::"!=(t=t.replace(r.substr(0,r.length-1),":")).substr(0,2)&&(t=t.substr(1)),"::"!=t.substr(-2,2)&&(t=t.substr(0,t.length-1)),t}function Ut(b){var t=new Error("malformed hex value");if(!b.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw t;if(8==b.length){try{return parseInt(b.substr(0,2),16)+"."+parseInt(b.substr(2,2),16)+"."+parseInt(b.substr(4,2),16)+"."+parseInt(b.substr(6,2),16)}catch(e){throw t}}else{if(16!=b.length){if(32==b.length)return Mt(b);if(64==b.length){try{return Mt(b.substr(0,32))+"/"+qt(b.substr(32))}catch(e){throw t}return}return b}try{return Ut(b.substr(0,8))+"/"+qt(b.substr(8))}catch(e){throw t}}}function qt(t){var a,e=new Error("malformed mask");try{a=new A(t,16).toString(2)}catch(t){throw e}if(!a.match(/^1*0*$/))throw e;return a.replace(/0+$/,"").length}function Gt(g){var t=new Error("malformed IP address");if(!(g=g.toLowerCase(g)).match(/^[0-9a-f.:/]+$/))throw t;if(!g.match(/^[0-9.]+$/)){var e;if(g.match(/^[0-9.]+\/[0-9]+$/))return Gt((e=g.split("/"))[0])+zt(parseInt(e[1]),32);if(g.match(/^[0-9a-f:]+$/)&&-1!==g.indexOf(":"))return Kt(g);if(g.match(/^[0-9a-f:]+\/[0-9]+$/)&&-1!==g.indexOf(":"))return Kt((e=g.split("/"))[0])+zt(parseInt(e[1]),128);throw t}var b=g.split(".");if(4!==b.length)throw t;var r="";try{for(var n=0;n<4;n++){r+=("0"+parseInt(b[n]).toString(16)).slice(-2)}return r}catch(e){throw t}}function zt(t,e){return 32==e&&0==t?"00000000":128==e&&0==t?"00000000000000000000000000000000":new A(Array(t+1).join("1")+Array(e-t+1).join("0"),2).toString(16)}function Wt(t){var b=t.match(/.{4}/g).map((function(t){var e=parseInt(t.substr(0,2),16),a=parseInt(t.substr(2),16);if(0==e&a<128)return String.fromCharCode(a);if(e<8){var i=128|63&a;return It((192|(7&e)<<3|(192&a)>>6).toString(16)+i.toString(16))}i=128|(15&e)<<2|(192&a)>>6;var g=128|63&a;return It((224|(240&e)>>4).toString(16)+i.toString(16)+g.toString(16))}));return b.join("")}function Yt(a){for(var t=encodeURIComponent(a),b="",e=0;e<t.length;e++)"%"==t[e]?(b+=t.substr(e,3),e+=2):b=b+"%"+bt(t[e]);return b}function Jt(a){return!(a.length%2!=0||!a.match(/^[0-9a-f]+$/)&&!a.match(/^[0-9A-F]+$/))}function $t(a){return a.length%2==1?"0"+a:a.substr(0,1)>"7"?"00"+a:a}mt.getLblen=function(t,a){if("8"!=t.substr(a+2,1))return 1;var b=parseInt(t.substr(a+3,1));return 0==b?-1:0<b&&b<10?b+1:-2},mt.getL=function(t,b){var a=mt.getLblen(t,b);return a<1?"":t.substr(b+2,2*a)},mt.getVblen=function(t,a){var e;return""==(e=mt.getL(t,a))?-1:("8"===e.substr(0,1)?new A(e.substr(2),16):new A(e,16)).intValue()},mt.getVidx=function(t,b){var a=mt.getLblen(t,b);return a<0?a:b+2*(a+1)},mt.getV=function(t,a){var e=mt.getVidx(t,a),b=mt.getVblen(t,a);return t.substr(e,2*b)},mt.getTLV=function(b,a){return b.substr(a,2)+mt.getL(b,a)+mt.getV(b,a)},mt.getTLVblen=function(b,a){return 2+2*mt.getLblen(b,a)+2*mt.getVblen(b,a)},mt.getNextSiblingIdx=function(t,a){return mt.getVidx(t,a)+2*mt.getVblen(t,a)},mt.getChildIdx=function(t,e){var r,n,g,o=mt,h=[];r=o.getVidx(t,e),n=2*o.getVblen(t,e),"03"==t.substr(e,2)&&(r+=2,n-=2),g=0;for(var c=r;g<=n;){var b=o.getTLVblen(t,c);if((g+=b)<=n&&h.push(c),c+=b,g>=n)break}return h},mt.getNthChildIdx=function(t,b,e){return mt.getChildIdx(t,b)[e]},mt.getIdxbyList=function(t,e,r,i){var n,b,g=mt;return 0==r.length?void 0!==i&&t.substr(e,2)!==i?-1:e:(n=r.shift())>=(b=g.getChildIdx(t,e)).length?-1:g.getIdxbyList(t,b[n],r,i)},mt.getIdxbyListEx=function(t,e,b,g){var r,n,o=mt;if(0==b.length)return void 0!==g&&t.substr(e,2)!==g?-1:e;r=b.shift(),n=o.getChildIdx(t,e);for(var h=0,c=0;c<n.length;c++){var l=t.substr(n[c],2);if("number"==typeof r&&!o.isContextTag(l)&&h==r||"string"==typeof r&&o.isContextTag(l,r))return o.getIdxbyListEx(t,n[c],b,g);o.isContextTag(l)||h++}return-1},mt.getTLVbyList=function(t,e,b,r){var n=mt,a=n.getIdxbyList(t,e,b,r);return-1==a||a>=t.length?null:n.getTLV(t,a)},mt.getTLVbyListEx=function(t,e,b,r){var n=mt,a=n.getIdxbyListEx(t,e,b,r);return-1==a?null:n.getTLV(t,a)},mt.getVbyList=function(t,e,b,g,i){var a,r,n=mt;return-1==(a=n.getIdxbyList(t,e,b,g))||a>=t.length?null:(r=n.getV(t,a),!0===i&&(r=r.substr(2)),r)},mt.getVbyListEx=function(b,t,a,e,r){var g,i,n=mt;return-1==(g=n.getIdxbyListEx(b,t,a,e))?null:(i=n.getV(b,g),"03"==b.substr(g,2)&&!1!==r&&(i=i.substr(2)),i)},mt.getInt=function(t,b,e){null==e&&(e=-1);try{var r=t.substr(b,2);if("02"!=r&&"03"!=r)return e;var a=mt.getV(t,b);return"02"==r?parseInt(a,16):te(a)}catch(t){return e}},mt.getOID=function(t,a,e){null==e&&(e=null);try{return"06"!=t.substr(a,2)?e:Zt(mt.getV(t,a))}catch(t){return e}},mt.getOIDName=function(t,a,e){null==e&&(e=null);try{var r=mt.getOID(t,a,e);if(r==e)return e;var b=gt.asn1.x509.OID.oid2name(r);return""==b?r:b}catch(t){return e}},mt.getString=function(t,b,e){null==e&&(e=null);try{return Rt(mt.getV(t,b))}catch(t){return e}},mt.hextooidstr=function(t){var e=function(b,a){return b.length>=a?b:new Array(a-b.length+1).join("0")+b},r=[],n=t.substr(0,2),o=parseInt(n,16);r[0]=new String(Math.floor(o/40)),r[1]=new String(o%40);for(var h=t.substr(2),c=[],g=0;g<h.length/2;g++)c.push(parseInt(h.substr(2*g,2),16));var l=[],f="";for(g=0;g<c.length;g++)128&c[g]?f+=e((127&c[g]).toString(2),7):(f+=e((127&c[g]).toString(2),7),l.push(new String(parseInt(f,2))),f="");var d=r.join(".");return l.length>0&&(d=d+"."+l.join(".")),d},mt.dump=function(t,e,r,g){var p=mt,n=p.getV,o=p.dump,h=p.getChildIdx,c=t;t instanceof gt.asn1.ASN1Object&&(c=t.tohex());var q=function(t,i){return t.length<=2*i?t:t.substr(0,i)+"..(total "+t.length/2+"bytes).."+t.substr(t.length-i,i)};void 0===e&&(e={ommit_long_octet:32}),void 0===r&&(r=0),void 0===g&&(g="");var l,f=e.ommit_long_octet;if("01"==(l=c.substr(r,2)))return"00"==(d=n(c,r))?g+"BOOLEAN FALSE\n":g+"BOOLEAN TRUE\n";if("02"==l)return g+"INTEGER "+q(d=n(c,r),f)+"\n";if("03"==l){var d=n(c,r);if(p.isASN1HEX(d.substr(2))){var y=g+"BITSTRING, encapsulates\n";return y+=o(d.substr(2),e,0,g+"  ")}return g+"BITSTRING "+q(d,f)+"\n"}if("04"==l){d=n(c,r);if(p.isASN1HEX(d)){y=g+"OCTETSTRING, encapsulates\n";return y+=o(d,e,0,g+"  ")}return g+"OCTETSTRING "+q(d,f)+"\n"}if("05"==l)return g+"NULL\n";if("06"==l){var v=n(c,r),b=gt.asn1.ASN1Util.oidHexToInt(v),m=gt.asn1.x509.OID.oid2name(b),a=b.replace(/\./g," ");return""!=m?g+"ObjectIdentifier "+m+" ("+a+")\n":g+"ObjectIdentifier ("+a+")\n"}if("0a"==l)return g+"ENUMERATED "+parseInt(n(c,r))+"\n";if("0c"==l)return g+"UTF8String '"+It(n(c,r))+"'\n";if("13"==l)return g+"PrintableString '"+It(n(c,r))+"'\n";if("14"==l)return g+"TeletexString '"+It(n(c,r))+"'\n";if("16"==l)return g+"IA5String '"+It(n(c,r))+"'\n";if("17"==l)return g+"UTCTime "+It(n(c,r))+"\n";if("18"==l)return g+"GeneralizedTime "+It(n(c,r))+"\n";if("1a"==l)return g+"VisualString '"+It(n(c,r))+"'\n";if("1e"==l)return g+"BMPString '"+Wt(n(c,r))+"'\n";if("30"==l){if("3000"==c.substr(r,4))return g+"SEQUENCE {}\n";y=g+"SEQUENCE\n";var x=e;if((2==(w=h(c,r)).length||3==w.length)&&"06"==c.substr(w[0],2)&&"04"==c.substr(w[w.length-1],2)){m=p.oidname(n(c,w[0]));var S=JSON.parse(JSON.stringify(e));S.x509ExtName=m,x=S}for(var u=0;u<w.length;u++)y+=o(c,x,w[u],g+"  ");return y}if("31"==l){y=g+"SET\n";var w=h(c,r);for(u=0;u<w.length;u++)y+=o(c,e,w[u],g+"  ");return y}if(0!=(128&(l=parseInt(l,16)))){var E=31&l;if(0!=(32&l)){for(y=g+"["+E+"]\n",w=h(c,r),u=0;u<w.length;u++)y+=o(c,e,w[u],g+"  ");return y}d=n(c,r);if(mt.isASN1HEX(d)){var y=g+"["+E+"]\n";return y+=o(d,e,0,g+"  ")}return("68747470"==d.substr(0,8)||"subjectAltName"===e.x509ExtName&&2==E)&&(d=It(d)),y=g+"["+E+"] "+d+"\n"}return g+"UNKNOWN("+l+") "+n(c,r)+"\n"},mt.parse=function(t){var e=mt,r=e.parse,a=e.isASN1HEX,n=e.getV,b=e.getTLV,o=e.getChildIdx,i=gt.asn1,h=i.ASN1Util.oidHexToInt,c=i.x509.OID.oid2name,l=It,f=Wt,q=Ct,d={"0c":"utf8str",12:"numstr",13:"prnstr",14:"telstr",16:"ia5str",17:"utctime",18:"gentime","1a":"visstr","1e":"bmpstr",30:"seq",31:"set"},y=t.substr(0,2),v={},p=n(t,0);if("01"==y)return"0101ff"==t?{bool:!0}:{bool:!1};if("02"==y)return{int:{hex:p}};if("03"==y)try{if("00"!=p.substr(0,2))throw"not encap";var m=p.substr(2);if(!a(m))throw"not encap";return{bitstr:{obj:r(m)}}}catch(t){var x=null;return p.length<=6&&(x=function(a){var b=te(a);if(-1==b)return null;return b.toString(2)}(p)),null==x?{bitstr:{hex:p}}:{bitstr:{bin:x}}}else if("04"==y)try{if(!a(p))throw"not encap";return{octstr:{obj:r(p)}}}catch(t){return{octstr:{hex:p}}}else{if("05"==y)return{null:""};if("06"==y){var g=h(p),S=c(g);return""==S?{oid:g}:{oid:S}}if("0a"==y)return p.length>4?{enum:{hex:p}}:{enum:parseInt(p,16)};if("30"==y||"31"==y)return v[d[y]]=function(t){for(var e=[],n=o(t,0),h=0;h<n.length;h++){var s=n[h],c=b(t,s),l=r(c);e.push(l)}return e}(t),v;if("14"==y){var w=q(p);return v[d[y]]={str:w},v}if("1e"==y){w=f(p);return v[d[y]]={str:w},v}if(-1!=":0c:12:13:16:17:18:1a:".indexOf(y)){w=l(p);return v[d[y]]={str:w},v}if(y.match(/^8[0-9]$/))return null==(w=l(p))|""==w||null!=w.match(/[\x00-\x1F\x7F-\x9F]/)||null!=w.match(/[\u0000-\u001F\u0080\u009F]/)?{tag:{tag:y,explicit:!1,hex:p}}:{tag:{tag:y,explicit:!1,str:w}};if(!y.match(/^a[0-9]$/)){var E=new gt.asn1.ASN1Object;return E.hV=p,{asn1:{tlv:y+E.getLengthHexFromValue()+p}}}try{if(!a(p))throw new Error("not encap");return{tag:{tag:y,explicit:!0,obj:r(p)}}}catch(t){return{tag:{tag:y,explicit:!0,hex:p}}}}},mt.isContextTag=function(t,b){var e,r;t=t.toLowerCase();try{e=parseInt(t,16)}catch(t){return-1}if(void 0===b)return 128==(192&e);try{return null!=b.match(/^\[[0-9]+\]$/)&&(!((r=parseInt(b.substr(1,b.length-1),10))>31)&&(128==(192&e)&&(31&e)==r))}catch(t){return!1}},mt.isASN1HEX=function(t){var e=mt;if(t.length%2==1)return!1;var r=e.getVblen(t,0),b=t.substr(0,2),n=e.getL(t,0);return t.length-b.length-n.length==2*r},mt.checkStrictDER=function(g,t,e,r,n){var s=mt;if(void 0===e){if("string"!=typeof g)throw new Error("not hex string");if(g=g.toLowerCase(),!gt.lang.String.isHex(g))throw new Error("not hex string");e=g.length,n=(r=g.length/2)<128?1:Math.ceil(r.toString(16))+1}if(s.getL(g,t).length>2*n)throw new Error("L of TLV too long: idx="+t);var o=s.getVblen(g,t);if(o>r)throw new Error("value of L too long than hex: idx="+t);var q=s.getTLV(g,t),h=q.length-2-s.getL(g,t).length;if(h!==2*o)throw new Error("V string length and L's value not the same:"+h+"/"+2*o);if(0===t&&g.length!=q.length)throw new Error("total length and TLV length unmatch:"+g.length+"!="+q.length);var b=g.substr(t,2);if("02"===b){var a=s.getVidx(g,t);if("00"==g.substr(a,2)&&g.charCodeAt(a+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(b,16)){for(var p=s.getVblen(g,t),c=0,l=s.getChildIdx(g,t),f=0;f<l.length;f++){c+=s.getTLV(g,l[f]).length,s.checkStrictDER(g,l[f],e,r,n)}if(2*p!=c)throw new Error("sum of children's TLV length and L unmatch: "+2*p+"!="+c)}},mt.oidname=function(a){var t=gt.asn1;gt.lang.String.isHex(a)&&(a=t.ASN1Util.oidHexToInt(a));var b=t.x509.OID.oid2name(a);return""===b&&(b=a),b},void 0!==gt&&gt||(gt={}),void 0!==gt.asn1&&gt.asn1||(gt.asn1={}),void 0!==gt.asn1.x509&&gt.asn1.x509||(gt.asn1.x509={}),gt.asn1.x509.Certificate=function(t){gt.asn1.x509.Certificate.superclass.constructor.call(this);var e=gt.asn1,r=e.DERBitString,b=e.DERSequence,g=e.x509,a=g.TBSCertificate,n=g.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(i){this.params=i},this.sign=function(){var t=this.params,e=t.sigalg;null!=t.sigalg.name&&(e=t.sigalg.name);var i=t.tbsobj.tohex(),r=new gt.crypto.Signature({alg:e});r.init(t.cakey),r.updateHex(i),t.sighex=r.sign()},this.getPEM=function(){return jt(this.tohex(),"CERTIFICATE")},this.tohex=function(){var t=this.params;if(null!=t.tbsobj&&null!=t.tbsobj||(t.tbsobj=new a(t)),null==t.sighex&&null!=t.cakey&&this.sign(),null==t.sighex)throw new Error("sighex or cakey parameter not defined");var i=[];return i.push(t.tbsobj),i.push(new n({name:t.sigalg})),i.push(new r({hex:"00"+t.sighex})),new b({array:i}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&(this.params=t)},re(gt.asn1.x509.Certificate,gt.asn1.ASN1Object),gt.asn1.x509.TBSCertificate=function(t){gt.asn1.x509.TBSCertificate.superclass.constructor.call(this);var i=gt.asn1,e=i.x509,r=i.DERTaggedObject,n=i.DERInteger,g=i.DERSequence,o=e.AlgorithmIdentifier,h=e.Time,a=e.X500Name,c=e.Extensions,l=e.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(t){this.params=t},this.tohex=function(){var t=[],q=this.params;if(null!=q.version||1!=q.version){var e=2;null!=q.version&&(e=q.version-1);var p=new r({obj:new n({int:e})});t.push(p)}return t.push(new n(q.serial)),t.push(new o({name:q.sigalg})),t.push(new a(q.issuer)),t.push(new g({array:[new h(q.notbefore),new h(q.notafter)]})),t.push(new a(q.subject)),t.push(new l(ne.getKey(q.sbjpubkey))),void 0!==q.ext&&q.ext.length>0&&t.push(new r({tag:"a3",obj:new c(q.ext)})),new gt.asn1.DERSequence({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},re(gt.asn1.x509.TBSCertificate,gt.asn1.ASN1Object),gt.asn1.x509.Extensions=function(t){gt.asn1.x509.Extensions.superclass.constructor.call(this);var b=gt.asn1,a=b.DERSequence,e=b.x509;this.aParam=[],this.setByParam=function(t){this.aParam=t},this.tohex=function(){for(var t=[],r=0;r<this.aParam.length;r++){var n=this.aParam[r],o=n.extname,h=null;if(null!=n.extn)h=new e.PrivateExtension(n);else if("subjectKeyIdentifier"==o)h=new e.SubjectKeyIdentifier(n);else if("keyUsage"==o)h=new e.KeyUsage(n);else if("subjectAltName"==o)h=new e.SubjectAltName(n);else if("issuerAltName"==o)h=new e.IssuerAltName(n);else if("basicConstraints"==o)h=new e.BasicConstraints(n);else if("nameConstraints"==o)h=new e.NameConstraints(n);else if("cRLDistributionPoints"==o)h=new e.CRLDistributionPoints(n);else if("certificatePolicies"==o)h=new e.CertificatePolicies(n);else if("authorityKeyIdentifier"==o)h=new e.AuthorityKeyIdentifier(n);else if("extKeyUsage"==o)h=new e.ExtKeyUsage(n);else if("authorityInfoAccess"==o)h=new e.AuthorityInfoAccess(n);else if("cRLNumber"==o)h=new e.CRLNumber(n);else if("cRLReason"==o)h=new e.CRLReason(n);else if("ocspNonce"==o)h=new e.OCSPNonce(n);else if("ocspNoCheck"==o)h=new e.OCSPNoCheck(n);else if("adobeTimeStamp"==o)h=new e.AdobeTimeStamp(n);else{if("subjectDirectoryAttributes"!=o)throw new Error("extension not supported:"+JSON.stringify(n));h=new e.SubjectDirectoryAttributes(n)}null!=h&&t.push(h)}return new a({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},re(gt.asn1.x509.Extensions,gt.asn1.ASN1Object),gt.asn1.x509.Extension=function(t){gt.asn1.x509.Extension.superclass.constructor.call(this);var e=gt.asn1,r=e.DERObjectIdentifier,i=e.DEROctetString,g=(e.DERBitString,e.DERBoolean),n=e.DERSequence;this.tohex=function(){var t=new r({oid:this.oid}),e=new i({hex:this.getExtnValueHex()}),o=new Array;return o.push(t),this.critical&&o.push(new g),o.push(e),new n({array:o}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.critical=!1,void 0!==t&&void 0!==t.critical&&(this.critical=t.critical)},re(gt.asn1.x509.Extension,gt.asn1.ASN1Object),gt.asn1.x509.KeyUsage=function(t){gt.asn1.x509.KeyUsage.superclass.constructor.call(this,t);var a=oe.KEYUSAGE_NAME;if(this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.15",void 0!==t&&(void 0!==t.bin&&(this.asn1ExtnValue=new gt.asn1.DERBitString(t)),void 0!==t.names&&void 0!==t.names.length)){for(var e=t.names,r="000000000",n=0;n<e.length;n++)for(var b=0;b<a.length;b++)e[n]===a[b]&&(r=r.substring(0,b)+"1"+r.substring(b+1,r.length));this.asn1ExtnValue=new gt.asn1.DERBitString({bin:r})}},re(gt.asn1.x509.KeyUsage,gt.asn1.x509.Extension),gt.asn1.x509.BasicConstraints=function(g){gt.asn1.x509.BasicConstraints.superclass.constructor.call(this,g);var t=gt.asn1,e=t.DERBoolean,r=t.DERInteger,b=t.DERSequence;this.getExtnValueHex=function(){var i=new Array;this.cA&&i.push(new e),this.pathLen>-1&&i.push(new r({int:this.pathLen}));var t=new b({array:i});return this.asn1ExtnValue=t,this.asn1ExtnValue.tohex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,void 0!==g&&(void 0!==g.cA&&(this.cA=g.cA),void 0!==g.pathLen&&(this.pathLen=g.pathLen))},re(gt.asn1.x509.BasicConstraints,gt.asn1.x509.Extension),gt.asn1.x509.CRLDistributionPoints=function(t){gt.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,t);var a=gt.asn1,e=a.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.setByDPArray=function(t){for(var r=[],g=0;g<t.length;g++)if(t[g]instanceof gt.asn1.ASN1Object)r.push(t[g]);else{var n=new e.DistributionPoint(t[g]);r.push(n)}this.asn1ExtnValue=new a.DERSequence({array:r})},this.setByOneURI=function(t){var r=new e.DistributionPoint({fulluri:t});this.setByDPArray([r])},this.oid="2.5.29.31",void 0!==t&&(void 0!==t.array?this.setByDPArray(t.array):void 0!==t.uri&&this.setByOneURI(t.uri))},re(gt.asn1.x509.CRLDistributionPoints,gt.asn1.x509.Extension),gt.asn1.x509.DistributionPoint=function(t){gt.asn1.x509.DistributionPoint.superclass.constructor.call(this);var b=gt.asn1,e=b.x509.DistributionPointName;this.tohex=function(){var t=new b.DERSequence;if(null!=this.asn1DP){var g=new b.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});t.appendASN1Object(g)}return this.hTLV=t.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&(void 0!==t.dpobj?this.asn1DP=t.dpobj:void 0!==t.dpname?this.asn1DP=new e(t.dpname):void 0!==t.fulluri&&(this.asn1DP=new e({full:[{uri:t.fulluri}]})))},re(gt.asn1.x509.DistributionPoint,gt.asn1.ASN1Object),gt.asn1.x509.DistributionPointName=function(t){gt.asn1.x509.DistributionPointName.superclass.constructor.call(this);var b=gt.asn1,e=b.DERTaggedObject;if(this.tohex=function(){if("full"!=this.type)throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new e({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t)if(b.x509.GeneralNames.prototype.isPrototypeOf(t))this.type="full",this.tag="a0",this.asn1V=t;else{if(void 0===t.full)throw new Error("This class supports GeneralNames only as argument");this.type="full",this.tag="a0",this.asn1V=new b.x509.GeneralNames(t.full)}},re(gt.asn1.x509.DistributionPointName,gt.asn1.ASN1Object),gt.asn1.x509.CertificatePolicies=function(t){gt.asn1.x509.CertificatePolicies.superclass.constructor.call(this,t);var b=gt.asn1,e=b.x509,a=b.DERSequence,r=e.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var t=[],e=0;e<this.params.array.length;e++)t.push(new r(this.params.array[e]));var g=new a({array:t});return this.asn1ExtnValue=g,this.asn1ExtnValue.tohex()},this.oid="2.5.29.32",void 0!==t&&(this.params=t)},re(gt.asn1.x509.CertificatePolicies,gt.asn1.x509.Extension),gt.asn1.x509.PolicyInformation=function(t){gt.asn1.x509.PolicyInformation.superclass.constructor.call(this,t);var e=gt.asn1,b=e.DERSequence,r=e.DERObjectIdentifier,a=e.x509.PolicyQualifierInfo;this.params=null,this.tohex=function(){if(void 0===this.params.policyoid&&void 0===this.params.array)throw new Error("parameter oid and array missing");var t=[new r(this.params.policyoid)];if(void 0!==this.params.array){for(var e=[],n=0;n<this.params.array.length;n++)e.push(new a(this.params.array[n]));e.length>0&&t.push(new b({array:e}))}return new b({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&(this.params=t)},re(gt.asn1.x509.PolicyInformation,gt.asn1.ASN1Object),gt.asn1.x509.PolicyQualifierInfo=function(t){gt.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,t);var e=gt.asn1,b=e.DERSequence,r=e.DERIA5String,n=e.DERObjectIdentifier,a=e.x509.UserNotice;this.params=null,this.tohex=function(){return void 0!==this.params.cps?new b({array:[new n({oid:"1.3.6.1.5.5.7.2.1"}),new r({str:this.params.cps})]}).tohex():null!=this.params.unotice?new b({array:[new n({oid:"1.3.6.1.5.5.7.2.2"}),new a(this.params.unotice)]}).tohex():void 0},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&(this.params=t)},re(gt.asn1.x509.PolicyQualifierInfo,gt.asn1.ASN1Object),gt.asn1.x509.UserNotice=function(t){gt.asn1.x509.UserNotice.superclass.constructor.call(this,t);var a=gt.asn1.DERSequence,e=(gt.asn1.DERInteger,gt.asn1.x509.DisplayText),b=gt.asn1.x509.NoticeReference;this.params=null,this.tohex=function(){var t=[];return void 0!==this.params.noticeref&&t.push(new b(this.params.noticeref)),void 0!==this.params.exptext&&t.push(new e(this.params.exptext)),new a({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&(this.params=t)},re(gt.asn1.x509.UserNotice,gt.asn1.ASN1Object),gt.asn1.x509.NoticeReference=function(t){gt.asn1.x509.NoticeReference.superclass.constructor.call(this,t);var a=gt.asn1.DERSequence,e=gt.asn1.DERInteger,b=gt.asn1.x509.DisplayText;this.params=null,this.tohex=function(){var t=[];if(void 0!==this.params.org&&t.push(new b(this.params.org)),void 0!==this.params.noticenum){for(var r=[],n=this.params.noticenum,o=0;o<n.length;o++)r.push(new e(n[o]));t.push(new a({array:r}))}if(0==t.length)throw new Error("parameter is empty");return new a({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&(this.params=t)},re(gt.asn1.x509.NoticeReference,gt.asn1.ASN1Object),gt.asn1.x509.DisplayText=function(a){gt.asn1.x509.DisplayText.superclass.constructor.call(this,a),this.hT="0c",void 0!==a&&("ia5"===a.type?this.hT="16":"vis"===a.type?this.hT="1a":"bmp"===a.type&&(this.hT="1e"))},re(gt.asn1.x509.DisplayText,gt.asn1.DERAbstractString),gt.asn1.x509.NameConstraints=function(t){gt.asn1.x509.NameConstraints.superclass.constructor.call(this,t);var b=gt.asn1,e=b.x509,a=b.ASN1Util.newObject,r=e.GeneralSubtree;this.params=null,this.getExtnValueHex=function(){var t=this.params,g=[];if(null!=t.permit&&null!=t.permit.length){for(var e=[],n=0;n<t.permit.length;n++)e.push(new r(t.permit[n]));g.push({tag:{tagi:"a0",obj:{seq:e}}})}if(null!=t.exclude&&null!=t.exclude.length){var o=[];for(n=0;n<t.exclude.length;n++)o.push(new r(t.exclude[n]));g.push({tag:{tagi:"a1",obj:{seq:o}}})}return this.asn1ExtnValue=a({seq:g}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.30",void 0!==t&&(this.params=t)},re(gt.asn1.x509.NameConstraints,gt.asn1.x509.Extension),gt.asn1.x509.GeneralSubtree=function(t){gt.asn1.x509.GeneralSubtree.superclass.constructor.call(this);var b=gt.asn1,e=b.x509.GeneralName,a=b.ASN1Util.newObject;this.params=null,this.setByParam=function(t){this.params=t},this.tohex=function(){var t=this.params,r=[new e(t)];return null!=t.min&&r.push({tag:{tagi:"80",obj:{int:t.min}}}),null!=t.max&&r.push({tag:{tagi:"81",obj:{int:t.max}}}),a({seq:r}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},re(gt.asn1.x509.GeneralSubtree,gt.asn1.ASN1Object),gt.asn1.x509.ExtKeyUsage=function(t){gt.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,t);var a=gt.asn1;this.setPurposeArray=function(t){this.asn1ExtnValue=new a.DERSequence;for(var e=0;e<t.length;e++){var r=new a.DERObjectIdentifier(t[e]);this.asn1ExtnValue.appendASN1Object(r)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.37",void 0!==t&&void 0!==t.array&&this.setPurposeArray(t.array)},re(gt.asn1.x509.ExtKeyUsage,gt.asn1.x509.Extension),gt.asn1.x509.AuthorityKeyIdentifier=function(t){gt.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,t);var b=gt,a=b.asn1,e=a.DERTaggedObject,r=a.x509.GeneralNames;b.crypto.Util.isKey;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var t=new Array;this.asn1KID&&t.push(new e({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&t.push(new e({explicit:!1,tag:"a1",obj:new r([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&t.push(new e({explicit:!1,tag:"82",obj:this.asn1CertSN}));var g=new a.DERSequence({array:t});return this.asn1ExtnValue=g,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(i){if(void 0!==i.str||void 0!==i.hex)this.asn1KID=new gt.asn1.DEROctetString(i);else if("object"==typeof i&&gt.crypto.Util.isKey(i)||"string"==typeof i&&-1!=i.indexOf("BEGIN ")){var t=i;"string"==typeof i&&(t=ne.getKey(i));var g=ne.getKeyID(t);this.asn1KID=new gt.asn1.DEROctetString({hex:g})}},this.setCertIssuerByParam=function(g){void 0!==g.str||void 0!==g.ldapstr||void 0!==g.hex||void 0!==g.certsubject||void 0!==g.certissuer?this.asn1CertIssuer=new gt.asn1.x509.X500Name(g):"string"==typeof g&&-1!=g.indexOf("BEGIN ")&&-1!=g.indexOf("CERTIFICATE")&&(this.asn1CertIssuer=new gt.asn1.x509.X500Name({certissuer:g}))},this.setCertSNByParam=function(i){if(void 0!==i.str||void 0!==i.bigint||void 0!==i.hex)this.asn1CertSN=new gt.asn1.DERInteger(i);else if("string"==typeof i&&-1!=i.indexOf("BEGIN ")&&i.indexOf("CERTIFICATE")){var g=new oe;g.readCertPEM(i);var t=g.getSerialNumberHex();this.asn1CertSN=new gt.asn1.DERInteger({hex:t})}},this.oid="2.5.29.35",void 0!==t&&(void 0!==t.kid&&this.setKIDByParam(t.kid),void 0!==t.issuer&&this.setCertIssuerByParam(t.issuer),void 0!==t.sn&&this.setCertSNByParam(t.sn),void 0!==t.issuersn&&"string"==typeof t.issuersn&&-1!=t.issuersn.indexOf("BEGIN ")&&t.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(t.issuersn),this.setCertIssuerByParam(t.issuersn)))},re(gt.asn1.x509.AuthorityKeyIdentifier,gt.asn1.x509.Extension),gt.asn1.x509.SubjectKeyIdentifier=function(t){gt.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,t);var e=gt.asn1.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(g){if(void 0!==g.str||void 0!==g.hex)this.asn1KID=new e(g);else if("object"==typeof g&&gt.crypto.Util.isKey(g)||"string"==typeof g&&-1!=g.indexOf("BEGIN")){var t=g;"string"==typeof g&&(t=ne.getKey(g));var r=ne.getKeyID(t);this.asn1KID=new gt.asn1.DEROctetString({hex:r})}},this.oid="2.5.29.14",void 0!==t&&void 0!==t.kid&&this.setKIDByParam(t.kid)},re(gt.asn1.x509.SubjectKeyIdentifier,gt.asn1.x509.Extension),gt.asn1.x509.AuthorityInfoAccess=function(a){gt.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,a),this.setAccessDescriptionArray=function(t){for(var e=new Array,g=gt.asn1,r=g.DERSequence,n=g.DERObjectIdentifier,o=g.x509.GeneralName,h=0;h<t.length;h++){var c,l=t[h];if(void 0!==l.ocsp)c=new r({array:[new n({oid:"1.3.6.1.5.5.7.48.1"}),new o({uri:l.ocsp})]});else{if(void 0===l.caissuer)throw new Error("unknown AccessMethod parameter: "+JSON.stringify(l));c=new r({array:[new n({oid:"1.3.6.1.5.5.7.48.2"}),new o({uri:l.caissuer})]})}e.push(c)}this.asn1ExtnValue=new r({array:e})},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.1.1",void 0!==a&&void 0!==a.array&&this.setAccessDescriptionArray(a.array)},re(gt.asn1.x509.AuthorityInfoAccess,gt.asn1.x509.Extension),gt.asn1.x509.SubjectAltName=function(a){gt.asn1.x509.SubjectAltName.superclass.constructor.call(this,a),this.setNameArray=function(b){this.asn1ExtnValue=new gt.asn1.x509.GeneralNames(b)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.17",void 0!==a&&void 0!==a.array&&this.setNameArray(a.array)},re(gt.asn1.x509.SubjectAltName,gt.asn1.x509.Extension),gt.asn1.x509.IssuerAltName=function(a){gt.asn1.x509.IssuerAltName.superclass.constructor.call(this,a),this.setNameArray=function(b){this.asn1ExtnValue=new gt.asn1.x509.GeneralNames(b)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.18",void 0!==a&&void 0!==a.array&&this.setNameArray(a.array)},re(gt.asn1.x509.IssuerAltName,gt.asn1.x509.Extension),gt.asn1.x509.SubjectDirectoryAttributes=function(t){gt.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,t);var e=gt.asn1,a=e.DERSequence,b=e.ASN1Util.newObject,r=e.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var t=[],e=0;e<this.params.array.length;e++){var n=this.params.array[e],o={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if("dateOfBirth"==n.attr)o.seq[0].oid=r(n.attr),o.seq[1].set[0]={gentime:n.str};else if("placeOfBirth"==n.attr)o.seq[0].oid=r(n.attr),o.seq[1].set[0]={utf8str:n.str};else if("gender"==n.attr)o.seq[0].oid=r(n.attr),o.seq[1].set[0]={prnstr:n.str};else if("countryOfCitizenship"==n.attr)o.seq[0].oid=r(n.attr),o.seq[1].set[0]={prnstr:n.str};else{if("countryOfResidence"!=n.attr)throw new Error("unsupported attribute: "+n.attr);o.seq[0].oid=r(n.attr),o.seq[1].set[0]={prnstr:n.str}}t.push(new b(o))}var g=new a({array:t});return this.asn1ExtnValue=g,this.asn1ExtnValue.tohex()},this.oid="2.5.29.9",void 0!==t&&(this.params=t)},re(gt.asn1.x509.SubjectDirectoryAttributes,gt.asn1.x509.Extension),gt.asn1.x509.PrivateExtension=function(t){gt.asn1.x509.PrivateExtension.superclass.constructor.call(this,t);var e=gt,r=e.lang.String.isHex,b=e.asn1,n=b.x509.OID.name2oid,a=b.ASN1Util.newObject;this.params=null,this.setByParam=function(g){this.oid=n(g.extname),this.params=g},this.getExtnValueHex=function(){if(null==this.params.extname||null==this.params.extn)throw new Error("extname or extnhex not specified");var t=this.params.extn;if("string"==typeof t&&r(t))return t;if("object"==typeof t)try{return a(t).tohex()}catch(t){}throw new Error("unsupported extn value")},null!=t&&this.setByParam(t)},re(gt.asn1.x509.PrivateExtension,gt.asn1.x509.Extension),gt.asn1.x509.CRL=function(g){gt.asn1.x509.CRL.superclass.constructor.call(this);var b=gt.asn1,a=b.DERSequence,t=b.DERBitString,e=b.x509,r=e.AlgorithmIdentifier,n=e.TBSCertList;this.params=void 0,this.setByParam=function(i){this.params=i},this.sign=function(){var t=new n(this.params).tohex(),e=new gt.crypto.Signature({alg:this.params.sigalg});e.init(this.params.cakey),e.updateHex(t);var i=e.sign();this.params.sighex=i},this.getPEM=function(){return jt(this.tohex(),"X509 CRL")},this.tohex=function(){var e=this.params;if(null==e.tbsobj&&(e.tbsobj=new n(e)),null==e.sighex&&null!=e.cakey&&this.sign(),null==e.sighex)throw new Error("sighex or cakey parameter not defined");var i=[];return i.push(e.tbsobj),i.push(new r({name:e.sigalg})),i.push(new t({hex:"00"+e.sighex})),new a({array:i}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=g&&(this.params=g)},re(gt.asn1.x509.CRL,gt.asn1.ASN1Object),gt.asn1.x509.TBSCertList=function(t){gt.asn1.x509.TBSCertList.superclass.constructor.call(this);var i=gt.asn1,e=i.DERInteger,g=i.DERSequence,r=i.DERTaggedObject,n=(i.DERObjectIdentifier,i.x509),o=n.AlgorithmIdentifier,h=n.Time,c=n.Extensions,a=n.X500Name;this.params=null,this.setByParam=function(t){this.params=t},this.getRevCertSequence=function(){for(var t=[],r=this.params.revcert,n=0;n<r.length;n++){var p=[new e(r[n].sn),new h(r[n].date)];null!=r[n].ext&&p.push(new c(r[n].ext)),t.push(new g({array:p}))}return new g({array:t})},this.tohex=function(){var t=[],n=this.params;if(null!=n.version){var l=n.version-1,p=new e({int:l});t.push(p)}if(t.push(new o({name:n.sigalg})),t.push(new a(n.issuer)),t.push(new h(n.thisupdate)),null!=n.nextupdate&&t.push(new h(n.nextupdate)),null!=n.revcert&&t.push(this.getRevCertSequence()),null!=n.ext){var q=new c(n.ext);t.push(new r({tag:"a0",explicit:!0,obj:q}))}return new g({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},re(gt.asn1.x509.TBSCertList,gt.asn1.ASN1Object),gt.asn1.x509.CRLEntry=function(t){gt.asn1.x509.CRLEntry.superclass.constructor.call(this);var a=gt.asn1;this.setCertSerial=function(t){this.sn=new a.DERInteger(t)},this.setRevocationDate=function(t){this.time=new a.x509.Time(t)},this.tohex=function(){var t=new a.DERSequence({array:[this.sn,this.time]});return this.TLV=t.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&(void 0!==t.time&&this.setRevocationDate(t.time),void 0!==t.sn&&this.setCertSerial(t.sn))},re(gt.asn1.x509.CRLEntry,gt.asn1.ASN1Object),gt.asn1.x509.CRLNumber=function(a){gt.asn1.x509.CRLNumber.superclass.constructor.call(this,a),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new gt.asn1.DERInteger(this.params.num),this.asn1ExtnValue.tohex()},this.oid="2.5.29.20",null!=a&&(this.params=a)},re(gt.asn1.x509.CRLNumber,gt.asn1.x509.Extension),gt.asn1.x509.CRLReason=function(a){gt.asn1.x509.CRLReason.superclass.constructor.call(this,a),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new gt.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.tohex()},this.oid="2.5.29.21",null!=a&&(this.params=a)},re(gt.asn1.x509.CRLReason,gt.asn1.x509.Extension),gt.asn1.x509.OCSPNonce=function(a){gt.asn1.x509.OCSPNonce.superclass.constructor.call(this,a),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new gt.asn1.DEROctetString(this.params),this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.2",null!=a&&(this.params=a)},re(gt.asn1.x509.OCSPNonce,gt.asn1.x509.Extension),gt.asn1.x509.OCSPNoCheck=function(a){gt.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,a),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new gt.asn1.DERNull,this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.5",null!=a&&(this.params=a)},re(gt.asn1.x509.OCSPNoCheck,gt.asn1.x509.Extension),gt.asn1.x509.AdobeTimeStamp=function(g){gt.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,g);var b=gt.asn1,t=b.DERInteger,e=b.DERBoolean,a=b.DERSequence,r=b.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var i=this.params,n=[new t(1)];return n.push(new r({uri:i.uri})),null!=i.reqauth&&n.push(new e(i.reqauth)),this.asn1ExtnValue=new a({array:n}),this.asn1ExtnValue.tohex()},this.oid="1.2.840.113583.1.1.9.1",void 0!==g&&this.setByParam(g)},re(gt.asn1.x509.AdobeTimeStamp,gt.asn1.x509.Extension),gt.asn1.x509.X500Name=function(t){gt.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var b=gt.asn1,e=b.x509,r=e.RDN;this.setByString=function(g,t){void 0!==t&&(this.sRule=t);var e=g.split("/");e.shift();for(var n=[],o=0;o<e.length;o++)if(e[o].match(/^[^=]+=.+$/))n.push(e[o]);else{var h=n.length-1;n[h]=n[h]+"/"+e[o]}for(o=0;o<n.length;o++)this.asn1Array.push(new r({str:n[o],rule:this.sRule}))},this.setByLdapString=function(g,t){void 0!==t&&(this.sRule=t);var i=e.X500Name.ldapToCompat(g);this.setByString(i,t)},this.setByObject=function(t,i){for(var g in void 0!==i&&(this.sRule=i),t)if(t.hasOwnProperty(g)){var e=new r({str:g+"="+t[g],rule:this.sRule});this.asn1Array?this.asn1Array.push(e):this.asn1Array=[e]}},this.setByParam=function(t){var g;(void 0!==t.rule&&(this.sRule=t.rule),void 0!==t.array)?this.paramArray=t.array:void 0!==t.str?this.setByString(t.str):void 0!==t.ldapstr?this.setByLdapString(t.ldapstr):void 0!==t.hex?this.hTLV=t.hex:void 0!==t.certissuer?((g=new oe).readCertPEM(t.certissuer),this.hTLV=g.getIssuerHex()):void 0!==t.certsubject?((g=new oe).readCertPEM(t.certsubject),this.hTLV=g.getSubjectHex()):"object"==typeof t&&void 0===t.certsubject&&void 0===t.certissuer&&this.setByObject(t)},this.tohex=function(){if("string"==typeof this.hTLV)return this.hTLV;if(0==this.asn1Array.length&&this.paramArray.length>0)for(var g=0;g<this.paramArray.length;g++){var t={array:this.paramArray[g]};"utf8"!=this.sRule&&(t.rule=this.sRule);var e=new r(t);this.asn1Array.push(e)}var n=new b.DERSequence({array:this.asn1Array});return this.hTLV=n.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},re(gt.asn1.x509.X500Name,gt.asn1.ASN1Object),gt.asn1.x509.X500Name.compatToLDAP=function(t){if("/"!==t.substr(0,1))throw"malformed input";var e=(t=t.substr(1)).split("/");return e.reverse(),e=e.map((function(a){return a.replace(/,/,"\\,")})),e.join(",")},gt.asn1.x509.X500Name.onelineToLDAP=function(a){return gt.asn1.x509.X500Name.compatToLDAP(a)},gt.asn1.x509.X500Name.ldapToCompat=function(g){for(var t=g.split(","),e=!1,b=[],r=0;t.length>0;r++){var n=t.shift();if(!0===e){var o=(b.pop()+","+n).replace(/\\,/g,",");b.push(o),e=!1}else b.push(n);"\\"===n.substr(-1,1)&&(e=!0)}return b=b.map((function(a){return a.replace("/","\\/")})),b.reverse(),"/"+b.join("/")},gt.asn1.x509.X500Name.ldapToOneline=function(a){return gt.asn1.x509.X500Name.ldapToCompat(a)},gt.asn1.x509.RDN=function(b){gt.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var a=gt.asn1.x509.AttributeTypeAndValue;this.setByParam=function(t){void 0!==t.rule&&(this.sRule=t.rule),void 0!==t.str&&this.addByMultiValuedString(t.str),void 0!==t.array&&(this.paramArray=t.array)},this.addByString=function(t){this.asn1Array.push(new gt.asn1.x509.AttributeTypeAndValue({str:t,rule:this.sRule}))},this.addByMultiValuedString=function(t){for(var e=gt.asn1.x509.RDN.parseString(t),r=0;r<e.length;r++)this.addByString(e[r])},this.tohex=function(){if(0==this.asn1Array.length&&this.paramArray.length>0)for(var t=0;t<this.paramArray.length;t++){var e=this.paramArray[t];void 0!==e.rule&&"utf8"!=this.sRule&&(e.rule=this.sRule);var r=new a(e);this.asn1Array.push(r)}var n=new gt.asn1.DERSet({array:this.asn1Array});return this.TLV=n.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},void 0!==b&&this.setByParam(b)},re(gt.asn1.x509.RDN,gt.asn1.ASN1Object),gt.asn1.x509.RDN.parseString=function(t){for(var e=t.split(/\+/),r=!1,n=[],g=0;e.length>0;g++){var o=e.shift();if(!0===r){var h=(n.pop()+"+"+o).replace(/\\\+/g,"+");n.push(h),r=!1}else n.push(o);"\\"===o.substr(-1,1)&&(r=!0)}var c=!1,b=[];for(g=0;n.length>0;g++){o=n.shift();if(!0===c){var l=b.pop();if(o.match(/"$/)){h=(l+"+"+o).replace(/^([^=]+)="(.*)"$/,"$1=$2");b.push(h),c=!1}else b.push(l+"+"+o)}else b.push(o);o.match(/^[^=]+="/)&&(c=!0)}return b},gt.asn1.x509.AttributeTypeAndValue=function(t){gt.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var a=gt,g=a.asn1,e=g.DERSequence,r=g.DERUTF8String,i=g.DERPrintableString,n=g.DERTeletexString,b=g.DERIA5String,o=g.DERVisibleString,h=g.DERBMPString,c=a.lang.String.isMail,l=a.lang.String.isPrintable;this.setByParam=function(t){if(void 0!==t.rule&&(this.sRule=t.rule),void 0!==t.ds&&(this.dsType=t.ds),void 0===t.value&&void 0!==t.str){var e=t.str.match(/^([^=]+)=(.+)$/);if(!e)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.sType=e[1],this.sValue=e[2]}else this.sType=t.type,this.sValue=t.value},this.setByString=function(t,e){void 0!==e&&(this.sRule=e);var r=t.match(/^([^=]+)=(.+)$/);if(!r)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.setByAttrTypeAndValueStr(r[1],r[2])},this._getDsType=function(){var t=this.sType,e=this.sValue,r=this.sRule;return"prn"===r?"CN"==t&&c(e)?"ia5":l(e)?"prn":"utf8":"utf8"===r?"CN"==t&&c(e)?"ia5":"C"==t?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(t,e,r){void 0!==r&&(this.sRule=r),this.sType=t,this.sValue=e},this.getValueObj=function(t,e){if("utf8"==t)return new r({str:e});if("prn"==t)return new i({str:e});if("tel"==t)return new n({str:e});if("ia5"==t)return new b({str:e});if("vis"==t)return new o({str:e});if("bmp"==t)return new h({str:e});throw new Error("unsupported directory string type: type="+t+" value="+e)},this.tohex=function(){null==this.dsType&&(this.dsType=this._getDsType());var t=gt.asn1.x509.OID.atype2obj(this.sType),r=this.getValueObj(this.dsType,this.sValue),p=new e({array:[t,r]});return this.TLV=p.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},re(gt.asn1.x509.AttributeTypeAndValue,gt.asn1.ASN1Object),gt.asn1.x509.SubjectPublicKeyInfo=function(t){gt.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var a=gt,e=a.asn1,i=e.DERInteger,b=e.DERBitString,r=e.DERObjectIdentifier,n=e.DERSequence,o=e.ASN1Util.newObject,h=e.x509.AlgorithmIdentifier,g=a.crypto;g.ECDSA,g.DSA;this.getASN1Object=function(){if(null==this.asn1AlgId||null==this.asn1SubjPKey)throw"algId and/or subjPubKey not set";return new n({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.tohex=function(){var p=this.getASN1Object();return this.hTLV=p.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.setPubKey=function(q){try{if(q instanceof ut){var s=o({seq:[{int:{bigint:q.n}},{int:{int:q.e}}]}).tohex();this.asn1AlgId=new h({name:"rsaEncryption"}),this.asn1SubjPKey=new b({hex:"00"+s})}}catch(t){}try{if(q instanceof gt.crypto.ECDSA){var t=new r({name:q.curveName});this.asn1AlgId=new h({name:"ecPublicKey",asn1params:t}),this.asn1SubjPKey=new b({hex:"00"+q.pubKeyHex})}}catch(t){}try{if(q instanceof gt.crypto.DSA){t=new o({seq:[{int:{bigint:q.p}},{int:{bigint:q.q}},{int:{bigint:q.g}}]});this.asn1AlgId=new h({name:"dsa",asn1params:t});var e=new i({bigint:q.y});this.asn1SubjPKey=new b({hex:"00"+e.tohex()})}}catch(t){}},void 0!==t&&this.setPubKey(t)},re(gt.asn1.x509.SubjectPublicKeyInfo,gt.asn1.ASN1Object),gt.asn1.x509.Time=function(t){gt.asn1.x509.Time.superclass.constructor.call(this);var e=gt.asn1,b=e.DERUTCTime,g=e.DERGeneralizedTime;this.params=null,this.type=null,this.setTimeParams=function(t){this.timeParams=t},this.setByParam=function(t){this.params=t},this.getType=function(t){return t.match(/^[0-9]{12}Z$/)?"utc":t.match(/^[0-9]{14}Z$/)?"gen":t.match(/^[0-9]{12}\.[0-9]+Z$/)?"utc":t.match(/^[0-9]{14}\.[0-9]+Z$/)?"gen":null},this.tohex=function(){var i=this.params,t=null;if("string"==typeof i&&(i={str:i}),null==i||!i.str||null!=i.type&&null!=i.type||(i.type=this.getType(i.str)),null!=i&&i.str?("utc"==i.type&&(t=new b(i.str)),"gen"==i.type&&(t=new g(i.str))):t="gen"==this.type?new g:new b,null==t)throw new Error("wrong setting for Time");return this.TLV=t.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},gt.asn1.x509.Time_bak=function(t){gt.asn1.x509.Time_bak.superclass.constructor.call(this);var e=gt.asn1,b=e.DERUTCTime,g=e.DERGeneralizedTime;this.setTimeParams=function(t){this.timeParams=t},this.tohex=function(){var t=null;return t=null!=this.timeParams?"utc"==this.type?new b(this.timeParams):new g(this.timeParams):"utc"==this.type?new b:new g,this.TLV=t.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},this.type="utc",void 0!==t&&(void 0!==t.type?this.type=t.type:void 0!==t.str&&(t.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),t.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=t)},re(gt.asn1.x509.Time,gt.asn1.ASN1Object),gt.asn1.x509.AlgorithmIdentifier=function(t){gt.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var a=gt.asn1,e=a.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.tohex=function(){if(null===this.nameAlg&&null===this.asn1Alg)throw new Error("algorithm not specified");if(null!==this.nameAlg){var t=null;for(var r in e)r===this.nameAlg&&(t=e[r]);if(null!==t)return this.hTLV=t,this.hTLV}null!==this.nameAlg&&null===this.asn1Alg&&(this.asn1Alg=a.x509.OID.name2obj(this.nameAlg));var g=[this.asn1Alg];null!==this.asn1Params&&g.push(this.asn1Params);var i=new a.DERSequence({array:g});return this.hTLV=i.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&(void 0!==t.name&&(this.nameAlg=t.name),void 0!==t.asn1params&&(this.asn1Params=t.asn1params),void 0!==t.paramempty&&(this.paramEmpty=t.paramempty)),null===this.asn1Params&&!1===this.paramEmpty&&null!==this.nameAlg){void 0!==this.nameAlg.name&&(this.nameAlg=this.nameAlg.name);var r=this.nameAlg.toLowerCase();"withdsa"!==r.substr(-7,7)&&"withecdsa"!==r.substr(-9,9)&&(this.asn1Params=new a.DERNull)}},re(gt.asn1.x509.AlgorithmIdentifier,gt.asn1.ASN1Object),gt.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"},gt.asn1.x509.GeneralName=function(t){gt.asn1.x509.GeneralName.superclass.constructor.call(this);var e=gt.asn1,r=e.x509,a=r.X500Name,g=r.OtherName,n=e.DERIA5String,o=(e.DERPrintableString,e.DEROctetString),h=e.DERTaggedObject,c=e.ASN1Object,l=Error;this.params=null,this.setByParam=function(t){this.params=t},this.tohex=function(){var t,q,p=this.params,e=!1;if(void 0!==p.other)t="a0",q=new g(p.other);else if(void 0!==p.rfc822)t="81",q=new n({str:p.rfc822});else if(void 0!==p.dns)t="82",q=new n({str:p.dns});else if(void 0!==p.dn)t="a4",e=!0,q="string"==typeof p.dn?new a({str:p.dn}):p.dn instanceof gt.asn1.x509.X500Name?p.dn:new a(p.dn);else if(void 0!==p.ldapdn)t="a4",e=!0,q=new a({ldapstr:p.ldapdn});else if(void 0!==p.certissuer||void 0!==p.certsubj){var r,f;t="a4",e=!0;var d=null;if(void 0!==p.certsubj?(r=!1,f=p.certsubj):(r=!0,f=p.certissuer),f.match(/^[0-9A-Fa-f]+$/),-1!=f.indexOf("-----BEGIN ")&&(d=Ht(f)),null==d)throw new Error("certsubj/certissuer not cert");var s,y=new oe;y.hex=d,s=r?y.getIssuerHex():y.getSubjectHex(),(q=new c).hTLV=s}else if(void 0!==p.uri)t="86",q=new n({str:p.uri});else{if(void 0===p.ip)throw new l("improper params");var v;t="87";var m=p.ip;try{if(m.match(/^[0-9a-f]+$/)){var x=m.length;if(8!=x&&16!=x&&32!=x&&64!=x)throw"err";v=m}else v=Gt(m)}catch(t){throw new l("malformed IP address: "+p.ip+":"+t.message)}q=new o({hex:v})}return new h({tag:t,explicit:e,obj:q}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},re(gt.asn1.x509.GeneralName,gt.asn1.ASN1Object),gt.asn1.x509.GeneralNames=function(t){gt.asn1.x509.GeneralNames.superclass.constructor.call(this);var b=gt.asn1;this.setByParamArray=function(g){for(var t=0;t<g.length;t++){var e=new b.x509.GeneralName(g[t]);this.asn1Array.push(e)}},this.tohex=function(){return new b.DERSequence({array:this.asn1Array}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.asn1Array=new Array,void 0!==t&&this.setByParamArray(t)},re(gt.asn1.x509.GeneralNames,gt.asn1.ASN1Object),gt.asn1.x509.OtherName=function(g){gt.asn1.x509.OtherName.superclass.constructor.call(this);var t=gt.asn1,e=t.DERObjectIdentifier,a=t.DERSequence,b=t.ASN1Util.newObject;this.params=null,this.setByParam=function(i){this.params=i},this.tohex=function(){var t=this.params;if(null==t.oid||null==t.value)throw new Error("oid or value not specified");var r=new e({oid:t.oid}),i=b({tag:{tag:"a0",explicit:!0,obj:t.value}});return new a({array:[r,i]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==g&&this.setByParam(g)},re(gt.asn1.x509.OtherName,gt.asn1.ASN1Object),gt.asn1.x509.OID=new function(){var a=gt.asn1.DERObjectIdentifier;this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",secp521r1:"1.3.132.0.35",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1"},this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.objCache={},this.name2obj=function(b){if(void 0!==this.objCache[b])return this.objCache[b];if(void 0===this.name2oidList[b])throw"Name of ObjectIdentifier not defined: "+b;var t=this.name2oidList[b],e=new a({oid:t});return this.objCache[b]=e,e},this.atype2obj=function(b){if(void 0!==this.objCache[b])return this.objCache[b];var t;if(b.match(/^\d+\.\d+\.[0-9.]+$/))t=b;else if(void 0!==this.atype2oidList[b])t=this.atype2oidList[b];else{if(void 0===this.name2oidList[b])throw new Error("AttributeType name undefined: "+b);t=this.name2oidList[b]}var e=new a({oid:t});return this.objCache[b]=e,e},this.registerOIDs=function(b){if(this.checkOIDs(b))for(var t in b)this.name2oidList[t]=b[t]},this.checkOIDs=function(b){try{var t=Object.keys(b);return 0!=t.length&&(t.map((function(g,t,e){if(!this[g].match(/^[0-2]\.[0-9.]+$/))throw new Error("value is not OID")}),b),!0)}catch(t){return!1}}},gt.asn1.x509.OID.oid2name=function(b){var t=gt.asn1.x509.OID.name2oidList;for(var a in t)if(t[a]==b)return a;return""},gt.asn1.x509.OID.oid2atype=function(b){var t=gt.asn1.x509.OID.atype2oidList;for(var a in t)if(t[a]==b)return a;return b},gt.asn1.x509.OID.name2oid=function(a){if(a.match(/^[0-9.]+$/))return a;var b=gt.asn1.x509.OID.name2oidList;return void 0===b[a]?"":b[a]},gt.asn1.x509.X509Util={},gt.asn1.x509.X509Util.newCertPEM=function(t){var e=gt.asn1.x509;e.TBSCertificate;return new(0,e.Certificate)(t).getPEM()},void 0!==gt&&gt||(gt={}),void 0!==gt.asn1&&gt.asn1||(gt.asn1={}),void 0!==gt.asn1.cms&&gt.asn1.cms||(gt.asn1.cms={}),gt.asn1.cms.Attribute=function(t){var e=Error,r=gt.asn1,b=r.DERSequence,a=r.DERSet,g=r.DERObjectIdentifier;this.params=null,this.typeOid=null,this.setByParam=function(t){this.params=t},this.getValueArray=function(){throw new e("not yet implemented abstract")},this.tohex=function(){var t=new g({oid:this.typeOid}),e=new a({array:this.getValueArray()});return new b({array:[t,e]}).tohex()},this.getEncodedHex=function(){return this.tohex()}},re(gt.asn1.cms.Attribute,gt.asn1.ASN1Object),gt.asn1.cms.ContentType=function(t){var a=gt.asn1;a.cms.ContentType.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.3",this.getValueArray=function(){return[new a.DERObjectIdentifier(this.params.type)]},null!=t&&this.setByParam(t)},re(gt.asn1.cms.ContentType,gt.asn1.cms.Attribute),gt.asn1.cms.MessageDigest=function(t){var a=gt.asn1,e=a.DEROctetString;a.cms.MessageDigest.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.4",this.getValueArray=function(){return[new e(this.params)]},null!=t&&this.setByParam(t)},re(gt.asn1.cms.MessageDigest,gt.asn1.cms.Attribute),gt.asn1.cms.SigningTime=function(t){var a=gt.asn1;a.cms.SigningTime.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.5",this.getValueArray=function(){return[new a.x509.Time(this.params)]},null!=t&&this.setByParam(t)},re(gt.asn1.cms.SigningTime,gt.asn1.cms.Attribute),gt.asn1.cms.SigningCertificate=function(t){var e=Error,r=gt,n=r.asn1,b=n.DERSequence,g=n.cms,a=g.ESSCertID;r.crypto;g.SigningCertificate.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.12",this.getValueArray=function(){if(null==this.params||null==this.params||null==this.params.array)throw new e("parameter 'array' not specified");for(var r=this.params.array,n=[],o=0;o<r.length;o++){var h=r[o];0!=t.hasis||"string"!=typeof h||-1==h.indexOf("-----BEGIN")&&!mt.isASN1HEX(h)||(h={cert:h}),0!=h.hasis&&0==t.hasis&&(h.hasis=!1),n.push(new a(h))}var c=new b({array:n});return[new b({array:[c]})]},null!=t&&this.setByParam(t)},re(gt.asn1.cms.SigningCertificate,gt.asn1.cms.Attribute),gt.asn1.cms.ESSCertID=function(g){gt.asn1.cms.ESSCertID.superclass.constructor.call(this);var t=Error,e=gt,b=e.asn1,r=b.DEROctetString,a=b.DERSequence,n=b.cms.IssuerSerial;this.params=null,this.getCertHash=function(r,n){if(null!=r.hash)return r.hash;if("string"==typeof r&&-1==r.indexOf("-----BEGIN")&&!mt.isASN1HEX(r))return r;var i,o,h;if("string"==typeof r)i=r;else{if(null==r.cert)throw new t("hash nor cert unspecified");i=r.cert}if(o=-1!=i.indexOf("-----BEGIN")?Ht(i):i,"string"==typeof r&&(-1!=r.indexOf("-----BEGIN")?o=Ht(r):mt.isASN1HEX(r)&&(o=r)),null!=r.alg)h=r.alg;else{if(null==n)throw new t("hash alg unspecified");h=n}return e.crypto.Util.hashHex(o,h)},this.tohex=function(){var t=this.params,e=this.getCertHash(t,"sha1"),o=[];return o.push(new r({hex:e})),("string"==typeof t&&-1!=t.indexOf("-----BEGIN")||null!=t.cert&&0!=t.hasis||null!=t.issuer&&null!=t.serial)&&o.push(new n(t)),new a({array:o}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=g&&this.setByParam(g)},re(gt.asn1.cms.ESSCertID,gt.asn1.ASN1Object),gt.asn1.cms.SigningCertificateV2=function(t){var e=Error,a=gt,g=a.asn1,r=g.DERSequence,i=(g.x509,g.cms),n=i.ESSCertIDv2;a.crypto;i.SigningCertificateV2.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.47",this.getValueArray=function(){if(null==this.params||null==this.params||null==this.params.array)throw new e("parameter 'array' not specified");for(var o=this.params.array,h=[],c=0;c<o.length;c++){var l=o[c];null==t.alg&&0!=t.hasis||"string"!=typeof l||-1==l.indexOf("-----BEGIN")&&!mt.isASN1HEX(l)||(l={cert:l}),null==l.alg&&null!=t.alg&&(l.alg=t.alg),0!=l.hasis&&0==t.hasis&&(l.hasis=!1),h.push(new n(l))}var f=new r({array:h});return[new r({array:[f]})]},null!=t&&this.setByParam(t)},re(gt.asn1.cms.SigningCertificateV2,gt.asn1.cms.Attribute),gt.asn1.cms.ESSCertIDv2=function(t){gt.asn1.cms.ESSCertIDv2.superclass.constructor.call(this);Error;var b=gt.asn1,e=b.DEROctetString,a=b.DERSequence,r=b.cms.IssuerSerial,g=b.x509.AlgorithmIdentifier;this.params=null,this.tohex=function(){var t=this.params,n=this.getCertHash(t,"sha256"),i=[];return null!=t.alg&&"sha256"!=t.alg&&i.push(new g({name:t.alg})),i.push(new e({hex:n})),("string"==typeof t&&-1!=t.indexOf("-----BEGIN")||null!=t.cert&&0!=t.hasis||null!=t.issuer&&null!=t.serial)&&i.push(new r(t)),new a({array:i}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},re(gt.asn1.cms.ESSCertIDv2,gt.asn1.cms.ESSCertID),gt.asn1.cms.IssuerSerial=function(t){var i=Error,e=gt.asn1,g=e.DERInteger,r=e.DERSequence,n=e.cms,a=e.x509.GeneralNames,b=oe;n.IssuerSerial.superclass.constructor.call(this),this.setByParam=function(t){this.params=t},this.tohex=function(){var t,e,p=this.params;if("string"==typeof p&&-1!=p.indexOf("-----BEGIN")||null!=p.cert){var n;n=null!=p.cert?p.cert:p;var o=new b;o.readCertPEM(n),t=o.getIssuer(),e={hex:o.getSerialNumberHex()}}else{if(null==p.issuer||!p.serial)throw new i("cert or issuer and serial parameter not specified");t=p.issuer,e=p.serial}var q=new a([{dn:t}]),h=new g(e);return new r({array:[q,h]}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},re(gt.asn1.cms.IssuerSerial,gt.asn1.ASN1Object),gt.asn1.cms.SignerIdentifier=function(t){var i=gt.asn1,e=(i.DERInteger,i.DERSequence,i.cms),r=e.IssuerAndSerialNumber,n=e.SubjectKeyIdentifier;i.x509.X500Name,Error;e.SignerIdentifier.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if("isssn"==t.type)return new r(t).tohex();if("skid"==t.type)return new n(t).tohex();throw new Error("wrong property for isssn or skid")},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},re(gt.asn1.cms.SignerIdentifier,gt.asn1.ASN1Object),gt.asn1.cms.IssuerAndSerialNumber=function(t){var e=gt.asn1,g=e.DERInteger,r=e.DERSequence,n=e.cms,a=e.x509.X500Name,b=oe,i=Error;n.IssuerAndSerialNumber.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t,e,p=this.params;if("string"==typeof p&&-1!=p.indexOf("-----BEGIN")||null!=p.cert){var n;n=null!=p.cert?p.cert:p;var o=new b;o.readCertPEM(n),t=o.getIssuer(),e={hex:o.getSerialNumberHex()}}else{if(null==p.issuer||!p.serial)throw new i("cert or issuer and serial parameter not specified");t=p.issuer,e=p.serial}var q=new a(t),h=new g(e);return new r({array:[q,h]}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},null!=t&&this.setByParam(t)},re(gt.asn1.cms.IssuerAndSerialNumber,gt.asn1.ASN1Object),gt.asn1.cms.SubjectKeyIdentifier=function(g){var t=gt.asn1,e=(t.DERInteger,t.DERSequence,t.ASN1Util.newObject),r=t.cms,b=(r.IssuerAndSerialName,r.SubjectKeyIdentifier,t.x509.X500Name,oe),n=Error;r.SubjectKeyIdentifier.superclass.constructor.call(this),this.tohex=function(){var q,t=this.params;if(null==t.cert&&null==t.skid)throw new n("property cert nor skid undefined");null!=t.cert?q=new b(t.cert).getExtSubjectKeyIdentifier().kid.hex:null!=t.skid&&(q=t.skid);return e({tag:{tage:"a0",obj:{octstr:{hex:q}}}}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=g&&this.setByParam(g)},re(gt.asn1.cms.SubjectKeyIdentifier,gt.asn1.ASN1Object),gt.asn1.cms.AttributeList=function(t){var e=Error,b=gt.asn1,a=b.DERSet,r=b.cms;r.AttributeList.superclass.constructor.call(this),this.params=null,this.hTLV=null,this.setByParam=function(g){this.params=g},this.tohex=function(){var t=this.params;if(null!=this.hTLV)return this.hTLV;var n=!0;null!=t.sortflag&&(n=t.sortflag);for(var o=t.array,g=[],h=0;h<o.length;h++){var c=o[h],l=c.attr;if("contentType"==l)g.push(new r.ContentType(c));else if("messageDigest"==l)g.push(new r.MessageDigest(c));else if("signingTime"==l)g.push(new r.SigningTime(c));else if("signingCertificate"==l)g.push(new r.SigningCertificate(c));else if("signingCertificateV2"==l)g.push(new r.SigningCertificateV2(c));else if("signaturePolicyIdentifier"==l)g.push(new gt.asn1.cades.SignaturePolicyIdentifier(c));else{if("signatureTimeStamp"!=l&&"timeStampToken"!=l)throw new e("unknown attr: "+l);g.push(new gt.asn1.cades.SignatureTimeStamp(c))}}var f=new a({array:g,sortflag:n});return this.hTLV=f.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},re(gt.asn1.cms.AttributeList,gt.asn1.ASN1Object),gt.asn1.cms.SignerInfo=function(q){var t=Error,e=gt,i=e.asn1,r=i.DERInteger,n=i.DEROctetString,o=i.DERSequence,h=i.DERTaggedObject,c=i.cms,p=c.SignerIdentifier,l=c.AttributeList,s=(c.ContentType,c.EncapsulatedContentInfo,c.MessageDigest,c.SignedData,i.x509.AlgorithmIdentifier),b=e.crypto,f=ne;c.SignerInfo.superclass.constructor.call(this),this.params=null,this.sign=function(){var t=this.params,e=t.sigalg,u=new l(t.sattrs).tohex(),r=f.getKey(t.signkey),n=new b.Signature({alg:e});n.init(r),n.updateHex(u);var o=n.sign();t.sighex=o},this.tohex=function(){var e=this.params,c=[];if(c.push(new r({int:e.version})),c.push(new p(e.id)),c.push(new s({name:e.hashalg})),null!=e.sattrs){var f=new l(e.sattrs);try{c.push(new h({tag:"a0",explicit:!1,obj:f}))}catch(e){throw new t("si sattr error: "+e)}}if(null!=e.sigalgfield?c.push(new s({name:e.sigalgfield})):c.push(new s({name:e.sigalg})),null==e.sighex&&null!=e.signkey&&this.sign(),c.push(new n({hex:e.sighex})),null!=e.uattrs){f=new l(e.uattrs);try{c.push(new h({tag:"a1",explicit:!1,obj:f}))}catch(e){throw new t("si uattr error: "+e)}}return new o({array:c}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=q&&this.setByParam(q)},re(gt.asn1.cms.SignerInfo,gt.asn1.ASN1Object),gt.asn1.cms.EncapsulatedContentInfo=function(g){var b=gt.asn1,t=b.DERTaggedObject,a=b.DERSequence,e=b.DERObjectIdentifier,r=b.DEROctetString;b.cms.EncapsulatedContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var n=this.params,i=[];if(i.push(new e(n.type)),null!=n.content&&(null!=n.content.hex||null!=n.content.str)&&1!=n.isDetached){var o=new r(n.content),h=new t({tag:"a0",explicit:!0,obj:o});i.push(h)}return new a({array:i}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(i){this.params=i},null!=g&&this.setByParam(g)},re(gt.asn1.cms.EncapsulatedContentInfo,gt.asn1.ASN1Object),gt.asn1.cms.ContentInfo=function(g){var b=gt.asn1,t=b.DERTaggedObject,a=b.DERSequence,e=b.DERObjectIdentifier;b.x509.OID.name2obj;gt.asn1.cms.ContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var r=this.params,i=[];i.push(new e(r.type));var n=new t({tag:"a0",explicit:!0,obj:r.obj});return i.push(n),new a({array:i}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(i){this.params=i},null!=g&&this.setByParam(g)},re(gt.asn1.cms.ContentInfo,gt.asn1.ASN1Object),gt.asn1.cms.SignedData=function(t){Error;var e=gt.asn1,g=(e.ASN1Object,e.DERInteger),p=e.DERSet,r=e.DERSequence,n=(e.DERTaggedObject,e.cms),o=n.EncapsulatedContentInfo,h=n.SignerInfo,q=n.ContentInfo,c=n.CertificateSet,i=n.RevocationInfoChoices,l=e.x509.AlgorithmIdentifier;gt.asn1.cms.SignedData.superclass.constructor.call(this),this.params=null,this.checkAndFixParam=function(){var t=this.params;this._setDigestAlgs(t),this._setContentTypeByEContent(t),this._setMessageDigestByEContent(t),this._setSignerInfoVersion(t),this._setSignedDataVersion(t)},this._setDigestAlgs=function(t){for(var u={},e=t.sinfos,r=0;r<e.length;r++){u[e[r].hashalg]=1}t.hashalgs=Object.keys(u).sort()},this._setContentTypeByEContent=function(t){for(var u=t.econtent.type,e=t.sinfos,r=0;r<e.length;r++){var n=e[r];this._getAttrParamByName(n,"contentType").type=u}},this._setMessageDigestByEContent=function(t){var e=t.econtent,r=(t.econtent.type,e.content.hex);null==r&&"data"==e.type&&null!=e.content.str&&(r=Tt(e.content.str));for(var n=t.sinfos,u=0;u<n.length;u++){var o=n[u],s=o.hashalg,h=this._getAttrParamByName(o,"messageDigest"),c=gt.crypto.Util.hashHex(r,s);h.hex=c}},this._getAttrParamByName=function(t,s){for(var u=t.sattrs.array,e=0;e<u.length;e++)if(u[e].attr==s)return u[e]},this._setSignerInfoVersion=function(t){for(var e=t.sinfos,r=0;r<e.length;r++){var s=e[r],u=1;"skid"==s.id.type&&(u=3),s.version=u}},this._setSignedDataVersion=function(s){var t=this._getSignedDataVersion(s);s.version=t},this._getSignedDataVersion=function(t){if(null!=t.revinfos)for(var e=t.revinfos,r=0;r<e.length;r++){if(null!=e[r].ocsp)return 5}var n=t.sinfos;for(r=0;r<n.length;r++){if(3==t.sinfos[r].version)return 3}return"data"!=t.econtent.type?3:1},this.tohex=function(){var t=this.params;null!=this.getEncodedHexPrepare&&this.getEncodedHexPrepare(),1!=t.fixed&&this.checkAndFixParam();var e=[];e.push(new g({int:t.version}));for(var n=[],f=0;f<t.hashalgs.length;f++){var d=t.hashalgs[f];n.push(new l({name:d}))}e.push(new p({array:n})),e.push(new o(t.econtent)),null!=t.certs&&e.push(new c(t.certs)),null!=t.revinfos&&e.push(new i(t.revinfos));var u=[];for(f=0;f<t.sinfos.length;f++){var y=t.sinfos[f];u.push(new h(y))}return e.push(new p({array:u})),new r({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.getContentInfo=function(){return new q({type:"signed-data",obj:this})},this.getContentInfoEncodedHex=function(){return this.getContentInfo().tohex()},null!=t&&this.setByParam(t)},re(gt.asn1.cms.SignedData,gt.asn1.ASN1Object),gt.asn1.cms.CertificateSet=function(t){gt.asn1.cms.CertificateSet.superclass.constructor.call(this);var e=Error,b=gt.asn1,r=b.DERTaggedObject,a=b.DERSet,n=b.ASN1Object;this.params=null,this.tohex=function(){var q,t=this.params,p=[];if(t instanceof Array)q=t;else{if(null==t.array)throw new e("cert array not specified");q=t.array}for(var o=0;o<q.length;o++){var h=Ht(q[o]),g=new n;g.hTLV=h,p.push(g)}var c={array:p};0==t.sortflag&&(c.sortflag=!1);var l=new a(c);return new r({tag:"a0",explicit:!1,obj:l}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},re(gt.asn1.cms.CertificateSet,gt.asn1.ASN1Object),gt.asn1.cms.RevocationInfoChoices=function(a){gt.asn1.cms.RevocationInfoChoices.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if(!t instanceof Array)throw new Error("params is not array");for(var b=[],e=0;e<t.length;e++)b.push(new gt.asn1.cms.RevocationInfoChoice(t[e]));return gt.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:{set:b}}}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=a&&this.setByParam(a)},re(gt.asn1.cms.RevocationInfoChoices,gt.asn1.ASN1Object),gt.asn1.cms.RevocationInfoChoice=function(a){gt.asn1.cms.RevocationInfoChoice.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if(null!=t.crl&&"string"==typeof t.crl){var b=t.crl;return-1!=t.crl.indexOf("-----BEGIN")&&(b=Ht(t.crl)),b}if(null!=t.ocsp)return gt.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:new gt.asn1.cms.OtherRevocationFormat(t)}}).tohex();throw new Error("property crl or ocsp undefined")},this.getEncodedHex=function(){return this.tohex()},null!=a&&this.setByParam(a)},re(gt.asn1.cms.RevocationInfoChoice,gt.asn1.ASN1Object),gt.asn1.cms.OtherRevocationFormat=function(t){gt.asn1.cms.OtherRevocationFormat.superclass.constructor.call(this);var e=Error,r=gt,a=r.asn1.ASN1Util.newObject,n=r.lang.String.isHex;this.params=null,this.tohex=function(){var t=this.params;if(null==t.ocsp)throw new e("property ocsp not specified");if(!n(t.ocsp)||!mt.isASN1HEX(t.ocsp))throw new e("ocsp value not ASN.1 hex string");return a({seq:[{oid:"1.3.6.1.5.5.7.16.2"},{asn1:{tlv:t.ocsp}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},re(gt.asn1.cms.OtherRevocationFormat,gt.asn1.ASN1Object),gt.asn1.cms.CMSUtil=new function(){},gt.asn1.cms.CMSUtil.newSignedData=function(a){return new gt.asn1.cms.SignedData(a)},gt.asn1.cms.CMSUtil.verifySignedData=function(t){var e=gt,p=e.asn1,s=p.cms,i=(s.SignerInfo,s.SignedData,s.SigningTime,s.SigningCertificate,s.SigningCertificateV2,p.cades.SignaturePolicyIdentifier,e.lang.String.isHex),r=mt,n=r.getVbyList,a=r.getTLVbyList,o=r.getIdxbyList,h=r.getChildIdx,c=r.getTLV,l=r.oidname,f=e.crypto.Util.hashHex;void 0===t.cms&&i(t.cms);var d=t.cms,y=function(t,e){var r=e.idx;e.signerid_issuer1=a(t,r,[1,0],"30"),e.signerid_serial1=n(t,r,[1,1],"02"),e.hashalg=l(n(t,r,[2,0],"06"));var c=o(t,r,[3],"a0");e.idxSignedAttrs=c,v(t,e,c);var f=h(t,r).length;if(f<6)throw"malformed SignerInfo";e.sigalg=l(n(t,r,[f-2,0],"06")),e.sigval=n(t,r,[f-1],"04")},v=function(t,e,r){var o=h(t,r);e.signedAttrIdxList=o;for(var c=0;c<o.length;c++){var l,f=o[c],d=n(t,f,[0],"06");"2a864886f70d010905"===d?(l=It(n(t,f,[1,0])),e.saSigningTime=l):"2a864886f70d010904"===d&&(l=n(t,f,[1,0],"04"),e.saMessageDigest=l)}},m=function(t,e,r,n){r.verifyDetail={};var o=r.verifyDetail,l=e.parse.econtent,d=r.hashalg,y=r.saMessageDigest;o.validMessageDigest=!1,f(l,d)===y&&(o.validMessageDigest=!0),function(t,e,r,n){var o,l=e.parse.certsIdx;if(void 0===e.certs){o=[],e.certkeys=[];for(var f=h(t,l),d=0;d<f.length;d++){var y=c(t,f[d]),v=new oe;v.readCertHex(y),o[d]=v,e.certkeys[d]=v.getPublicKey()}e.certs=o}else o=e.certs;for(e.cccc=o.length,e.cccci=f.length,d=0;d<o.length;d++){var m=v.getIssuerHex(),x=v.getSerialNumberHex();r.signerid_issuer1===m&&r.signerid_serial1===x&&(r.certkey_idx=d)}}(t,e,r),o.validSignatureValue=!1;var v=r.sigalg,m="31"+c(t,r.idxSignedAttrs).substr(2);r.signedattrshex=m;var x=e.certs[r.certkey_idx].getPublicKey(),S=new gt.crypto.Signature({alg:v});S.init(x),S.updateHex(m);var w=S.verify(r.sigval);o.validSignatureValue_isValid=w,!0===w&&(o.validSignatureValue=!0),r.isValid=!1,o.validMessageDigest&&o.validSignatureValue&&(r.isValid=!0)},x={isValid:!1,parse:{}};return function(t,e){if("2a864886f70d010702"!==n(t,0,[0],"06"))return e;e.cmsType="signedData",e.econtent=n(t,0,[1,0,2,1,0]),function(t,e){for(var r,n=3;n<6;n++)if(void 0!==(r=o(t,0,[1,0,n]))){var h=t.substr(r,2);"a0"===h&&(e.certsIdx=r),"a1"===h&&(e.revinfosIdx=r),"31"===h&&(e.signerinfosIdx=r)}}(t,e),e.signerInfos=[],function(t,e){var r=e.signerinfosIdx;if(void 0!==r){var n=h(t,r);e.signerInfoIdxList=n;for(var o=0;o<n.length;o++){var c={idx:n[o]};y(t,c),e.signerInfos.push(c)}}}(t,e)}(d,x.parse),function(t,e){for(var r=e.parse.signerInfos,n=r.length,o=!0,h=0;h<n;h++){var c=r[h];m(t,e,c,h),c.isValid||(o=!1)}e.isValid=o}(d,x),x},gt.asn1.cms.CMSParser=function(){var g=Error,a=oe,t=new a,e=mt,i=e.getV,b=e.getTLV,r=(e.getIdxbyList,e.getTLVbyList),n=e.getTLVbyListEx,o=e.getVbyList,h=e.getVbyListEx,c=e.getChildIdx;this.getCMSSignedData=function(t){var e=r(t,0,[1,0]);return this.getSignedData(e)},this.getSignedData=function(t){var q=c(t,0),e={},p=i(t,q[0]),r=parseInt(p,16);e.version=r;var o=b(t,q[1]);e.hashalgs=this.getHashAlgArray(o);var h=b(t,q[2]);e.econtent=this.getEContent(h);var l=n(t,0,["[0]"]);null!=l&&(e.certs=this.getCertificateSet(l));n(t,0,["[1]"]);var s=n(t,0,[3]);return e.sinfos=this.getSignerInfos(s),e},this.getHashAlgArray=function(s){for(var q=c(s,0),t=new a,e=[],r=0;r<q.length;r++){var p=b(s,q[r]),n=t.getAlgorithmIdentifierName(p);e.push(n)}return e},this.getEContent=function(t){var e={},p=o(t,0,[0]),r=o(t,0,[1,0]);return e.type=gt.asn1.x509.OID.oid2name(mt.hextooidstr(p)),e.content={hex:r},e},this.getSignerInfos=function(p){for(var t=[],e=c(p,0),r=0;r<e.length;r++){var n=b(p,e[r]),q=this.getSignerInfo(n);t.push(q)}return t},this.getSignerInfo=function(s){var r={},u=c(s,0),q=e.getInt(s,u[0],-1);-1!=q&&(r.version=q);var o=b(s,u[1]),p=this.getIssuerAndSerialNumber(o);r.id=p;var l=b(s,u[2]),f=t.getAlgorithmIdentifierName(l);r.hashalg=f;var d=n(s,0,["[0]"]);if(null!=d){var y=this.getAttributeList(d);r.sattrs=y}var v=n(s,0,[3]),m=t.getAlgorithmIdentifierName(v);r.sigalg=m;var x=h(s,0,[4]);r.sighex=x;var S=n(s,0,["[1]"]);if(null!=S){var w=this.getAttributeList(S);r.uattrs=w}return r},this.getSignerIdentifier=function(t){if("30"==t.substr(0,2))return this.getIssuerAndSerialNumber(t);throw new Error("SKID of signerIdentifier not supported")},this.getIssuerAndSerialNumber=function(e){var r={type:"isssn"},n=c(e,0),p=b(e,n[0]);r.issuer=t.getX500Name(p);var q=i(e,n[1]);return r.serial={hex:q},r},this.getAttributeList=function(q){for(var t=[],e=c(q,0),r=0;r<e.length;r++){var p=b(q,e[r]),n=this.getAttribute(p);t.push(n)}return{array:t}},this.getAttribute=function(p){var t={},q=c(p,0),r=e.getOID(p,q[0]),n=gt.asn1.x509.OID.oid2name(r);t.attr=n;var o=b(p,q[1]),u=c(o,0);if(1==u.length)t.valhex=b(o,u[0]);else{for(var s=[],h=0;h<u.length;h++)s.push(b(o,u[h]));t.valhex=s}return"contentType"==n?this.setContentType(t):"messageDigest"==n?this.setMessageDigest(t):"signingTime"==n?this.setSigningTime(t):"signingCertificate"==n?this.setSigningCertificate(t):"signingCertificateV2"==n?this.setSigningCertificateV2(t):"signaturePolicyIdentifier"==n&&this.setSignaturePolicyIdentifier(t),t},this.setContentType=function(t){var r=e.getOIDName(t.valhex,0,null);null!=r&&(t.type=r,delete t.valhex)},this.setSigningTime=function(t){var e=It(i(t.valhex,0));t.str=e,delete t.valhex},this.setMessageDigest=function(t){var e=i(t.valhex,0);t.hex=e,delete t.valhex},this.setSigningCertificate=function(t){var q=c(t.valhex,0);if(q.length>0){for(var e=b(t.valhex,q[0]),p=c(e,0),r=[],n=0;n<p.length;n++){var s=b(e,p[n]),u=this.getESSCertID(s);r.push(u)}t.array=r}if(q.length>1){var o=b(t.valhex,q[1]);t.polhex=o}delete t.valhex},this.setSignaturePolicyIdentifier=function(s){var q=c(s.valhex,0);if(q.length>0){var t=e.getOID(s.valhex,q[0]);s.oid=t}if(q.length>1){var r=new a,n=c(s.valhex,q[1]),p=b(s.valhex,n[0]),o=r.getAlgorithmIdentifierName(p);s.alg=o;var h=i(s.valhex,n[1]);s.hash=h}delete s.valhex},this.setSigningCertificateV2=function(t){var s=c(t.valhex,0);if(s.length>0){for(var e=b(t.valhex,s[0]),r=c(e,0),u=[],q=0;q<r.length;q++){var n=b(e,r[q]),p=this.getESSCertIDv2(n);u.push(p)}t.array=u}if(s.length>1){var o=b(t.valhex,s[1]);t.polhex=o}delete t.valhex},this.getESSCertID=function(t){var p={},e=c(t,0);if(e.length>0){var q=i(t,e[0]);p.hash=q}if(e.length>1){var r=b(t,e[1]),n=this.getIssuerSerial(r);null!=n.serial&&(p.serial=n.serial),null!=n.issuer&&(p.issuer=n.issuer)}return p},this.getESSCertIDv2=function(q){var s={},p=c(q,0);if(p.length<1||3<p.length)throw new g("wrong number of elements");var e=0;if("30"==q.substr(p[0],2)){var r=b(q,p[0]);s.alg=t.getAlgorithmIdentifierName(r),e++}else s.alg="sha256";var n=i(q,p[e]);if(s.hash=n,p.length>e+1){var o=b(q,p[e+1]),h=this.getIssuerSerial(o);s.issuer=h.issuer,s.serial=h.serial}return s},this.getIssuerSerial=function(q){var e={},r=c(q,0),n=b(q,r[0]),o=t.getGeneralNames(n)[0].dn;e.issuer=o;var s=i(q,r[1]);return e.serial={hex:s},e},this.getCertificateSet=function(p){for(var t=c(p,0),e=[],r=0;r<t.length;r++){var n=b(p,t[r]);if("30"==n.substr(0,2)){var q=jt(n,"CERTIFICATE");e.push(q)}}return{array:e,sortflag:!1}}},void 0!==gt&&gt||(gt={}),void 0!==gt.asn1&&gt.asn1||(gt.asn1={}),void 0!==gt.asn1.tsp&&gt.asn1.tsp||(gt.asn1.tsp={}),gt.asn1.tsp.TimeStampToken=function(t){var a=gt.asn1.tsp;a.TimeStampToken.superclass.constructor.call(this),this.params=null,this.getEncodedHexPrepare=function(){var t=new a.TSTInfo(this.params.econtent.content);this.params.econtent.content.hex=t.tohex()},null!=t&&this.setByParam(t)},re(gt.asn1.tsp.TimeStampToken,gt.asn1.cms.SignedData),gt.asn1.tsp.TSTInfo=function(t){Error;var e=gt.asn1,g=e.DERSequence,i=e.DERInteger,r=e.DERBoolean,n=e.DERGeneralizedTime,o=e.DERObjectIdentifier,h=e.DERTaggedObject,c=e.tsp,l=c.MessageImprint,b=c.Accuracy,f=(e.x509.X500Name,e.x509.GeneralName);if(c.TSTInfo.superclass.constructor.call(this),this.dVersion=new i({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerial=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.tohex=function(){var p=[this.dVersion];if(null==this.dPolicy)throw new Error("policy shall be specified.");if(p.push(this.dPolicy),null==this.dMessageImprint)throw new Error("messageImprint shall be specified.");if(p.push(this.dMessageImprint),null==this.dSerial)throw new Error("serialNumber shall be specified.");if(p.push(this.dSerial),null==this.dGenTime)throw new Error("genTime shall be specified.");p.push(this.dGenTime),null!=this.dAccuracy&&p.push(this.dAccuracy),null!=this.dOrdering&&p.push(this.dOrdering),null!=this.dNonce&&p.push(this.dNonce),null!=this.dTsa&&p.push(this.dTsa);var q=new g({array:p});return this.hTLV=q.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t){if("string"==typeof t.policy){if(!t.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new o({oid:t.policy})}void 0!==t.messageImprint&&(this.dMessageImprint=new l(t.messageImprint)),void 0!==t.serial&&(this.dSerial=new i(t.serial)),void 0!==t.genTime&&(this.dGenTime=new n(t.genTime)),void 0!==t.accuracy&&(this.dAccuracy=new b(t.accuracy)),void 0!==t.ordering&&1==t.ordering&&(this.dOrdering=new r),void 0!==t.nonce&&(this.dNonce=new i(t.nonce)),void 0!==t.tsa&&(this.dTsa=new h({tag:"a0",explicit:!0,obj:new f({dn:t.tsa})}))}},re(gt.asn1.tsp.TSTInfo,gt.asn1.ASN1Object),gt.asn1.tsp.Accuracy=function(t){var b=gt.asn1,a=b.ASN1Util.newObject;b.tsp.Accuracy.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params,e=[];return null!=t.seconds&&"number"==typeof t.seconds&&e.push({int:t.seconds}),null!=t.millis&&"number"==typeof t.millis&&e.push({tag:{tagi:"80",obj:{int:t.millis}}}),null!=t.micros&&"number"==typeof t.micros&&e.push({tag:{tagi:"81",obj:{int:t.micros}}}),a({seq:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},re(gt.asn1.tsp.Accuracy,gt.asn1.ASN1Object),gt.asn1.tsp.MessageImprint=function(g){var b=gt.asn1,a=b.DERSequence,t=b.DEROctetString,e=b.x509.AlgorithmIdentifier;b.tsp.MessageImprint.superclass.constructor.call(this),this.params=null,this.tohex=function(){var r=this.params,n=new e({name:r.alg}),o=new t({hex:r.hash});return new a({array:[n,o]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==g&&this.setByParam(g)},re(gt.asn1.tsp.MessageImprint,gt.asn1.ASN1Object),gt.asn1.tsp.TimeStampReq=function(t){var e=gt.asn1,r=e.DERSequence,n=e.DERInteger,o=e.DERBoolean,i=(e.ASN1Object,e.DERObjectIdentifier),g=e.tsp,b=g.MessageImprint;g.TimeStampReq.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params,e=[];return e.push(new n({int:1})),t.messageImprint instanceof gt.asn1.ASN1Object?e.push(t.messageImprint):e.push(new b(t.messageImprint)),null!=t.policy&&e.push(new i(t.policy)),null!=t.nonce&&e.push(new n(t.nonce)),1==t.certreq&&e.push(new o),new r({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},re(gt.asn1.tsp.TimeStampReq,gt.asn1.ASN1Object),gt.asn1.tsp.TimeStampResp=function(g){var t=gt.asn1,e=t.DERSequence,a=(t.ASN1Object,t.tsp),b=a.PKIStatusInfo;a.TimeStampResp.superclass.constructor.call(this),this.params=null,this.tohex=function(){var r=this.params,n=[];if(null!=r.econtent||null!=r.tst)if(null!=r.statusinfo?n.push(new b(r.statusinfo)):n.push(new b("granted")),null!=r.econtent)n.push(new a.TimeStampToken(r).getContentInfo());else{if(!(r.tst instanceof t.ASN1Object))throw new Error("improper member tst value");n.push(r.tst)}else{if(null==r.statusinfo)throw new Error("parameter for token nor statusinfo not specified");n.push(new b(r.statusinfo))}return new e({array:n}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=g&&this.setByParam(g)},re(gt.asn1.tsp.TimeStampResp,gt.asn1.ASN1Object),gt.asn1.tsp.PKIStatusInfo=function(t){var e=Error,g=gt.asn1,r=g.DERSequence,i=g.tsp,n=i.PKIStatus,o=i.PKIFreeText,b=i.PKIFailureInfo;i.PKIStatusInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params,h=[];if("string"==typeof t)h.push(new n(t));else{if(null==t.status)throw new e("property 'status' unspecified");h.push(new n(t.status)),null!=t.statusstr&&h.push(new o(t.statusstr)),null!=t.failinfo&&h.push(new b(t.failinfo))}return new r({array:h}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},re(gt.asn1.tsp.PKIStatusInfo,gt.asn1.ASN1Object),gt.asn1.tsp.PKIStatus=function(g){var t=Error,e=gt.asn1,r=e.DERInteger;e.tsp.PKIStatus.superclass.constructor.call(this);var a={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5};this.params=null,this.tohex=function(){var e,n=this.params;if("string"==typeof n)try{e=a[n]}catch(e){throw new t("undefined name: "+n)}else{if("number"!=typeof n)throw new t("unsupported params");e=n}return new r({int:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=g&&this.setByParam(g)},re(gt.asn1.tsp.PKIStatus,gt.asn1.ASN1Object),gt.asn1.tsp.PKIFreeText=function(g){var t=Error,e=gt.asn1,b=e.DERSequence,r=e.DERUTF8String;e.tsp.PKIFreeText.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if(!e instanceof Array)throw new t("wrong params: not array");for(var n=[],o=0;o<e.length;o++)n.push(new r({str:e[o]}));return new b({array:n}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=g&&this.setByParam(g)},re(gt.asn1.tsp.PKIFreeText,gt.asn1.ASN1Object),gt.asn1.tsp.PKIFailureInfo=function(t){var e=Error,r=gt.asn1,g=r.DERBitString,n=r.tsp.PKIFailureInfo,a={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25};n.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t,r=this.params;if("string"==typeof r)try{t=a[r]}catch(t){throw new e("undefined name: "+r)}else{if("number"!=typeof r)throw new e("wrong params");t=r}return new g({bin:t.toString(2)}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},re(gt.asn1.tsp.PKIFailureInfo,gt.asn1.ASN1Object),gt.asn1.tsp.AbstractTSAAdapter=function(a){this.getTSTHex=function(t,b){throw"not implemented yet"}},gt.asn1.tsp.SimpleTSAAdapter=function(t){var e=gt,a=e.asn1.tsp,b=e.crypto.Util.hashHex;a.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(g,t){var i=b(g,t);this.params.econtent.content.messageImprint={alg:t,hash:i},this.params.econtent.content.serial={int:this.serial++};var e=Math.floor(1e9*Math.random());return this.params.econtent.content.nonce={int:e},new a.TimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==t&&(this.params=t)},re(gt.asn1.tsp.SimpleTSAAdapter,gt.asn1.tsp.AbstractTSAAdapter),gt.asn1.tsp.FixedTSAAdapter=function(t){var e=gt,a=e.asn1.tsp,b=e.crypto.Util.hashHex;a.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(g,t){var e=b(g,t);return this.params.econtent.content.messageImprint={alg:t,hash:e},new a.TimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==t&&(this.params=t)},re(gt.asn1.tsp.FixedTSAAdapter,gt.asn1.tsp.AbstractTSAAdapter),gt.asn1.tsp.TSPUtil=new function(){},gt.asn1.tsp.TSPUtil.newTimeStampToken=function(a){return new gt.asn1.tsp.TimeStampToken(a)},gt.asn1.tsp.TSPUtil.parseTimeStampReq=function(a){return(new gt.asn1.tsp.TSPParser).getTimeStampReq(a)},gt.asn1.tsp.TSPUtil.parseMessageImprint=function(a){return(new gt.asn1.tsp.TSPParser).getMessageImprint(a)},gt.asn1.tsp.TSPParser=function(){Error;var t=new oe,e=mt,g=e.getV,b=e.getTLV,r=e.getIdxbyList,i=(e.getTLVbyListEx,e.getChildIdx),n=["granted","grantedWithMods","rejection","waiting","revocationWarning","revocationNotification"],o={0:"badAlg",2:"badRequest",5:"badDataFormat",14:"timeNotAvailable",15:"unacceptedPolicy",16:"unacceptedExtension",17:"addInfoNotAvailable",25:"systemFailure"};this.getResponse=function(t){var e=i(t,0);if(1==e.length)return this.getPKIStatusInfo(b(t,e[0]));if(e.length>1){var r=this.getPKIStatusInfo(b(t,e[0])),n=b(t,e[1]),p=this.getToken(n);return p.statusinfo=r,p}},this.getToken=function(t){var e=(new gt.asn1.cms.CMSParser).getCMSSignedData(t);return this.setTSTInfo(e),e},this.setTSTInfo=function(t){var e=t.econtent;if("tstinfo"==e.type){var r=e.content.hex,n=this.getTSTInfo(r);e.content=n}},this.getTSTInfo=function(e){var r={},s=i(e,0),p=g(e,s[1]);r.policy=Zt(p);var n=b(e,s[2]);r.messageImprint=this.getMessageImprint(n);var u=g(e,s[3]);r.serial={hex:u};var o=g(e,s[4]);r.genTime={str:It(o)};var q=0;if(s.length>5&&"30"==e.substr(s[5],2)){var h=b(e,s[5]);r.accuracy=this.getAccuracy(h),q++}s.length>5+q&&"01"==e.substr(s[5+q],2)&&("ff"==g(e,s[5+q])&&(r.ordering=!0),q++);if(s.length>5+q&&"02"==e.substr(s[5+q],2)){var c=g(e,s[5+q]);r.nonce={hex:c},q++}if(s.length>5+q&&"a0"==e.substr(s[5+q],2)){var l=b(e,s[5+q]);l="30"+l.substr(2),pGeneralNames=t.getGeneralNames(l);var f=pGeneralNames[0].dn;r.tsa=f,q++}if(s.length>5+q&&"a1"==e.substr(s[5+q],2)){var d=b(e,s[5+q]);d="30"+d.substr(2);var y=t.getExtParamArray(d);r.ext=y,q++}return r},this.getAccuracy=function(q){for(var t={},e=i(q,0),p=0;p<e.length;p++){var r=q.substr(e[p],2),n=g(q,e[p]),o=parseInt(n,16);"02"==r?t.seconds=o:"80"==r?t.millis=o:"81"==r&&(t.micros=o)}return t},this.getMessageImprint=function(t){if("30"!=t.substr(0,2))throw new Error("head of messageImprint hex shall be x30");var s={},n=(i(t,0),r(t,0,[0,0])),o=g(t,n),p=e.hextooidstr(o),h=gt.asn1.x509.OID.oid2name(p);if(""==h)throw new Error("hashAlg name undefined: "+p);var c=h,q=r(t,0,[1]);return s.alg=c,s.hash=g(t,q),s},this.getPKIStatusInfo=function(t){var e={},r=i(t,0),o=0;try{var h=g(t,r[0]),p=parseInt(h,16);e.status=n[p]}catch(t){}if(r.length>1&&"30"==t.substr(r[1],2)){var c=b(t,r[1]);e.statusstr=this.getPKIFreeText(c),o++}if(r.length>o&&"03"==t.substr(r[1+o],2)){var q=b(t,r[1+o]);e.failinfo=this.getPKIFailureInfo(q)}return e},this.getPKIFreeText=function(t){for(var r=[],n=i(t,0),o=0;o<n.length;o++)r.push(e.getString(t,n[o]));return r},this.getPKIFailureInfo=function(t){var r=e.getInt(t,0);return null!=o[r]?o[r]:r},this.getTimeStampReq=function(q){var p={certreq:!1},s=i(q,0);if(s.length<2)throw new Error("TimeStampReq must have at least 2 items");var t=b(q,s[1]);p.messageImprint=gt.asn1.tsp.TSPUtil.parseMessageImprint(t);for(var r=2;r<s.length;r++){var n=s[r],o=q.substr(n,2);if("06"==o){var h=g(q,n);p.policy=e.hextooidstr(h)}"02"==o&&(p.nonce=g(q,n)),"01"==o&&(p.certreq=!0)}return p}},void 0!==gt&&gt||(gt={}),void 0!==gt.asn1&&gt.asn1||(gt.asn1={}),void 0!==gt.asn1.cades&&gt.asn1.cades||(gt.asn1.cades={}),gt.asn1.cades.SignaturePolicyIdentifier=function(t){var a=gt.asn1.cades,e=a.SignaturePolicyId;a.SignaturePolicyIdentifier.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.15",this.params=null,this.getValueArray=function(){return[new e(this.params)]},this.setByParam=function(t){this.params=t},null!=t&&this.setByParam(t)},re(gt.asn1.cades.SignaturePolicyIdentifier,gt.asn1.cms.Attribute),gt.asn1.cades.SignaturePolicyId=function(t){var g=gt.asn1,e=g.DERSequence,i=g.DERObjectIdentifier,r=(g.x509.AlgorithmIdentifier,g.cades),n=r.SignaturePolicyId,b=r.OtherHashAlgAndValue;n.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params,r=[];return r.push(new i(t.oid)),r.push(new b(t)),new e({array:r}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},null!=t&&this.setByParam(t)},re(gt.asn1.cades.SignaturePolicyId,gt.asn1.ASN1Object),gt.asn1.cades.OtherHashAlgAndValue=function(t){var e=Error,g=gt.asn1,r=g.DERSequence,i=g.DEROctetString,n=g.x509.AlgorithmIdentifier;g.cades.OtherHashAlgAndValue.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if(null==t.alg)throw new e("property 'alg' not specified");if(null==t.hash&&null==t.cert)throw new e("property 'hash' nor 'cert' not specified");var o=null;if(null!=t.hash)o=t.hash;else if(null!=t.cert){if("string"!=typeof t.cert)throw new e("cert not string");var h=t.cert;-1!=t.cert.indexOf("-----BEGIN")&&(h=Ht(t.cert)),o=gt.crypto.Util.hashHex(h,t.alg)}var c=[];return c.push(new n({name:t.alg})),c.push(new i({hex:o})),new r({array:c}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},re(gt.asn1.cades.OtherHashAlgAndValue,gt.asn1.ASN1Object),gt.asn1.cades.OtherHashValue=function(g){gt.asn1.cades.OtherHashValue.superclass.constructor.call(this);var t=Error,e=gt,r=(e.lang.String.isHex,e.asn1.DEROctetString);e.crypto.Util.hashHex;this.params=null,this.tohex=function(){var e=this.params;if(null==e.hash&&null==e.cert)throw new t("hash or cert not specified");var n=null;if(null!=e.hash)n=e.hash;else if(null!=e.cert){if("string"!=typeof e.cert)throw new t("cert not string");var i=e.cert;-1!=e.cert.indexOf("-----BEGIN")&&(i=Ht(e.cert)),n=gt.crypto.Util.hashHex(i,"sha1")}return new r({hex:n}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=g&&this.setByParam(g)},re(gt.asn1.cades.OtherHashValue,gt.asn1.ASN1Object),gt.asn1.cades.SignatureTimeStamp=function(t){var e=Error,r=gt,n=r.lang.String.isHex,b=r.asn1,o=b.ASN1Object;b.x509;b.cades.SignatureTimeStamp.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.14",this.params=null,this.getValueArray=function(){var t=this.params;if(null!=t.tst){if(n(t.tst))return(h=new o).hTLV=t.tst,[h];if(t.tst instanceof o)return[t.tst];throw new e("params.tst has wrong value")}if(null!=t.res){var r=t.res;if(r instanceof o&&(r=r.tohex()),"string"!=typeof r||!n(r))throw new e("params.res has wrong value");var h;mt.getTLVbyList(r,0,[1]);return(h=new o).hTLV=t.tst,[h]}},null!=t&&this.setByParam(t)},re(gt.asn1.cades.SignatureTimeStamp,gt.asn1.cms.Attribute),gt.asn1.cades.CompleteCertificateRefs=function(t){var e=Error,r=gt,n=r.asn1,b=n.DERSequence,o=n.cades,a=o.OtherCertID,g=r.lang.String.isHex;o.CompleteCertificateRefs.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.21",this.params=null,this.getValueArray=function(){for(var t=this.params,r=[],n=0;n<t.array.length;n++){var o=t.array[n];if("string"==typeof o)if(-1!=o.indexOf("-----BEGIN"))o={cert:o};else{if(!g(o))throw new e("unsupported value: "+o);o={hash:o}}null!=t.alg&&null==o.alg&&(o.alg=t.alg),null!=t.hasis&&null==o.hasis&&(o.hasis=t.hasis);var h=new a(o);r.push(h)}return[new b({array:r})]},null!=t&&this.setByParam(t)},re(gt.asn1.cades.CompleteCertificateRefs,gt.asn1.cms.Attribute),gt.asn1.cades.OtherCertID=function(t){var e=gt.asn1,r=e.DERSequence,g=e.cms.IssuerSerial,n=e.cades,o=n.OtherHashValue,b=n.OtherHashAlgAndValue;n.OtherCertID.superclass.constructor.call(this),this.params=t,this.tohex=function(){var t=this.params;"string"==typeof t&&(-1!=t.indexOf("-----BEGIN")?t={cert:t}:_isHex(t)&&(t={hash:t}));var e=[],n=null;if(n=null!=t.alg?new b(t):new o(t),e.push(n),null!=t.cert&&1==t.hasis||null!=t.issuer&&null!=t.serial){var h=new g(t);e.push(h)}return new r({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},re(gt.asn1.cades.OtherCertID,gt.asn1.ASN1Object),gt.asn1.cades.OtherHash=function(g){Error;var a=gt,t=a.asn1,e=(t.cms,t.cades),b=e.OtherHashAlgAndValue,r=e.OtherHashValue,n=(a.crypto.Util.hashHex,a.lang.String.isHex);e.OtherHash.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;"string"==typeof t&&(-1!=t.indexOf("-----BEGIN")?t={cert:t}:n(t)&&(t={hash:t}));return(null!=t.alg?new b(t):new r(t)).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=g&&this.setByParam(g)},re(gt.asn1.cades.OtherHash,gt.asn1.ASN1Object),gt.asn1.cades.CAdESUtil=new function(){},gt.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(a){return(new gt.asn1.cms.CMSParser).getCMSSignedData(a)},gt.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(g,q,t){var p=mt,s=p.getChildIdx,a=p.getTLV,e=p.getV,r=gt.asn1,n=r.ASN1Object,o=r.cms,h=o.AttributeList,c=o.SignerInfo,l={},f=s(g,q);if(6!=f.length)throw"not supported items for SignerInfo (!=6)";var d=f.shift();l.version=a(g,d);var y=f.shift();l.si=a(g,y);var v=f.shift();l.digalg=a(g,v);var m=f.shift();l.sattrs=a(g,m);var i=f.shift();l.sigalg=a(g,i);var b=f.shift();l.sig=a(g,b),l.sigval=e(g,b);var u=null;return l.obj=new c,(u=new n).hTLV=l.version,l.obj.dCMSVersion=u,(u=new n).hTLV=l.si,l.obj.dSignerIdentifier=u,(u=new n).hTLV=l.digalg,l.obj.dDigestAlgorithm=u,(u=new n).hTLV=l.sattrs,l.obj.dSignedAttrs=u,(u=new n).hTLV=l.sigalg,l.obj.dSigAlg=u,(u=new n).hTLV=l.sig,l.obj.dSig=u,l.obj.dUnsignedAttrs=new h,l},void 0!==gt.asn1.csr&&gt.asn1.csr||(gt.asn1.csr={}),gt.asn1.csr.CertificationRequest=function(g){var t=gt.asn1,e=t.DERBitString,b=t.DERSequence,a=t.csr,r=(t.x509,a.CertificationRequestInfo);a.CertificationRequest.superclass.constructor.call(this),this.setByParam=function(i){this.params=i},this.sign=function(){var t=new r(this.params).tohex(),e=new gt.crypto.Signature({alg:this.params.sigalg});e.init(this.params.sbjprvkey),e.updateHex(t);var i=e.sign();this.params.sighex=i},this.getPEM=function(){return jt(this.tohex(),"CERTIFICATE REQUEST")},this.tohex=function(){var t=this.params,r=new gt.asn1.csr.CertificationRequestInfo(this.params),n=new gt.asn1.x509.AlgorithmIdentifier({name:t.sigalg});if(null==t.sighex&&null!=t.sbjprvkey&&this.sign(),null==t.sighex)throw new Error("sighex or sbjprvkey parameter not defined");var o=new e({hex:"00"+t.sighex});return new b({array:[r,n,o]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==g&&this.setByParam(g)},re(gt.asn1.csr.CertificationRequest,gt.asn1.ASN1Object),gt.asn1.csr.CertificationRequestInfo=function(t){var e=gt.asn1,g=(e.DERBitString,e.DERSequence),i=e.DERInteger,r=e.DERUTF8String,n=e.DERTaggedObject,o=e.ASN1Util.newObject,h=e.csr,c=e.x509,a=c.X500Name,l=c.Extensions,f=c.SubjectPublicKeyInfo;h.CertificationRequestInfo.superclass.constructor.call(this),this.params=null,this.setByParam=function(t){null!=t&&(this.params=t)},this.tohex=function(){var s=this.params,p=[];if(p.push(new i({int:0})),p.push(new a(s.subject)),p.push(new f(ne.getKey(s.sbjpubkey))),null!=s.extreq){var t=new l(s.extreq),e=o({tag:{tag:"a0",explict:!0,obj:{seq:[{oid:"1.2.840.113549.1.9.14"},{set:[t]}]}}});p.push(e)}else p.push(new n({tag:"a0",explicit:!1,obj:new r({str:""})}));return new g({array:p}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=t&&this.setByParam(t)},re(gt.asn1.csr.CertificationRequestInfo,gt.asn1.ASN1Object),gt.asn1.csr.CSRUtil=new function(){},gt.asn1.csr.CSRUtil.newCSRPEM=function(t){return new gt.asn1.csr.CertificationRequest(t).getPEM()},gt.asn1.csr.CSRUtil.getParam=function(t){var e=mt,g=e.getV,i=e.getIdxbyList,a=e.getTLVbyList,r=e.getTLVbyListEx,n=e.getVbyListEx,o={};if(-1==t.indexOf("-----BEGIN CERTIFICATE REQUEST"))throw new Error("argument is not PEM file");var h=Ht(t,"CERTIFICATE REQUEST");try{var c=r(h,0,[0,1]);if("3000"==c)o.subject={};else{var l=new oe;o.subject=l.getX500Name(c)}}catch(t){}var f=r(h,0,[0,2]),q=ne.getKey(f,null,"pkcs8pub");o.sbjpubkey=ne.getPEM(q,"PKCS8PUB");var b=function(t){var s=i(t,0,[0,3,0,0],"06");return"2a864886f70d01090e"!=g(t,s)?null:a(t,0,[0,3,0,1,0],"30")}(h);l=new oe;null!=b&&(o.extreq=l.getExtParamArray(b));try{var d=r(h,0,[1],"30");l=new oe;o.sigalg=l.getAlgorithmIdentifierName(d)}catch(t){}try{var y=n(h,0,[2]);o.sighex=y}catch(t){}return o},void 0!==gt&&gt||(gt={}),void 0!==gt.asn1&&gt.asn1||(gt.asn1={}),void 0!==gt.asn1.ocsp&&gt.asn1.ocsp||(gt.asn1.ocsp={}),gt.asn1.ocsp.DEFAULT_HASH="sha1",gt.asn1.ocsp.OCSPResponse=function(t){gt.asn1.ocsp.OCSPResponse.superclass.constructor.call(this);gt.asn1.DEREnumerated;var b=gt.asn1.ASN1Util.newObject,e=gt.asn1.ocsp.ResponseBytes,r=["successful","malformedRequest","internalError","tryLater","_not_used_","sigRequired","unauthorized"];this.params=null,this._getStatusCode=function(){var t=this.params.resstatus;return"number"==typeof t?t:"string"!=typeof t?-1:r.indexOf(t)},this.setByParam=function(t){this.params=t},this.tohex=function(){var t=this.params,g=this._getStatusCode();if(-1==g)throw new Error("responseStatus not supported: "+t.resstatus);if(0!=g)return b({seq:[{enum:{int:g}}]}).tohex();var r=new e(t);return b({seq:[{enum:{int:0}},{tag:{tag:"a0",explicit:!0,obj:r}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},re(gt.asn1.ocsp.OCSPResponse,gt.asn1.ASN1Object),gt.asn1.ocsp.ResponseBytes=function(t){gt.asn1.ocsp.ResponseBytes.superclass.constructor.call(this);var b=gt.asn1,a=b.DERSequence,e=b.DERObjectIdentifier,r=b.DEROctetString,n=b.ocsp.BasicOCSPResponse;this.params=null,this.setByParam=function(g){this.params=g},this.tohex=function(){var t=this.params;if("ocspBasic"!=t.restype)throw new Error("not supported responseType: "+t.restype);var i=new n(t),g=[];return g.push(new e({name:"ocspBasic"})),g.push(new r({hex:i.tohex()})),new a({array:g}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},re(gt.asn1.ocsp.ResponseBytes,gt.asn1.ASN1Object),gt.asn1.ocsp.BasicOCSPResponse=function(t){gt.asn1.ocsp.BasicOCSPResponse.superclass.constructor.call(this);var i=Error,g=gt.asn1,e=g.ASN1Object,r=g.DERSequence,n=(g.DERGeneralizedTime,g.DERTaggedObject),b=g.DERBitString,o=(g.x509.Extensions,g.x509.AlgorithmIdentifier),h=g.ocsp;h.ResponderID;_SingleResponseList=h.SingleResponseList,_ResponseData=h.ResponseData,this.params=null,this.setByParam=function(t){this.params=t},this.sign=function(){var t=this.params,e=t.tbsresp.tohex(),r=new gt.crypto.Signature({alg:t.sigalg});r.init(t.reskey),r.updateHex(e),t.sighex=r.sign()},this.tohex=function(){var t=this.params;null==t.tbsresp&&(t.tbsresp=new _ResponseData(t)),null==t.sighex&&null!=t.reskey&&this.sign();var h=[];if(h.push(t.tbsresp),h.push(new o({name:t.sigalg})),h.push(new b({hex:"00"+t.sighex})),null!=t.certs&&null!=t.certs.length){for(var c=[],q=0;q<t.certs.length;q++){var s=t.certs[q],l=null;if(mt.isASN1HEX(s))l=s;else{if(!s.match(/-----BEGIN/))throw new i("certs["+q+"] not hex or PEM");l=Ht(s)}c.push(new e({tlv:l}))}var p=new r({array:c});h.push(new n({tag:"a0",explicit:!0,obj:p}))}return new r({array:h}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},re(gt.asn1.ocsp.BasicOCSPResponse,gt.asn1.ASN1Object),gt.asn1.ocsp.ResponseData=function(t){gt.asn1.ocsp.ResponseData.superclass.constructor.call(this);var e=Error,r=gt.asn1,n=r.DERSequence,o=r.DERGeneralizedTime,b=r.DERTaggedObject,g=r.x509.Extensions,i=r.ocsp,a=i.ResponderID;_SingleResponseList=i.SingleResponseList,this.params=null,this.tohex=function(){var t=this.params;null!=t.respid&&new e("respid not specified"),null!=t.prodat&&new e("prodat not specified"),null!=t.array&&new e("array not specified");var r=[];if(r.push(new a(t.respid)),r.push(new o(t.prodat)),r.push(new _SingleResponseList(t.array)),null!=t.ext){var h=new g(t.ext);r.push(new b({tag:"a1",explicit:!0,obj:h}))}return new n({array:r}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},void 0!==t&&this.setByParam(t)},re(gt.asn1.ocsp.ResponseData,gt.asn1.ASN1Object),gt.asn1.ocsp.ResponderID=function(g){gt.asn1.ocsp.ResponderID.superclass.constructor.call(this);var t=gt,e=t.asn1,b=e.ASN1Util.newObject,r=e.x509.X500Name,n=t.lang.String.isHex,a=Error;this.params=null,this.tohex=function(){var t=this.params;if(null!=t.key){var e,o=null;if("string"==typeof t.key){if(n(t.key)&&(o=t.key),t.key.match(/-----BEGIN CERTIFICATE/))null!=(e=new oe(t.key).getExtSubjectKeyIdentifier())&&(o=e.kid.hex)}else if(t.key instanceof oe)null!=(e=t.key.getExtSubjectKeyIdentifier())&&(o=e.kid.hex);if(null==o)throw new a("wrong key member value");return b({tag:{tag:"a2",explicit:!0,obj:{octstr:{hex:o}}}}).tohex()}if(null!=t.name){var i=null;if("string"==typeof t.name&&t.name.match(/-----BEGIN CERTIFICATE/))i=new oe(t.name).getSubject();else t.name instanceof oe?i=t.name.getSubject():"object"!=typeof t.name||null==t.name.array&&null==t.name.str||(i=t.name);if(null==i)throw new a("wrong name member value");return b({tag:{tag:"a1",explicit:!0,obj:new r(i)}}).tohex()}throw new a("key or name not specified")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},void 0!==g&&this.setByParam(g)},re(gt.asn1.ocsp.ResponderID,gt.asn1.ASN1Object),gt.asn1.ocsp.SingleResponseList=function(t){gt.asn1.ocsp.SingleResponseList.superclass.constructor.call(this);var e=gt.asn1,b=e.DERSequence,a=e.ocsp.SingleResponse;this.params=null,this.tohex=function(){var t=this.params;if("object"!=typeof t||null==t.length)throw new Error("params not specified properly");for(var e=[],g=0;g<t.length;g++)e.push(new a(t[g]));return new b({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},void 0!==t&&this.setByParam(t)},re(gt.asn1.ocsp.SingleResponseList,gt.asn1.ASN1Object),gt.asn1.ocsp.SingleResponse=function(t){var e=Error,i=gt.asn1,r=i.DERSequence,g=i.DERGeneralizedTime,b=i.DERTaggedObject,n=i.ocsp,o=n.CertID,h=n.CertStatus,c=i.x509.Extensions;n.SingleResponse.superclass.constructor.call(this),this.params=null,this.tohex=function(){var q=this.params,t=[];if(null==q.certid)throw new e("certid unspecified");if(null==q.status)throw new e("status unspecified");if(null==q.thisupdate)throw new e("thisupdate unspecified");if(t.push(new o(q.certid)),t.push(new h(q.status)),t.push(new g(q.thisupdate)),null!=q.nextupdate){var n=new g(q.nextupdate);t.push(new b({tag:"a0",explicit:!0,obj:n}))}if(null!=q.ext){var p=new c(q.ext);t.push(new b({tag:"a1",explicit:!0,obj:p}))}return new r({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},void 0!==t&&this.setByParam(t)},re(gt.asn1.ocsp.SingleResponse,gt.asn1.ASN1Object),gt.asn1.ocsp.CertID=function(t){var b=gt,i=b.asn1,e=i.DEROctetString,r=i.DERInteger,n=i.DERSequence,o=i.x509.AlgorithmIdentifier,h=i.ocsp,c=(h.DEFAULT_HASH,b.crypto.Util.hashHex),a=oe,l=mt.getVbyList;h.CertID.superclass.constructor.call(this),this.DEFAULT_HASH="sha1",this.params=null,this.setByValue=function(s,t,p,q){null==q&&(q=this.DEFAULT_HASH),this.params={alg:q,issname:s,isskey:t,sbjsn:p}},this.setByCert=function(p,q,t){null==t&&(t=this.DEFAULT_HASH),this.params={alg:t,issuerCert:p,subjectCert:q}},this.getParamByCerts=function(t,e,r){null==r&&(r=this.DEFAULT_HASH);var q=new a(t),n=new a(e),s=c(q.getSubjectHex(),r),u=q.getPublicKeyHex();return{alg:r,issname:s,isskey:c(l(u,0,[1],"03",!0),r),sbjsn:n.getSerialNumberHex()}},this.tohex=function(){if("object"!=typeof this.params)throw new Error("params not set");var u,t,h,q,s=this.params;if(q=null==s.alg?this.DEFAULT_HASH:s.alg,null!=s.issuerCert&&null!=s.subjectCert){var c=this.getParamByCerts(s.issuerCert,s.subjectCert,q);u=c.issname,t=c.isskey,h=c.sbjsn}else{if(null==s.issname||null==s.isskey||null==s.sbjsn)throw new Error("required param members not defined");u=s.issname,t=s.isskey,h=s.sbjsn}var l=new o({name:q}),f=new e({hex:u}),d=new e({hex:t}),y=new r({hex:h}),v=new n({array:[l,f,d,y]});return this.hTLV=v.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&this.setByParam(t)},re(gt.asn1.ocsp.CertID,gt.asn1.ASN1Object),gt.asn1.ocsp.CertStatus=function(a){gt.asn1.ocsp.CertStatus.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if("good"==t.status)return"8000";if("unknown"==t.status)return"8200";if("revoked"==t.status){var e=[{gentime:{str:t.time}}];null!=t.reason&&e.push({tag:{tag:"a0",explicit:!0,obj:{enum:{int:t.reason}}}});var b={tag:"a1",explicit:!1,obj:{seq:e}};return gt.asn1.ASN1Util.newObject({tag:b}).tohex()}throw new Error("bad status")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(b){this.params=b},void 0!==a&&this.setByParam(a)},re(gt.asn1.ocsp.CertStatus,gt.asn1.ASN1Object),gt.asn1.ocsp.Request=function(t){var b=gt.asn1,a=b.DERSequence,e=b.ocsp;if(e.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.tohex=function(){var g=[];if(null===this.dReqCert)throw"reqCert not set";g.push(this.dReqCert);var t=new a({array:g});return this.hTLV=t.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t){var r=new e.CertID(t);this.dReqCert=r}},re(gt.asn1.ocsp.Request,gt.asn1.ASN1Object),gt.asn1.ocsp.TBSRequest=function(t){var b=gt.asn1,a=b.DERSequence,e=b.ocsp;e.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(t){for(var r=[],g=0;g<t.length;g++){var n=new e.Request(t[0]);r.push(n)}this.dRequestList=r},this.tohex=function(){var t=[];if(0!==this.version)throw"not supported version: "+this.version;if(null!==this.dRequestorName)throw"requestorName not supported";var e=new a({array:this.dRequestList});if(t.push(e),null!==this.dRequestExt)throw"requestExtensions not supported";var g=new a({array:t});return this.hTLV=g.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&void 0!==t.reqList&&this.setRequestListByParam(t.reqList)},re(gt.asn1.ocsp.TBSRequest,gt.asn1.ASN1Object),gt.asn1.ocsp.OCSPRequest=function(t){var b=gt.asn1,a=b.DERSequence,e=b.ocsp;if(e.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.tohex=function(){var g=[];if(null===this.dTbsRequest)throw"tbsRequest not set";if(g.push(this.dTbsRequest),null!==this.dOptionalSignature)throw"optionalSignature not supported";var t=new a({array:g});return this.hTLV=t.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==t&&void 0!==t.reqList){var r=new e.TBSRequest(t);this.dTbsRequest=r}},re(gt.asn1.ocsp.OCSPRequest,gt.asn1.ASN1Object),gt.asn1.ocsp.OCSPUtil={},gt.asn1.ocsp.OCSPUtil.getRequestHex=function(a,b,t){var e=gt.asn1.ocsp;void 0===t&&(t=e.DEFAULT_HASH);var g={alg:t,issuerCert:a,subjectCert:b};return new e.OCSPRequest({reqList:[g]}).tohex()},gt.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(b){var t=mt,e=t.getVbyList,r=t.getVbyListEx,n=t.getIdxbyList,g=(t.getIdxbyListEx,t.getV),o={};try{var h=r(b,0,[0],"0a");o.responseStatus=parseInt(h,16)}catch(t){}if(0!==o.responseStatus)return o;try{var i=n(b,0,[1,0,1,0,0,2,0,1]);"80"===b.substr(i,2)?o.certStatus="good":"a1"===b.substr(i,2)?(o.certStatus="revoked",o.revocationTime=It(e(b,i,[0]))):"82"===b.substr(i,2)&&(o.certStatus="unknown")}catch(t){}try{var a=n(b,0,[1,0,1,0,0,2,0,2]);o.thisUpdate=It(g(b,a))}catch(t){}try{var c=n(b,0,[1,0,1,0,0,2,0,3]);"a0"===b.substr(c,2)&&(o.nextUpdate=It(e(b,c,[0])))}catch(t){}return o},gt.asn1.ocsp.OCSPParser=function(){var g=Error,a=oe,t=new a,e=mt,i=e.getV,b=e.getTLV,r=e.getIdxbyList,n=e.getVbyList,o=e.getTLVbyList,h=e.getVbyListEx,c=e.getTLVbyListEx,l=e.getChildIdx;this.getOCSPRequest=function(t){var e=l(t,0);if(1!=e.length&&2!=e.length)throw new g("wrong number elements: "+e.length);return this.getTBSRequest(b(t,e[0]))},this.getTBSRequest=function(e){var r={},n=c(e,0,[0],"30");r.array=this.getRequestList(n);var p=c(e,0,["[2]",0],"30");return null!=p&&(r.ext=t.getExtParamArray(p)),r},this.getRequestList=function(p){for(var t=[],e=l(p,0),r=0;r<e.length;r++){p=b(p,e[r]);t.push(this.getRequest(p))}return t},this.getRequest=function(e){var n=l(e,0);if(1!=n.length&&2!=n.length)throw new g("wrong number elements: "+n.length);var p=this.getCertID(b(e,n[0]));if(2==n.length){var o=r(e,0,[1,0]);p.ext=t.getExtParamArray(b(e,o))}return p},this.getCertID=function(p){var t=l(p,0);if(4!=t.length)throw new g("wrong number elements: "+t.length);var e=new a,r={};return r.alg=e.getAlgorithmIdentifierName(b(p,t[0])),r.issname=i(p,t[1]),r.isskey=i(p,t[2]),r.sbjsn=i(p,t[3]),r},this.getOCSPResponse=function(t){var e,r=l(t,0),q=i(t,r[0]),p=parseInt(q);if(1==r.length)return{resstatus:p};var n=o(t,0,[1,0]);return(e=this.getResponseBytes(n)).resstatus=p,e},this.getResponseBytes=function(p){var t,e=l(p,0),q=o(p,0,[1,0]);t=this.getBasicOCSPResponse(q);var r=i(p,e[0]);return t.restype=gt.asn1.x509.OID.oid2name(Zt(r)),t},this.getBasicOCSPResponse=function(q){var t,e=l(q,0);t=this.getResponseData(b(q,e[0]));var u=new oe;t.alg=u.getAlgorithmIdentifierName(b(q,e[1]));var r=i(q,e[2]);t.sighex=r.substr(2);var n=h(q,0,["[0]"]);if(null!=n){for(var o=l(n,0),c=[],p=0;p<o.length;p++){var s=b(n,o[p]);c.push(s)}t.certs=c}return t},this.getResponseData=function(q){var p=l(q,0),t=p.length,e={},r=0;"a0"==q.substr(p[0],2)&&r++,e.respid=this.getResponderID(b(q,p[r++]));var n=i(q,p[r++]);if(e.prodat=It(n),e.array=this.getSingleResponseList(b(q,p[r++])),"a1"==q.substr(p[t-1],2)){var s=o(q,p[t-1],[0]),h=new oe;e.ext=h.getExtParamArray(s)}return e},this.getResponderID=function(t){var e={};if("a2"==t.substr(0,2)){var p=n(t,0,[0]);e.key=p}if("a1"==t.substr(0,2)){var q=o(t,0,[0]),r=new oe;e.name=r.getX500Name(q)}return e},this.getSingleResponseList=function(q){for(var t=l(q,0),e=[],r=0;r<t.length;r++){var n=this.getSingleResponse(b(q,t[r]));e.push(n)}return e},this.getSingleResponse=function(p){var t=l(p,0),e={},r=this.getCertID(b(p,t[0]));e.certid=r;var u=this.getCertStatus(b(p,t[1]));if(e.status=u,"18"==p.substr(t[2],2)){var q=i(p,t[2]);e.thisupdate=It(q)}for(var h=3;h<t.length;h++){if("a0"==p.substr(t[h],2)){var c=n(p,t[h],[0],"18");e.nextupdate=It(c)}if("a1"==p.substr(t[h],2)){var s=new oe,f=o(p,0,[h,0]);e.ext=s.getExtParamArray(f)}}return e},this.getCertStatus=function(p){var t={};if("8000"==p)return{status:"good"};if("8200"==p)return{status:"unknown"};if("a1"==p.substr(0,2)){t.status="revoked";var e=It(n(p,0,[0]));t.time=e}return t}},void 0!==gt&&gt||(gt={}),void 0!==gt.lang&&gt.lang||(gt.lang={}),gt.lang.String=function(){},"function"==typeof t?(yt=function(a){return Et(t.from(a,"utf8").toString("base64"))},vt=function(a){return t.from(Ft(a),"base64").toString("utf8")}):(yt=function(a){return At(kt(Yt(a)))},vt=function(a){return decodeURIComponent(Lt(Pt(a)))}),gt.lang.String.isInteger=function(a){return!!a.match(/^[0-9]+$/)||!!a.match(/^-[0-9]+$/)},gt.lang.String.isHex=function(a){return Jt(a)},gt.lang.String.isBase64=function(a){return!(!(a=a.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||a.length%4!=0)},gt.lang.String.isBase64URL=function(a){return!a.match(/[+/=]/)&&(a=Ft(a),gt.lang.String.isBase64(a))},gt.lang.String.isIntegerArray=function(a){return!!(a=a.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},gt.lang.String.isPrintable=function(a){return null!==a.match(/^[0-9A-Za-z '()+,-./:=?]*$/)},gt.lang.String.isIA5=function(a){return null!==a.match(/^[\x20-\x21\x23-\x7f]*$/)},gt.lang.String.isMail=function(a){return null!==a.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)};function Xt(g){var t=function(a){var t=a.toString(16);return 1==t.length&&(t="0"+t),t},e=function(p){var e="",a=parseInt(p,10).toString(2),r=7-a.length%7;7==r&&(r=0);for(var n="",o=0;o<r;o++)n+="0";a=n+a;for(o=0;o<a.length-1;o+=7){var q=a.substr(o,7);o!=a.length-7&&(q="1"+q),e+=t(parseInt(q,2))}return e};try{if(!g.match(/^[0-9.]+$/))return null;var r="",b=g.split("."),n=40*parseInt(b[0],10)+parseInt(b[1],10);r+=t(n),b.splice(0,2);for(var o=0;o<b.length;o++)r+=e(b[o]);return r}catch(t){return null}}function Zt(g){if(!Jt(g))return null;try{var t=[],p=g.substr(0,2),e=parseInt(p,16);t[0]=new String(Math.floor(e/40)),t[1]=new String(e%40);for(var r=g.substr(2),n=[],o=0;o<r.length/2;o++)n.push(parseInt(r.substr(2*o,2),16));var h=[],c="";for(o=0;o<n.length;o++)128&n[o]?c+=Qt((127&n[o]).toString(2),7):(c+=Qt((127&n[o]).toString(2),7),h.push(new String(parseInt(c,2))),c="");var l=t.join(".");return h.length>0&&(l=l+"."+h.join(".")),l}catch(t){return null}}var Qt=function(t,b,a){return null==a&&(a="0"),t.length>=b?t:new Array(b-t.length+1).join(a)+t};function te(t){if(t.length%2!=0)return-1;if(null==(t=t.toLowerCase()).match(/^[0-9a-f]+$/))return-1;try{var a=t.substr(0,2);if("00"==a)return parseInt(t.substr(2),16);var b=parseInt(a,16);if(b>7)return-1;var g=t.substr(2),e=parseInt(g,16).toString(2);"0"==e&&(e="00000000"),e=e.slice(0,0-b);var r=parseInt(e,2);return NaN==r?-1:r}catch(t){return-1}}function ee(t){if("number"!=typeof t)return null;if(t<0)return null;var e=Number(t).toString(2),b=8-e.length%8;8==b&&(b=0),e+=Qt("",b,"0");var r=parseInt(e,2).toString(16);return r.length%2==1&&(r="0"+r),"0"+b+r}function re(t,a){var b=function(){};b.prototype=a.prototype,t.prototype=new b,t.prototype.constructor=t,t.superclass=a.prototype,a.prototype.constructor==Object.prototype.constructor&&(a.prototype.constructor=a)}void 0!==gt&&gt||(gt={}),void 0!==gt.crypto&&gt.crypto||(gt.crypto={}),gt.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:m.algo.MD5,sha1:m.algo.SHA1,sha224:m.algo.SHA224,sha256:m.algo.SHA256,sha384:m.algo.SHA384,sha512:m.algo.SHA512,ripemd160:m.algo.RIPEMD160},this.getDigestInfoHex=function(a,b){if(void 0===this.DIGESTINFOHEAD[b])throw"alg not supported in Util.DIGESTINFOHEAD: "+b;return this.DIGESTINFOHEAD[b]+a},this.getPaddedDigestInfoHex=function(t,a,e){var r=this.getDigestInfoHex(t,a),n=e/4;if(r.length+22>n)throw"key is too short for SigAlg: keylen="+e+","+a;for(var b="0001",o="00"+r,g="",h=n-b.length-o.length,c=0;c<h;c+=2)g+="ff";return b+g+o},this.hashString=function(a,t){return new gt.crypto.MessageDigest({alg:t}).digestString(a)},this.hashHex=function(b,t){return new gt.crypto.MessageDigest({alg:t}).digestHex(b)},this.sha1=function(a){return this.hashString(a,"sha1")},this.sha256=function(a){return this.hashString(a,"sha256")},this.sha256Hex=function(a){return this.hashHex(a,"sha256")},this.sha512=function(a){return this.hashString(a,"sha512")},this.sha512Hex=function(a){return this.hashHex(a,"sha512")},this.isKey=function(a){return a instanceof ut||a instanceof gt.crypto.DSA||a instanceof gt.crypto.ECDSA}},gt.crypto.Util.md5=function(a){return new gt.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(a)},gt.crypto.Util.ripemd160=function(a){return new gt.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(a)},gt.crypto.Util.SECURERANDOMGEN=new st,gt.crypto.Util.getRandomHexOfNbytes=function(b){var a=new Array(b);return gt.crypto.Util.SECURERANDOMGEN.nextBytes(a),wt(a)},gt.crypto.Util.getRandomBigIntegerOfNbytes=function(a){return new A(gt.crypto.Util.getRandomHexOfNbytes(a),16)},gt.crypto.Util.getRandomHexOfNbits=function(t){var e=t%8,b=new Array((t-e)/8+1);return gt.crypto.Util.SECURERANDOMGEN.nextBytes(b),b[0]=(255<<e&255^255)&b[0],wt(b)},gt.crypto.Util.getRandomBigIntegerOfNbits=function(a){return new A(gt.crypto.Util.getRandomHexOfNbits(a),16)},gt.crypto.Util.getRandomBigIntegerZeroToMax=function(b){for(var a=b.bitLength();;){var t=gt.crypto.Util.getRandomBigIntegerOfNbits(a);if(-1!=b.compareTo(t))return t}},gt.crypto.Util.getRandomBigIntegerMinToMax=function(t,b){var e=t.compareTo(b);if(1==e)throw"biMin is greater than biMax";if(0==e)return t;var a=b.subtract(t);return gt.crypto.Util.getRandomBigIntegerZeroToMax(a).add(t)},gt.crypto.MessageDigest=function(t){this.setAlgAndProvider=function(g,t){if(null!==(g=gt.crypto.MessageDigest.getCanonicalAlgName(g))&&void 0===t&&(t=gt.crypto.Util.DEFAULTPROVIDER[g]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(g)&&"cryptojs"==t){try{this.md=gt.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[g].create()}catch(t){throw"setAlgAndProvider hash alg set fail alg="+g+"/"+t}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var i=m.enc.Hex.parse(t);this.md.update(i)},this.digest=function(){return this.md.finalize().toString(m.enc.Hex)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}if(-1!=":sha256:".indexOf(g)&&"sjcl"==t){try{this.md=new sjcl.hash.sha256}catch(t){throw"setAlgAndProvider hash alg set fail alg="+g+"/"+t}this.updateString=function(t){this.md.update(t)},this.updateHex=function(i){var t=sjcl.codec.hex.toBits(i);this.md.update(t)},this.digest=function(){var t=this.md.finalize();return sjcl.codec.hex.fromBits(t)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==t&&void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=gt.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},gt.crypto.MessageDigest.getCanonicalAlgName=function(a){return"string"==typeof a&&(a=(a=a.toLowerCase()).replace(/-/,"")),a},gt.crypto.MessageDigest.getHashLength=function(t){var b=gt.crypto.MessageDigest,a=b.getCanonicalAlgName(t);if(void 0===b.HASHLENGTH[a])throw"not supported algorithm: "+t;return b.HASHLENGTH[a]},gt.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},gt.crypto.Mac=function(t){this.setAlgAndProvider=function(t,i){if(null==(t=t.toLowerCase())&&(t="hmacsha1"),"hmac"!=(t=t.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+t;void 0===i&&(i=gt.crypto.Util.DEFAULTPROVIDER[t]),this.algProv=t+"/"+i;var g=t.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(g)&&"cryptojs"==i){try{var e=gt.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[g];this.mac=m.algo.HMAC.create(e,this.pass)}catch(t){throw"setAlgAndProvider hash alg set fail hashAlg="+g+"/"+t}this.updateString=function(t){this.mac.update(t)},this.updateHex=function(t){var e=m.enc.Hex.parse(t);this.mac.update(e)},this.doFinal=function(){return this.mac.finalize().toString(m.enc.Hex)},this.doFinalString=function(t){return this.updateString(t),this.doFinal()},this.doFinalHex=function(t){return this.updateHex(t),this.doFinal()}}},this.updateString=function(g){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(g){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(g){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(g){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(t){if("string"==typeof t){var g=t;return t.length%2!=1&&t.match(/^[0-9A-Fa-f]+$/)||(g=Tt(t)),void(this.pass=m.enc.Hex.parse(g))}if("object"!=typeof t)throw"KJUR.crypto.Mac unsupported password type: "+t;g=null;if(void 0!==t.hex){if(t.hex.length%2!=0||!t.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+t.hex;g=t.hex}if(void 0!==t.utf8&&(g=Dt(t.utf8)),void 0!==t.rstr&&(g=Tt(t.rstr)),void 0!==t.b64&&(g=E(t.b64)),void 0!==t.b64u&&(g=Pt(t.b64u)),null==g)throw"KJUR.crypto.Mac unsupported password type: "+t;this.pass=m.enc.Hex.parse(g)},void 0!==t&&(void 0!==t.pass&&this.setPassword(t.pass),void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=gt.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},gt.crypto.Signature=function(t){var q=null;if(this._setAlgNames=function(){var s=this.algName.match(/^(.+)with(.+)$/);s&&(this.mdAlgName=s[1].toLowerCase(),this.pubkeyAlgName=s[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(t,e){for(var r="",n=e/4-t.length,u=0;u<n;u++)r+="0";return r+t},this.setAlgAndProvider=function(u,t){if(this._setAlgNames(),"cryptojs/jsrsa"!=t)throw new Error("provider not supported: "+t);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new gt.crypto.MessageDigest({alg:this.mdAlgName})}catch(t){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+t)}this.init=function(t,e){var r=null;try{r=void 0===e?ne.getKey(t):ne.getKey(t,e)}catch(t){throw"init failed:"+t}if(!0===r.isPrivate)this.prvKey=r,this.state="SIGN";else{if(!0!==r.isPublic)throw"init failed.:"+r;this.pubKey=r,this.state="VERIFY"}},this.updateString=function(t){this.md.updateString(t)},this.updateHex=function(t){this.md.updateHex(t)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==gt.crypto.ECDSA&&(this.prvKey=new gt.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof ut&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof ut&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof gt.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof gt.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(t){return this.updateString(t),this.sign()},this.signHex=function(t){return this.updateHex(t),this.sign()},this.verify=function(t){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==gt.crypto.ECDSA&&(this.pubKey=new gt.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof ut&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,t,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof ut&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(void 0!==gt.crypto.ECDSA&&this.pubKey instanceof gt.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(void 0!==gt.crypto.DSA&&this.pubKey instanceof gt.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(s,t){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(s){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(s){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(s){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(s){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(s){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=t,void 0!==t&&(void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov?this.provName=gt.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=t.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==t.psssaltlen&&(this.pssSaltLen=t.psssaltlen),void 0!==t.prvkeypem)){if(void 0!==t.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{q=ne.getKey(t.prvkeypem);this.init(q)}catch(t){throw"fatal error to load pem private key: "+t}}},gt.crypto.Cipher=function(a){},gt.crypto.Cipher.encrypt=function(t,e,r){if(e instanceof ut&&e.isPublic){var n=gt.crypto.Cipher.getAlgByKeyAndName(e,r);if("RSA"===n)return e.encrypt(t);if("RSAOAEP"===n)return e.encryptOAEP(t,"sha1");var b=n.match(/^RSAOAEP(\d+)$/);if(null!==b)return e.encryptOAEP(t,"sha"+b[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+r}throw"Cipher.encrypt: unsupported key or algorithm"},gt.crypto.Cipher.decrypt=function(t,e,r){if(e instanceof ut&&e.isPrivate){var n=gt.crypto.Cipher.getAlgByKeyAndName(e,r);if("RSA"===n)return e.decrypt(t);if("RSAOAEP"===n)return e.decryptOAEP(t,"sha1");var b=n.match(/^RSAOAEP(\d+)$/);if(null!==b)return e.decryptOAEP(t,"sha"+b[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+r}throw"Cipher.decrypt: unsupported key or algorithm"},gt.crypto.Cipher.getAlgByKeyAndName=function(b,a){if(b instanceof ut){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(a))return a;if(null==a)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+a}throw"getAlgByKeyAndName: not supported algorithm name: "+a},gt.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040022":"secp384r1","2b81040023":"secp521r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==gt&&gt||(gt={}),void 0!==gt.crypto&&gt.crypto||(gt.crypto={}),gt.crypto.ECDSA=function(t){var e=Error,r=A,n=lt,o=gt.crypto.ECDSA,h=gt.crypto.ECParameterDB,c=o.getName,q=mt,l=q.getVbyListEx,f=q.isASN1HEX,a=new st;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(t){return new r(t.bitLength(),a).mod(t.subtract(r.ONE)).add(r.ONE)},this.setNamedCurve=function(t){this.ecparams=h.getByName(t),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=t},this.setPrivateKeyHex=function(t){this.isPrivate=!0,this.prvKeyHex=t},this.setPublicKeyHex=function(t){this.isPublic=!0,this.pubKeyHex=t},this.getPublicKeyXYHex=function(){var t=this.pubKeyHex;if("04"!==t.substr(0,2))throw"this method supports uncompressed format(04) only";var s=this.ecparams.keycharlen;if(t.length!==2+2*s)throw"malformed public key hex length";var e={};return e.x=t.substr(2,s),e.y=t.substr(2+s),e},this.getShortNISTPCurveName=function(){var t=this.curveName;return"secp256r1"===t||"NIST P-256"===t||"P-256"===t||"prime256v1"===t?"P-256":"secp384r1"===t||"NIST P-384"===t||"P-384"===t?"P-384":"secp521r1"===t||"NIST P-521"===t||"P-521"===t?"P-521":null},this.generateKeyPairHex=function(){var s=this.ecparams.n,u=this.getBigRandom(s),t=this.ecparams.keycharlen,e=("0000000000"+u.toString(16)).slice(-t);return this.setPrivateKeyHex(e),{ecprvhex:e,ecpubhex:this.generatePublicKeyHex()}},this.generatePublicKeyHex=function(){var u=new r(this.prvKeyHex,16),t=this.ecparams.G.multiply(u),e=t.getX().toBigInteger(),s=t.getY().toBigInteger(),n=this.ecparams.keycharlen,o="04"+("0000000000"+e.toString(16)).slice(-n)+("0000000000"+s.toString(16)).slice(-n);return this.setPublicKeyHex(o),o},this.signWithMessageHash=function(t){return this.signHex(t,this.prvKeyHex)},this.signHex=function(t,u){var e=new r(u,16),n=this.ecparams.n,h=new r(t.substring(0,this.ecparams.keycharlen),16);do{var c=this.getBigRandom(n),l=this.ecparams.G.multiply(c).getX().toBigInteger().mod(n)}while(l.compareTo(r.ZERO)<=0);var f=c.modInverse(n).multiply(h.add(e.multiply(l))).mod(n);return o.biRSSigToASN1Sig(l,f)},this.sign=function(t,e){var n=e,u=this.ecparams.n,o=r.fromByteArrayUnsigned(t);do{var h=this.getBigRandom(u),c=this.ecparams.G.multiply(h).getX().toBigInteger().mod(u)}while(c.compareTo(A.ZERO)<=0);var l=h.modInverse(u).multiply(o.add(n.multiply(c))).mod(u);return this.serializeSig(c,l)},this.verifyWithMessageHash=function(s,t){return this.verifyHex(s,t,this.pubKeyHex)},this.verifyHex=function(t,e,u){try{var h,c,l=o.parseSigHex(e);h=l.r,c=l.s;var f=n.decodeFromHex(this.ecparams.curve,u),d=new r(t.substring(0,this.ecparams.keycharlen),16);return this.verifyRaw(d,h,c,f)}catch(t){return!1}},this.verify=function(t,e,u){var o,h,c;if(Bitcoin.Util.isArray(e)){var l=this.parseSig(e);o=l.r,h=l.s}else{if("object"!=typeof e||!e.r||!e.s)throw"Invalid value for signature";o=e.r,h=e.s}if(u instanceof lt)c=u;else{if(!Bitcoin.Util.isArray(u))throw"Invalid format for pubkey value, must be byte array or ECPointFp";c=n.decodeFrom(this.ecparams.curve,u)}var f=r.fromByteArrayUnsigned(t);return this.verifyRaw(f,o,h,c)},this.verifyRaw=function(t,e,n,o){var h=this.ecparams.n,c=this.ecparams.G;if(e.compareTo(r.ONE)<0||e.compareTo(h)>=0)return!1;if(n.compareTo(r.ONE)<0||n.compareTo(h)>=0)return!1;var l=n.modInverse(h),f=t.multiply(l).mod(h),u=e.multiply(l).mod(h);return c.multiply(f).add(o.multiply(u)).getX().toBigInteger().mod(h).equals(e)},this.serializeSig=function(t,u){var e=t.toByteArraySigned(),r=u.toByteArraySigned(),n=[];return n.push(2),n.push(e.length),(n=n.concat(e)).push(2),n.push(r.length),(n=n.concat(r)).unshift(n.length),n.unshift(48),n},this.parseSig=function(t){var e;if(48!=t[0])throw new Error("Signature not a valid DERSequence");if(2!=t[e=2])throw new Error("First element in signature must be a DERInteger");var n=t.slice(e+2,e+2+t[e+1]);if(2!=t[e+=2+t[e+1]])throw new Error("Second element in signature must be a DERInteger");var o=t.slice(e+2,e+2+t[e+1]);return e+=2+t[e+1],{r:r.fromByteArrayUnsigned(n),s:r.fromByteArrayUnsigned(o)}},this.parseSigCompact=function(t){if(65!==t.length)throw"Signature has the wrong length";var e=t[0]-27;if(e<0||e>7)throw"Invalid signature type";var n=this.ecparams.n;return{r:r.fromByteArrayUnsigned(t.slice(1,33)).mod(n),s:r.fromByteArrayUnsigned(t.slice(33,65)).mod(n),i:e}},this.readPKCS5PrvKeyHex=function(u){if(!1===f(u))throw new Error("not ASN.1 hex string");var t,e,r;try{t=l(u,0,["[0]",0],"06"),e=l(u,0,[1],"04");try{r=l(u,0,["[1]",0],"03")}catch(t){}}catch(t){throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=c(t),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r),this.setPrivateKeyHex(e),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(t){if(!1===f(t))throw new e("not ASN.1 hex string");var r,u,n;try{l(t,0,[1,0],"06"),r=l(t,0,[1,1],"06"),u=l(t,0,[2,0,1],"04");try{n=l(t,0,[2,0,"[1]",0],"03")}catch(t){}}catch(t){throw new e("malformed PKCS#8 plain ECC private key")}if(this.curveName=c(r),void 0===this.curveName)throw new e("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(n),this.setPrivateKeyHex(u),this.isPublic=!1},this.readPKCS8PubKeyHex=function(u){if(!1===f(u))throw new e("not ASN.1 hex string");var t,r;try{l(u,0,[0,0],"06"),t=l(u,0,[0,1],"06"),r=l(u,0,[1],"03")}catch(t){throw new e("malformed PKCS#8 ECC public key")}if(this.curveName=c(t),null===this.curveName)throw new e("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(r)},this.readCertPubKeyHex=function(t,r){if(!1===f(t))throw new e("not ASN.1 hex string");var n,u;try{n=l(t,0,[0,5,0,1],"06"),u=l(t,0,[0,5,1],"03")}catch(t){throw new e("malformed X.509 certificate ECC public key")}if(this.curveName=c(n),null===this.curveName)throw new e("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(u)},void 0!==t&&void 0!==t.curve&&(this.curveName=t.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==t&&(void 0!==t.prv&&this.setPrivateKeyHex(t.prv),void 0!==t.pub&&this.setPublicKeyHex(t.pub))},gt.crypto.ECDSA.parseSigHex=function(a){var b=gt.crypto.ECDSA.parseSigHexInHexRS(a);return{r:new A(b.r,16),s:new A(b.s,16)}},gt.crypto.ECDSA.parseSigHexInHexRS=function(t){var e=mt,i=e.getChildIdx,g=e.getV;if(e.checkStrictDER(t,0),"30"!=t.substr(0,2))throw new Error("signature is not a ASN.1 sequence");var r=i(t,0);if(2!=r.length)throw new Error("signature shall have two elements");var n=r[0],o=r[1];if("02"!=t.substr(n,2))throw new Error("1st item not ASN.1 integer");if("02"!=t.substr(o,2))throw new Error("2nd item not ASN.1 integer");return{r:g(t,n),s:g(t,o)}},gt.crypto.ECDSA.asn1SigToConcatSig=function(t){var e=gt.crypto.ECDSA.parseSigHexInHexRS(t),b=e.r,a=e.s;if(b.length>=130&&b.length<=134){if(b.length%2!=0)throw Error("unknown ECDSA sig r length error");if(a.length%2!=0)throw Error("unknown ECDSA sig s length error");"00"==b.substr(0,2)&&(b=b.substr(2)),"00"==a.substr(0,2)&&(a=a.substr(2));var r=Math.max(b.length,a.length);return(b=("000000"+b).slice(-r))+(a=("000000"+a).slice(-r))}if("00"==b.substr(0,2)&&b.length%32==2&&(b=b.substr(2)),"00"==a.substr(0,2)&&a.length%32==2&&(a=a.substr(2)),b.length%32==30&&(b="00"+b),a.length%32==30&&(a="00"+a),b.length%32!=0)throw Error("unknown ECDSA sig r length error");if(a.length%32!=0)throw Error("unknown ECDSA sig s length error");return b+a},gt.crypto.ECDSA.concatSigToASN1Sig=function(a){if(a.length%4!=0)throw Error("unknown ECDSA concatinated r-s sig length error");var t=a.substr(0,a.length/2),b=a.substr(a.length/2);return gt.crypto.ECDSA.hexRSSigToASN1Sig(t,b)},gt.crypto.ECDSA.hexRSSigToASN1Sig=function(b,a){var t=new A(b,16),e=new A(a,16);return gt.crypto.ECDSA.biRSSigToASN1Sig(t,e)},gt.crypto.ECDSA.biRSSigToASN1Sig=function(t,e){var r=gt.asn1,b=new r.DERInteger({bigint:t}),a=new r.DERInteger({bigint:e});return new r.DERSequence({array:[b,a]}).tohex()},gt.crypto.ECDSA.getName=function(a){return"2b8104001f"===a?"secp192k1":"2a8648ce3d030107"===a?"secp256r1":"2b8104000a"===a?"secp256k1":"2b81040021"===a?"secp224r1":"2b81040022"===a?"secp384r1":"2b81040023"===a?"secp521r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(a)?"secp256r1":-1!=="|secp256k1|".indexOf(a)?"secp256k1":-1!=="|secp224r1|NIST P-224|P-224|".indexOf(a)?"secp224r1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(a)?"secp384r1":-1!=="|secp521r1|NIST P-521|P-521|".indexOf(a)?"secp521r1":null},void 0!==gt&&gt||(gt={}),void 0!==gt.crypto&&gt.crypto||(gt.crypto={}),gt.crypto.ECParameterDB=new function(){var b={},t={};function a(t){return new A(t,16)}this.getByName=function(e){var r=e;if(void 0!==t[r]&&(r=t[e]),void 0!==b[r])return b[r];throw"unregistered EC curve name: "+r},this.regist=function(e,r,n,g,o,h,c,l,f,u,d,y){b[e]={};var s=a(n),v=a(g),m=a(o),x=a(h),S=a(c),w=new ft(s,v,m),q=w.decodePointHex("04"+l+f);b[e].name=e,b[e].keylen=r,b[e].keycharlen=2*Math.ceil(r/8),b[e].curve=w,b[e].G=q,b[e].n=x,b[e].h=S,b[e].oid=d,b[e].info=y;for(var E=0;E<u.length;E++)t[u[E]]=e}},gt.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),gt.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),gt.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),gt.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),gt.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),gt.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),gt.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),gt.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),gt.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),gt.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","00C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),void 0!==gt&&gt||(gt={}),void 0!==gt.crypto&&gt.crypto||(gt.crypto={}),gt.crypto.DSA=function(){var b=mt,t=(b.getVbyList,b.getVbyListEx),a=b.isASN1HEX,e=A;this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(t,i,e,r,n){this.isPrivate=!0,this.p=t,this.q=i,this.g=e,this.y=r,this.x=n},this.setPrivateHex=function(i,g,t,e,r){var n,o,h,c,l;n=new A(i,16),o=new A(g,16),h=new A(t,16),c="string"==typeof e&&e.length>1?new A(e,16):null,l=new A(r,16),this.setPrivate(n,o,h,c,l)},this.setPublic=function(i,t,e,r){this.isPublic=!0,this.p=i,this.q=t,this.g=e,this.y=r,this.x=null},this.setPublicHex=function(t,e,i,r){var g,n,o,h;g=new A(t,16),n=new A(e,16),o=new A(i,16),h=new A(r,16),this.setPublic(g,n,o,h)},this.signWithMessageHash=function(t){var i=this.p,e=this.q,r=this.g,n=(this.y,this.x),o=gt.crypto.Util.getRandomBigIntegerMinToMax(A.ONE.add(A.ONE),e.subtract(A.ONE)),h=new A(t.substr(0,e.bitLength()/4),16),c=r.modPow(o,i).mod(e),l=o.modInverse(e).multiply(h.add(n.multiply(c))).mod(e);return gt.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:c}},{int:{bigint:l}}]})},this.verifyWithMessageHash=function(t,e){var r=this.p,n=this.q,o=this.g,u=this.y,h=this.parseASN1Signature(e),c=h[0],l=h[1],f=new A(t.substr(0,n.bitLength()/4),16);if(A.ZERO.compareTo(c)>0||c.compareTo(n)>0)throw"invalid DSA signature";if(A.ZERO.compareTo(l)>=0||l.compareTo(n)>0)throw"invalid DSA signature";var d=l.modInverse(n),y=f.multiply(d).mod(n),i=c.multiply(d).mod(n);return 0==o.modPow(y,r).multiply(u.modPow(i,r)).mod(r).mod(n).compareTo(c)},this.parseASN1Signature=function(r){try{return[new e(t(r,0,[0],"02"),16),new e(t(r,0,[1],"02"),16)]}catch(t){throw new Error("malformed ASN.1 DSA signature")}},this.readPKCS5PrvKeyHex=function(e){var r,i,g,n,o;if(!1===a(e))throw new Error("not ASN.1 hex string");try{r=t(e,0,[1],"02"),i=t(e,0,[2],"02"),g=t(e,0,[3],"02"),n=t(e,0,[4],"02"),o=t(e,0,[5],"02")}catch(t){throw new Error("malformed PKCS#1/5 plain DSA private key")}this.setPrivateHex(r,i,g,n,o)},this.readPKCS8PrvKeyHex=function(e){var r,i,g,n;if(!1===a(e))throw new Error("not ASN.1 hex string");try{r=t(e,0,[1,1,0],"02"),i=t(e,0,[1,1,1],"02"),g=t(e,0,[1,1,2],"02"),n=t(e,0,[2,0],"02")}catch(t){throw new Error("malformed PKCS#8 plain DSA private key")}this.setPrivateHex(r,i,g,null,n)},this.readPKCS8PubKeyHex=function(e){var r,i,g,n;if(!1===a(e))throw new Error("not ASN.1 hex string");try{r=t(e,0,[0,1,0],"02"),i=t(e,0,[0,1,1],"02"),g=t(e,0,[0,1,2],"02"),n=t(e,0,[1,0],"02")}catch(t){throw new Error("malformed PKCS#8 DSA public key")}this.setPublicHex(r,i,g,n)},this.readCertPubKeyHex=function(e,r){var n,i,g,o;if(!1===a(e))throw new Error("not ASN.1 hex string");try{n=t(e,0,[0,5,0,1,0],"02"),i=t(e,0,[0,5,0,1,1],"02"),g=t(e,0,[0,5,0,1,2],"02"),o=t(e,0,[0,5,1,0],"02")}catch(t){throw new Error("malformed X.509 certificate DSA public key")}this.setPublicHex(n,i,g,o)}};var ne=function(){var t=function(p,t,q){return e(m.AES,p,t,q)},e=function(s,t,u,q){var e=m.enc.Hex.parse(t),r=m.enc.Hex.parse(u),p=m.enc.Hex.parse(q),n={};n.key=r,n.iv=p,n.ciphertext=e;var o=s.decrypt(n,r,{iv:p});return m.enc.Hex.stringify(o)},r=function(p,t,q){return g(m.AES,p,t,q)},g=function(t,e,r,q){var s=m.enc.Hex.parse(e),n=m.enc.Hex.parse(r),p=m.enc.Hex.parse(q),o=t.encrypt(s,n,{iv:p}),h=m.enc.Hex.parse(o.toString());return m.enc.Base64.stringify(h)},i={"AES-256-CBC":{proc:t,eproc:r,keylen:32,ivlen:16},"AES-192-CBC":{proc:t,eproc:r,keylen:24,ivlen:16},"AES-128-CBC":{proc:t,eproc:r,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(p,t,q){return e(m.TripleDES,p,t,q)},eproc:function(p,t,q){return g(m.TripleDES,p,t,q)},keylen:24,ivlen:8},"DES-CBC":{proc:function(p,t,q){return e(m.DES,p,t,q)},eproc:function(p,t,q){return g(m.DES,p,t,q)},keylen:8,ivlen:8}},n=function(t){var e={},q=t.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));q&&(e.cipher=q[1],e.ivsalt=q[2]);var p=t.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));p&&(e.type=p[1]);var u=-1,r=0;-1!=t.indexOf("\r\n\r\n")&&(u=t.indexOf("\r\n\r\n"),r=2),-1!=t.indexOf("\n\n")&&(u=t.indexOf("\n\n"),r=1);var n=t.indexOf("-----END");if(-1!=u&&-1!=n){var o=t.substring(u+2*r,n-r);o=o.replace(/\s+/g,""),e.data=o}return e},o=function(q,t,p){for(var e=p.substring(0,16),r=m.enc.Hex.parse(e),n=m.enc.Utf8.parse(t),u=i[q].keylen+i[q].ivlen,o="",h=null;;){var s=m.algo.MD5.create();if(null!=h&&s.update(h),s.update(n),s.update(r),h=s.finalize(),(o+=m.enc.Hex.stringify(h)).length>=2*u)break}var c={};return c.keyhex=o.substr(0,2*i[q].keylen),c.ivhex=o.substr(2*i[q].keylen,2*i[q].ivlen),c},b=function(p,t,e,r){var s=m.enc.Base64.parse(p),q=m.enc.Hex.stringify(s);return(0,i[t].proc)(q,e,r)};return{version:"1.0.0",parsePKCS5PEM:function(p){return n(p)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(q,p,t){return o(q,p,t)},decryptKeyB64:function(p,t,q,s){return b(p,t,q,s)},getDecryptedKeyHex:function(t,e){var q=n(t),r=(q.type,q.cipher),p=q.ivsalt,s=q.data,h=o(r,e,p).keyhex;return b(s,r,h,p)},getEncryptedPKCS5PEMFromPrvKeyHex:function(t,s,e,r,n){var p="";if(void 0!==r&&null!=r||(r="AES-256-CBC"),void 0===i[r])throw new Error("KEYUTIL unsupported algorithm: "+r);if(void 0===n||null==n){var u=function(p){var t=m.lib.WordArray.random(p);return m.enc.Hex.stringify(t)}(i[r].ivlen);n=u.toUpperCase()}var h=function(p,s,q,u){return(0,i[s].eproc)(p,q,u)}(s,r,o(r,e,n).keyhex,n);p="-----BEGIN "+t+" PRIVATE KEY-----\r\n";return p+="Proc-Type: 4,ENCRYPTED\r\n",p+="DEK-Info: "+r+","+n+"\r\n",p+="\r\n",p+=h.replace(/(.{64})/g,"$1\r\n"),p+="\r\n-----END "+t+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(t){var e=mt,r=e.getChildIdx,n=e.getV,o={},h=r(t,0);if(2!=h.length)throw new Error("malformed format: SEQUENCE(0).items != 2: "+h.length);o.ciphertext=n(t,h[1]);var c=r(t,h[0]);if(2!=c.length)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+c.length);if("2a864886f70d01050d"!=n(t,c[0]))throw new Error("this only supports pkcs5PBES2");var p=r(t,c[1]);if(2!=c.length)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+p.length);var q=r(t,p[1]);if(2!=q.length)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+q.length);if("2a864886f70d0307"!=n(t,q[0]))throw"this only supports TripleDES";o.encryptionSchemeAlg="TripleDES",o.encryptionSchemeIV=n(t,q[1]);var s=r(t,p[0]);if(2!=s.length)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+s.length);if("2a864886f70d01050c"!=n(t,s[0]))throw new Error("this only supports pkcs5PBKDF2");var l=r(t,s[1]);if(l.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+l.length);o.pbkdf2Salt=n(t,l[0]);var u=n(t,l[1]);try{o.pbkdf2Iter=parseInt(u,16)}catch(t){throw new Error("malformed format pbkdf2Iter: "+u)}return o},getPBKDF2KeyHexFromParam:function(u,p){var t=m.enc.Hex.parse(u.pbkdf2Salt),q=u.pbkdf2Iter,s=m.PBKDF2(p,t,{keySize:6,iterations:q});return m.enc.Hex.stringify(s)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(t,e){var r=Ht(t,"ENCRYPTED PRIVATE KEY"),p=this.parseHexOfEncryptedPKCS8(r),u=ne.getPBKDF2KeyHexFromParam(p,e),n={};n.ciphertext=m.enc.Hex.parse(p.ciphertext);var o=m.enc.Hex.parse(u),s=m.enc.Hex.parse(p.encryptionSchemeIV),h=m.TripleDES.decrypt(n,o,{iv:s});return m.enc.Hex.stringify(h)},getKeyFromEncryptedPKCS8PEM:function(s,q){var p=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(s,q);return this.getKeyFromPlainPrivatePKCS8Hex(p)},parsePlainPrivatePKCS8Hex:function(s){var t=mt,u=t.getChildIdx,e=t.getV,q={algparam:null};if("30"!=s.substr(0,2))throw new Error("malformed plain PKCS8 private key(code:001)");var r=u(s,0);if(r.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if("30"!=s.substr(r[1],2))throw new Error("malformed PKCS8 private key(code:003)");var p=u(s,r[1]);if(2!=p.length)throw new Error("malformed PKCS8 private key(code:004)");if("06"!=s.substr(p[0],2))throw new Error("malformed PKCS8 private key(code:005)");if(q.algoid=e(s,p[0]),"06"==s.substr(p[1],2)&&(q.algparam=e(s,p[1])),"04"!=s.substr(r[2],2))throw new Error("malformed PKCS8 private key(code:006)");return q.keyidx=t.getVidx(s,r[2]),q},getKeyFromPlainPrivatePKCS8PEM:function(q){var p=Ht(q,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(p)},getKeyFromPlainPrivatePKCS8Hex:function(p){var t,q=this.parsePlainPrivatePKCS8Hex(p);if("2a864886f70d010101"==q.algoid)t=new ut;else if("2a8648ce380401"==q.algoid)t=new gt.crypto.DSA;else{if("2a8648ce3d0201"!=q.algoid)throw new Error("unsupported private key algorithm");t=new gt.crypto.ECDSA}return t.readPKCS8PrvKeyHex(p),t},_getKeyFromPublicPKCS8Hex:function(q){var p,t=mt.getVbyList(q,0,[0,0],"06");if("2a864886f70d010101"===t)p=new ut;else if("2a8648ce380401"===t)p=new gt.crypto.DSA;else{if("2a8648ce3d0201"!==t)throw new Error("unsupported PKCS#8 public key hex");p=new gt.crypto.ECDSA}return p.readPKCS8PubKeyHex(q),p},parsePublicRawRSAKeyHex:function(t){var u=mt,e=u.getChildIdx,s=u.getV,p={};if("30"!=t.substr(0,2))throw new Error("malformed RSA key(code:001)");var q=e(t,0);if(2!=q.length)throw new Error("malformed RSA key(code:002)");if("02"!=t.substr(q[0],2))throw new Error("malformed RSA key(code:003)");if(p.n=s(t,q[0]),"02"!=t.substr(q[1],2))throw new Error("malformed RSA key(code:004)");return p.e=s(t,q[1]),p},parsePublicPKCS8Hex:function(t){var e=mt,u=e.getChildIdx,s=e.getV,q={algparam:null},r=u(t,0);if(2!=r.length)throw new Error("outer DERSequence shall have 2 elements: "+r.length);var n=r[0];if("30"!=t.substr(n,2))throw new Error("malformed PKCS8 public key(code:001)");var p=u(t,n);if(2!=p.length)throw new Error("malformed PKCS8 public key(code:002)");if("06"!=t.substr(p[0],2))throw new Error("malformed PKCS8 public key(code:003)");if(q.algoid=s(t,p[0]),"06"==t.substr(p[1],2)?q.algparam=s(t,p[1]):"30"==t.substr(p[1],2)&&(q.algparam={},q.algparam.p=e.getVbyList(t,p[1],[0],"02"),q.algparam.q=e.getVbyList(t,p[1],[1],"02"),q.algparam.g=e.getVbyList(t,p[1],[2],"02")),"03"!=t.substr(r[1],2))throw new Error("malformed PKCS8 public key(code:004)");return q.key=s(t,r[1]).substr(2),q}}}();ne.getKey=function(t,e,r){var n=(x=mt).getChildIdx,o=(x.getV,x.getVbyList),h=gt.crypto,i=h.ECDSA,c=h.DSA,l=ut,f=Ht,d=ne;if(void 0!==l&&t instanceof l)return t;if(void 0!==i&&t instanceof i)return t;if(void 0!==c&&t instanceof c)return t;if(void 0!==t.curve&&void 0!==t.xy&&void 0===t.d)return new i({pub:t.xy,curve:t.curve});if(void 0!==t.curve&&void 0!==t.d)return new i({prv:t.d,curve:t.curve});if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d)return(T=new l).setPublic(t.n,t.e),T;if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.co&&void 0===t.qi)return(T=new l).setPrivateEx(t.n,t.e,t.d,t.p,t.q,t.dp,t.dq,t.co),T;if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0===t.p)return(T=new l).setPrivate(t.n,t.e,t.d),T;if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0===t.x)return(T=new c).setPublic(t.p,t.q,t.g,t.y),T;if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0!==t.x)return(T=new c).setPrivate(t.p,t.q,t.g,t.y,t.x),T;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d)return(T=new l).setPublic(Pt(t.n),Pt(t.e)),T;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.qi)return(T=new l).setPrivateEx(Pt(t.n),Pt(t.e),Pt(t.d),Pt(t.p),Pt(t.q),Pt(t.dp),Pt(t.dq),Pt(t.qi)),T;if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d)return(T=new l).setPrivate(Pt(t.n),Pt(t.e),Pt(t.d)),T;if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0===t.d){var y=(R=new i({curve:t.crv})).ecparams.keycharlen,u="04"+("0000000000"+Pt(t.x)).slice(-y)+("0000000000"+Pt(t.y)).slice(-y);return R.setPublicKeyHex(u),R}if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0!==t.d){y=(R=new i({curve:t.crv})).ecparams.keycharlen,u="04"+("0000000000"+Pt(t.x)).slice(-y)+("0000000000"+Pt(t.y)).slice(-y);var b=("0000000000"+Pt(t.d)).slice(-y);return R.setPublicKeyHex(u),R.setPrivateKeyHex(b),R}if("pkcs5prv"===r){var v,m=t,x=mt;if(9===(v=n(m,0)).length)(T=new l).readPKCS5PrvKeyHex(m);else if(6===v.length)(T=new c).readPKCS5PrvKeyHex(m);else{if(!(v.length>2&&"04"===m.substr(v[1],2)))throw new Error("unsupported PKCS#1/5 hexadecimal key");(T=new i).readPKCS5PrvKeyHex(m)}return T}if("pkcs8prv"===r)return T=d.getKeyFromPlainPrivatePKCS8Hex(t);if("pkcs8pub"===r)return d._getKeyFromPublicPKCS8Hex(t);if("x509pub"===r)return oe.getPublicKeyFromCertHex(t);if(-1!=t.indexOf("-END CERTIFICATE-",0)||-1!=t.indexOf("-END X509 CERTIFICATE-",0)||-1!=t.indexOf("-END TRUSTED CERTIFICATE-",0))return oe.getPublicKeyFromCertPEM(t);if(-1!=t.indexOf("-END PUBLIC KEY-")){var S=Ht(t,"PUBLIC KEY");return d._getKeyFromPublicPKCS8Hex(S)}if(-1!=t.indexOf("-END RSA PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){var w=f(t,"RSA PRIVATE KEY");return d.getKey(w,null,"pkcs5prv")}if(-1!=t.indexOf("-END DSA PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){var E=o(O=f(t,"DSA PRIVATE KEY"),0,[1],"02"),F=o(O,0,[2],"02"),P=o(O,0,[3],"02"),D=o(O,0,[4],"02"),s=o(O,0,[5],"02");return(T=new c).setPrivate(new A(E,16),new A(F,16),new A(P,16),new A(D,16),new A(s,16)),T}if(-1!=t.indexOf("-END EC PRIVATE KEY-")&&-1==t.indexOf("4,ENCRYPTED")){w=f(t,"EC PRIVATE KEY");return d.getKey(w,null,"pkcs5prv")}if(-1!=t.indexOf("-END PRIVATE KEY-"))return d.getKeyFromPlainPrivatePKCS8PEM(t);if(-1!=t.indexOf("-END RSA PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var I=d.getDecryptedKeyHex(t,e),C=new ut;return C.readPKCS5PrvKeyHex(I),C}if(-1!=t.indexOf("-END EC PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var R,T=o(O=d.getDecryptedKeyHex(t,e),0,[1],"04"),B=o(O,0,[2,0],"06"),N=o(O,0,[3,0],"03").substr(2);if(void 0===gt.crypto.OID.oidhex2name[B])throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+B);return(R=new i({curve:gt.crypto.OID.oidhex2name[B]})).setPublicKeyHex(N),R.setPrivateKeyHex(T),R.isPublic=!1,R}if(-1!=t.indexOf("-END DSA PRIVATE KEY-")&&-1!=t.indexOf("4,ENCRYPTED")){var O;E=o(O=d.getDecryptedKeyHex(t,e),0,[1],"02"),F=o(O,0,[2],"02"),P=o(O,0,[3],"02"),D=o(O,0,[4],"02"),s=o(O,0,[5],"02");return(T=new c).setPrivate(new A(E,16),new A(F,16),new A(P,16),new A(D,16),new A(s,16)),T}if(-1!=t.indexOf("-END ENCRYPTED PRIVATE KEY-"))return d.getKeyFromEncryptedPKCS8PEM(t,e);throw new Error("not supported argument")},ne.generateKeypair=function(a,t){if("RSA"==a){var b=t;(n=new ut).generate(b,"10001"),n.isPrivate=!0,n.isPublic=!0;var e=new ut,r=n.n.toString(16),i=n.e.toString(16);return e.setPublic(r,i),e.isPrivate=!1,e.isPublic=!0,(o={}).prvKeyObj=n,o.pubKeyObj=e,o}if("EC"==a){var n,o,h=t,c=new gt.crypto.ECDSA({curve:h}).generateKeyPairHex();return(n=new gt.crypto.ECDSA({curve:h})).setPublicKeyHex(c.ecpubhex),n.setPrivateKeyHex(c.ecprvhex),n.isPrivate=!0,n.isPublic=!1,(e=new gt.crypto.ECDSA({curve:h})).setPublicKeyHex(c.ecpubhex),e.isPrivate=!1,e.isPublic=!0,(o={}).prvKeyObj=n,o.pubKeyObj=e,o}throw new Error("unknown algorithm: "+a)},ne.getPEM=function(b,t,e,r,q,n){var o=gt,h=o.asn1,c=h.DERObjectIdentifier,l=h.DERInteger,f=h.ASN1Util.newObject,d=h.x509.SubjectPublicKeyInfo,y=o.crypto,u=y.DSA,v=y.ECDSA,x=ut;function S(s){return f({seq:[{int:0},{int:{bigint:s.n}},{int:s.e},{int:{bigint:s.d}},{int:{bigint:s.p}},{int:{bigint:s.q}},{int:{bigint:s.dmp1}},{int:{bigint:s.dmq1}},{int:{bigint:s.coeff}}]})}function w(t){return f({seq:[{int:1},{octstr:{hex:t.prvKeyHex}},{tag:["a0",!0,{oid:{name:t.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]}]})}function E(s){return f({seq:[{int:0},{int:{bigint:s.p}},{int:{bigint:s.q}},{int:{bigint:s.g}},{int:{bigint:s.y}},{int:{bigint:s.x}}]})}if((void 0!==x&&b instanceof x||void 0!==u&&b instanceof u||void 0!==v&&b instanceof v)&&1==b.isPublic&&(void 0===t||"PKCS8PUB"==t))return jt(P=new d(b).tohex(),"PUBLIC KEY");if("PKCS1PRV"==t&&void 0!==x&&b instanceof x&&(void 0===e||null==e)&&1==b.isPrivate)return jt(P=S(b).tohex(),"RSA PRIVATE KEY");if("PKCS1PRV"==t&&void 0!==v&&b instanceof v&&(void 0===e||null==e)&&1==b.isPrivate){var F=new c({name:b.curveName}).tohex(),A=w(b).tohex(),p="";return p+=jt(F,"EC PARAMETERS"),p+=jt(A,"EC PRIVATE KEY")}if("PKCS1PRV"==t&&void 0!==u&&b instanceof u&&(void 0===e||null==e)&&1==b.isPrivate)return jt(P=E(b).tohex(),"DSA PRIVATE KEY");if("PKCS5PRV"==t&&void 0!==x&&b instanceof x&&void 0!==e&&null!=e&&1==b.isPrivate){var P=S(b).tohex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",P,e,r,n)}if("PKCS5PRV"==t&&void 0!==v&&b instanceof v&&void 0!==e&&null!=e&&1==b.isPrivate){P=w(b).tohex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",P,e,r,n)}if("PKCS5PRV"==t&&void 0!==u&&b instanceof u&&void 0!==e&&null!=e&&1==b.isPrivate){P=E(b).tohex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",P,e,r,n)}var D=function(t,s){var e=I(t,s);return new f({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:e.pbkdf2Salt}},{int:e.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:e.encryptionSchemeIV}}]}]}]},{octstr:{hex:e.ciphertext}}]}).tohex()},I=function(t,e){var r=m.lib.WordArray.random(8),s=m.lib.WordArray.random(8),n=m.PBKDF2(e,r,{keySize:6,iterations:100}),o=m.enc.Hex.parse(t),h=m.TripleDES.encrypt(o,n,{iv:s})+"",c={};return c.ciphertext=h,c.pbkdf2Salt=m.enc.Hex.stringify(r),c.pbkdf2Iter=100,c.encryptionSchemeAlg="DES-EDE3-CBC",c.encryptionSchemeIV=m.enc.Hex.stringify(s),c};if("PKCS8PRV"==t&&null!=x&&b instanceof x&&1==b.isPrivate){var C=S(b).tohex();P=f({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:C}}]}).tohex();return void 0===e||null==e?jt(P,"PRIVATE KEY"):jt(A=D(P,e),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==t&&void 0!==v&&b instanceof v&&1==b.isPrivate){var R={seq:[{int:1},{octstr:{hex:b.prvKeyHex}}]};"string"==typeof b.pubKeyHex&&R.seq.push({tag:["a1",!0,{bitstr:{hex:"00"+b.pubKeyHex}}]});C=new f(R).tohex(),P=f({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:b.curveName}}]},{octstr:{hex:C}}]}).tohex();return void 0===e||null==e?jt(P,"PRIVATE KEY"):jt(A=D(P,e),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==t&&void 0!==u&&b instanceof u&&1==b.isPrivate){C=new l({bigint:b.x}).tohex(),P=f({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:b.p}},{int:{bigint:b.q}},{int:{bigint:b.g}}]}]},{octstr:{hex:C}}]}).tohex();return void 0===e||null==e?jt(P,"PRIVATE KEY"):jt(A=D(P,e),"ENCRYPTED PRIVATE KEY")}throw new Error("unsupported object nor format")},ne.getKeyFromCSRPEM=function(b){var a=Ht(b,"CERTIFICATE REQUEST");return ne.getKeyFromCSRHex(a)},ne.getKeyFromCSRHex=function(a){var t=ne.parseCSRHex(a);return ne.getKey(t.p8pubkeyhex,null,"pkcs8pub")},ne.parseCSRHex=function(t){var i=mt,e=i.getChildIdx,r=i.getTLV,b={},g=t;if("30"!=g.substr(0,2))throw new Error("malformed CSR(code:001)");var n=e(g,0);if(n.length<1)throw new Error("malformed CSR(code:002)");if("30"!=g.substr(n[0],2))throw new Error("malformed CSR(code:003)");var a=e(g,n[0]);if(a.length<3)throw new Error("malformed CSR(code:004)");return b.p8pubkeyhex=r(g,a[2]),b},ne.getKeyID=function(t){var e=ne,r=mt;"string"==typeof t&&-1!=t.indexOf("BEGIN ")&&(t=e.getKey(t));var n=Ht(e.getPEM(t)),b=r.getIdxbyList(n,0,[1]),a=r.getV(n,b).substring(2);return gt.crypto.Util.hashHex(a,"sha1")},ne.getJWK=function(t,e,g,b,r){var i,n,o={},h=gt.crypto.Util.hashHex;if("string"==typeof t)i=ne.getKey(t),-1!=t.indexOf("CERTIFICATE")&&(n=Ht(t));else{if("object"!=typeof t)throw new Error("unsupported keyinfo type");t instanceof oe?(i=t.getPublicKey(),n=t.hex):i=t}if(i instanceof ut&&i.isPrivate)o.kty="RSA",o.n=At(i.n.toString(16)),o.e=At(i.e.toString(16)),o.d=At(i.d.toString(16)),o.p=At(i.p.toString(16)),o.q=At(i.q.toString(16)),o.dp=At(i.dmp1.toString(16)),o.dq=At(i.dmq1.toString(16)),o.qi=At(i.coeff.toString(16));else if(i instanceof ut&&i.isPublic)o.kty="RSA",o.n=At(i.n.toString(16)),o.e=At(i.e.toString(16));else if(i instanceof gt.crypto.ECDSA&&i.isPrivate){if("P-256"!==(a=i.getShortNISTPCurveName())&&"P-384"!==a&&"P-521"!==a)throw new Error("unsupported curve name for JWT: "+a);var c=i.getPublicKeyXYHex();o.kty="EC",o.crv=a,o.x=At(c.x),o.y=At(c.y),o.d=At(i.prvKeyHex)}else if(i instanceof gt.crypto.ECDSA&&i.isPublic){var a;if("P-256"!==(a=i.getShortNISTPCurveName())&&"P-384"!==a&&"P-521"!==a)throw new Error("unsupported curve name for JWT: "+a);c=i.getPublicKeyXYHex();o.kty="EC",o.crv=a,o.x=At(c.x),o.y=At(c.y)}if(null==o.kty)throw new Error("unsupported keyinfo");return i.isPrivate||1==e||(o.kid=gt.jws.JWS.getJWKthumbprint(o)),null!=n&&1!=g&&(o.x5c=[w(n)]),null!=n&&1!=b&&(o.x5t=Et(w(h(n,"sha1")))),null!=n&&1!=r&&(o["x5t#S256"]=Et(w(h(n,"sha256")))),o},ne.getJWKFromKey=function(a){return ne.getJWK(a,!0,!0,!0,!0)},ut.getPosArrayOfChildrenFromHex=function(a){return mt.getChildIdx(a,0)},ut.getHexValueArrayOfChildrenFromHex=function(t){var e,i=mt.getV,r=i(t,(e=ut.getPosArrayOfChildrenFromHex(t))[0]),n=i(t,e[1]),b=i(t,e[2]),o=i(t,e[3]),h=i(t,e[4]),g=i(t,e[5]),c=i(t,e[6]),l=i(t,e[7]),f=i(t,e[8]);return(e=new Array).push(r,n,b,o,h,g,c,l,f),e},ut.prototype.readPrivateKeyFromPEMString=function(t){var e=Ht(t),b=ut.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8])},ut.prototype.readPKCS5PrvKeyHex=function(t){var b=ut.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8])},ut.prototype.readPKCS8PrvKeyHex=function(t){var e,i,r,b,a,n,o,h,c=mt,l=c.getVbyListEx;if(!1===c.isASN1HEX(t))throw new Error("not ASN.1 hex string");try{e=l(t,0,[2,0,1],"02"),i=l(t,0,[2,0,2],"02"),r=l(t,0,[2,0,3],"02"),b=l(t,0,[2,0,4],"02"),a=l(t,0,[2,0,5],"02"),n=l(t,0,[2,0,6],"02"),o=l(t,0,[2,0,7],"02"),h=l(t,0,[2,0,8],"02")}catch(t){throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(e,i,r,b,a,n,o,h)},ut.prototype.readPKCS5PubKeyHex=function(t){var e=mt,b=e.getV;if(!1===e.isASN1HEX(t))throw new Error("keyHex is not ASN.1 hex string");var a=e.getChildIdx(t,0);if(2!==a.length||"02"!==t.substr(a[0],2)||"02"!==t.substr(a[1],2))throw new Error("wrong hex for PKCS#5 public key");var r=b(t,a[0]),n=b(t,a[1]);this.setPublic(r,n)},ut.prototype.readPKCS8PubKeyHex=function(b){var t=mt;if(!1===t.isASN1HEX(b))throw new Error("not ASN.1 hex string");if("06092a864886f70d010101"!==t.getTLVbyListEx(b,0,[0,0]))throw new Error("not PKCS8 RSA public key");var a=t.getTLVbyListEx(b,0,[1,0]);this.readPKCS5PubKeyHex(a)},ut.prototype.readCertPubKeyHex=function(b,t){var a,e;(a=new oe).readCertHex(b),e=a.getPublicKeyHex(),this.readPKCS8PubKeyHex(e)};new RegExp("[^0-9a-f]","gi");function ie(t,e){for(var r="",a=e/4-t.length,b=0;b<a;b++)r+="0";return r+t}function se(t,a,e){for(var b="",r=0;b.length<a;)b+=Rt(e(Tt(t+String.fromCharCode.apply(String,[(4278190080&r)>>24,(16711680&r)>>16,(65280&r)>>8,255&r])))),r+=1;return b}function ae(t){for(var e in gt.crypto.Util.DIGESTINFOHEAD){var r=gt.crypto.Util.DIGESTINFOHEAD[e],b=r.length;if(t.substring(0,b)==r)return[e,t.substring(b)]}return[]}function oe(u){var g,t=mt,e=t.getChildIdx,r=t.getV,n=(t.dump,t.parse),b=t.getTLV,o=t.getVbyList,h=t.getVbyListEx,a=t.getTLVbyList,p=t.getTLVbyListEx,c=t.getIdxbyList,l=t.getIdxbyListEx,f=t.getVidx,d=t.getInt,y=t.oidname,q=t.hextooidstr,v=Ht;try{g=gt.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch(t){}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(null===this.hex||0!==this.version)return this.version;var t=a(this.hex,0,[0,0]);if("a0"==t.substr(0,2)){var e=a(t,0,[0]),r=d(e,0);if(r<0||2<r)throw new Error("malformed version field");return this.version=r+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return h(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var t=p(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(t)},this.getAlgorithmIdentifierName=function(t){for(var e in g)if(t===g[e])return e;return y(h(t,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return a(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return a(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var t=o(this.hex,0,[0,4+this.foffset,0]);return t=t.replace(/(..)/g,"%$1"),t=decodeURIComponent(t)},this.getNotAfter=function(){var t=o(this.hex,0,[0,4+this.foffset,1]);return t=t.replace(/(..)/g,"%$1"),t=decodeURIComponent(t)},this.getPublicKeyHex=function(){return this.getSPKI()},this.getSPKI=function(){return a(this.hex,0,[0,6+this.foffset],"30")},this.getSPKIValue=function(){var t=this.getSPKI();return null==t?null:o(t,0,[1],"03",!0)},this.getPublicKeyIdx=function(){return c(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var t=this.getPublicKeyIdx();return c(this.hex,t,[1,0],"30")},this.getPublicKey=function(){return ne.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var t=a(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(t)},this.getSignatureValueHex=function(){return o(this.hex,0,[2],"03",!0)},this.verifySignature=function(t){var e=this.getSignatureAlgorithmField(),r=this.getSignatureValueHex(),n=a(this.hex,0,[0],"30"),o=new gt.crypto.Signature({alg:e});return o.init(t),o.updateHex(n),o.verify(r)},this.parseExt=function(n){var h,l,d;if(void 0===n){if(d=this.hex,3!==this.version)return-1;h=c(d,0,[0,7,0],"30"),l=e(d,h)}else{d=Ht(n);var y=c(d,0,[0,3,0,0],"06");if("2a864886f70d01090e"!=r(d,y))return void(this.aExtInfo=new Array);h=c(d,0,[0,3,0,1,0],"30"),l=e(d,h),this.hex=d}this.aExtInfo=new Array;for(var v=0;v<l.length;v++){var m={critical:!1},x=0;3===e(d,l[v]).length&&(m.critical=!0,x=1),m.oid=t.hextooidstr(o(d,l[v],[0],"06"));var S=c(d,l[v],[1+x]);m.vidx=f(d,S),this.aExtInfo.push(m)}},this.getExtInfo=function(t){var e=this.aExtInfo,r=t;if(t.match(/^[0-9.]+$/)||(r=gt.asn1.x509.OID.name2oid(t)),""!==r)for(var n=0;n<e.length;n++)if(e[n].oid===r)return e[n]},this.getExtBasicConstraints=function(t,e){if(void 0===t&&void 0===e){var n=this.getExtInfo("basicConstraints");if(void 0===n)return;t=b(this.hex,n.vidx),e=n.critical}var o={extname:"basicConstraints"};if(e&&(o.critical=!0),"3000"===t)return o;if("30030101ff"===t)return o.cA=!0,o;if("30060101ff02"===t.substr(0,12)){var h=r(t,10),c=parseInt(h,16);return o.cA=!0,o.pathLen=c,o}throw new Error("hExtV parse error: "+t)},this.getExtNameConstraints=function(t,r){if(void 0===t&&void 0===r){var n=this.getExtInfo("nameConstraints");if(void 0===n)return;t=b(this.hex,n.vidx),r=n.critical}var o={extname:"nameConstraints"};r&&(o.critical=!0);for(var h=e(t,0),c=0;c<h.length;c++){for(var l=[],f=e(t,h[c]),d=0;d<f.length;d++){var y=b(t,f[d]),v=this.getGeneralSubtree(y);l.push(v)}var m=t.substr(h[c],2);"a0"==m?o.permit=l:"a1"==m&&(o.exclude=l)}return o},this.getGeneralSubtree=function(t){var n=e(t,0),o=n.length;if(o<1||2<o)throw new Error("wrong num elements");for(var h=this.getGeneralName(b(t,n[0])),c=1;c<o;c++){var l=t.substr(n[c],2),f=r(t,n[c]),d=parseInt(f,16);"80"==l&&(h.min=d),"81"==l&&(h.max=d)}return h},this.getExtKeyUsage=function(t,e){if(void 0===t&&void 0===e){var r=this.getExtInfo("keyUsage");if(void 0===r)return;t=b(this.hex,r.vidx),e=r.critical}var n={extname:"keyUsage"};return e&&(n.critical=!0),n.names=this.getExtKeyUsageString(t).split(","),n},this.getExtKeyUsageBin=function(t){if(void 0===t){var e=this.getExtInfo("keyUsage");if(void 0===e)return"";t=b(this.hex,e.vidx)}if(8!=t.length&&10!=t.length)throw new Error("malformed key usage value: "+t);var r="000000000000000"+parseInt(t.substr(6),16).toString(2);return 8==t.length&&(r=r.slice(-8)),10==t.length&&(r=r.slice(-16)),""==(r=r.replace(/0+$/,""))&&(r="0"),r},this.getExtKeyUsageString=function(t){for(var e=this.getExtKeyUsageBin(t),r=new Array,n=0;n<e.length;n++)"1"==e.substr(n,1)&&r.push(oe.KEYUSAGE_NAME[n]);return r.join(",")},this.getExtSubjectKeyIdentifier=function(t,e){if(void 0===t&&void 0===e){var n=this.getExtInfo("subjectKeyIdentifier");if(void 0===n)return;t=b(this.hex,n.vidx),e=n.critical}var o={extname:"subjectKeyIdentifier"};e&&(o.critical=!0);var h=r(t,0);return o.kid={hex:h},o},this.getExtAuthorityKeyIdentifier=function(t,n){if(void 0===t&&void 0===n){var o=this.getExtInfo("authorityKeyIdentifier");if(void 0===o)return;t=b(this.hex,o.vidx),n=o.critical}var h={extname:"authorityKeyIdentifier"};n&&(h.critical=!0);for(var c=e(t,0),l=0;l<c.length;l++){var f=t.substr(c[l],2);if("80"===f&&(h.kid={hex:r(t,c[l])}),"a1"===f){var d=b(t,c[l]),y=this.getGeneralNames(d);h.issuer=y[0].dn}"82"===f&&(h.sn={hex:r(t,c[l])})}return h},this.getExtExtKeyUsage=function(t,n){if(void 0===t&&void 0===n){var o=this.getExtInfo("extKeyUsage");if(void 0===o)return;t=b(this.hex,o.vidx),n=o.critical}var h={extname:"extKeyUsage",array:[]};n&&(h.critical=!0);for(var c=e(t,0),l=0;l<c.length;l++)h.array.push(y(r(t,c[l])));return h},this.getExtExtKeyUsageName=function(){var t=this.getExtInfo("extKeyUsage");if(void 0===t)return t;var n=new Array,o=b(this.hex,t.vidx);if(""===o)return n;for(var h=e(o,0),c=0;c<h.length;c++)n.push(y(r(o,h[c])));return n},this.getExtSubjectAltName=function(t,e){if(void 0===t&&void 0===e){var r=this.getExtInfo("subjectAltName");if(void 0===r)return;t=b(this.hex,r.vidx),e=r.critical}var n={extname:"subjectAltName",array:[]};return e&&(n.critical=!0),n.array=this.getGeneralNames(t),n},this.getExtIssuerAltName=function(t,e){if(void 0===t&&void 0===e){var r=this.getExtInfo("issuerAltName");if(void 0===r)return;t=b(this.hex,r.vidx),e=r.critical}var n={extname:"issuerAltName",array:[]};return e&&(n.critical=!0),n.array=this.getGeneralNames(t),n},this.getGeneralNames=function(t){for(var r=e(t,0),n=[],o=0;o<r.length;o++){var h=this.getGeneralName(b(t,r[o]));void 0!==h&&n.push(h)}return n},this.getGeneralName=function(t){var e=t.substr(0,2),n=r(t,0),o=Rt(n);return"81"==e?{rfc822:o}:"82"==e?{dns:o}:"86"==e?{uri:o}:"87"==e?{ip:Ut(n)}:"a4"==e?{dn:this.getX500Name(n)}:"a0"==e?{other:this.getOtherName(t)}:void 0},this.getExtSubjectAltName2=function(){var t,n,o,h=this.getExtInfo("subjectAltName");if(void 0===h)return h;for(var c=new Array,l=b(this.hex,h.vidx),f=e(l,0),d=0;d<f.length;d++)o=l.substr(f[d],2),t=r(l,f[d]),"81"===o&&(n=It(t),c.push(["MAIL",n])),"82"===o&&(n=It(t),c.push(["DNS",n])),"84"===o&&(n=oe.hex2dn(t,0),c.push(["DN",n])),"86"===o&&(n=It(t),c.push(["URI",n])),"87"===o&&(n=Ut(t),c.push(["IP",n]));return c},this.getExtCRLDistributionPoints=function(t,r){if(void 0===t&&void 0===r){var n=this.getExtInfo("cRLDistributionPoints");if(void 0===n)return;t=b(this.hex,n.vidx),r=n.critical}var o={extname:"cRLDistributionPoints",array:[]};r&&(o.critical=!0);for(var h=e(t,0),c=0;c<h.length;c++){var l=b(t,h[c]);o.array.push(this.getDistributionPoint(l))}return o},this.getDistributionPoint=function(t){for(var r={},n=e(t,0),o=0;o<n.length;o++){var h=t.substr(n[o],2),c=b(t,n[o]);"a0"==h&&(r.dpname=this.getDistributionPointName(c))}return r},this.getDistributionPointName=function(t){for(var r={},n=e(t,0),o=0;o<n.length;o++){var h=t.substr(n[o],2),c=b(t,n[o]);"a0"==h&&(r.full=this.getGeneralNames(c))}return r},this.getExtCRLDistributionPointsURI=function(){var t=this.getExtCRLDistributionPoints();if(null==t)return t;for(var e=t.array,r=[],n=0;n<e.length;n++)try{null!=e[n].dpname.full[0].uri&&r.push(e[n].dpname.full[0].uri)}catch(t){}return r},this.getExtAIAInfo=function(){var t=this.getExtInfo("authorityInfoAccess");if(void 0===t)return t;for(var r={ocsp:[],caissuer:[]},n=e(this.hex,t.vidx),h=0;h<n.length;h++){var c=o(this.hex,n[h],[0],"06"),l=o(this.hex,n[h],[1],"86");"2b06010505073001"===c&&r.ocsp.push(It(l)),"2b06010505073002"===c&&r.caissuer.push(It(l))}return r},this.getExtAuthorityInfoAccess=function(t,r){if(void 0===t&&void 0===r){var n=this.getExtInfo("authorityInfoAccess");if(void 0===n)return;t=b(this.hex,n.vidx),r=n.critical}var c={extname:"authorityInfoAccess",array:[]};r&&(c.critical=!0);for(var l=e(t,0),f=0;f<l.length;f++){var d=h(t,l[f],[0],"06"),y=It(o(t,l[f],[1],"86"));if("2b06010505073001"==d)c.array.push({ocsp:y});else{if("2b06010505073002"!=d)throw new Error("unknown method: "+d);c.array.push({caissuer:y})}}return c},this.getExtCertificatePolicies=function(t,r){if(void 0===t&&void 0===r){var n=this.getExtInfo("certificatePolicies");if(void 0===n)return;t=b(this.hex,n.vidx),r=n.critical}var o={extname:"certificatePolicies",array:[]};r&&(o.critical=!0);for(var h=e(t,0),c=0;c<h.length;c++){var l=b(t,h[c]),f=this.getPolicyInformation(l);o.array.push(f)}return o},this.getPolicyInformation=function(t){var r={},n=o(t,0,[0],"06");r.policyoid=y(n);var h=l(t,0,[1],"30");if(-1!=h){r.array=[];for(var c=e(t,h),f=0;f<c.length;f++){var d=b(t,c[f]),v=this.getPolicyQualifierInfo(d);r.array.push(v)}}return r},this.getOtherName=function(t){var r={},h=e(t,0),c=o(t,h[0],[],"06"),l=o(t,h[1],[]);return r.oid=gt.asn1.ASN1Util.oidHexToInt(c),r.obj=n(l),r},this.getPolicyQualifierInfo=function(t){var e={},r=o(t,0,[0],"06");if("2b06010505070201"===r){var n=h(t,0,[1],"16");e.cps=Rt(n)}else if("2b06010505070202"===r){var c=a(t,0,[1],"30");e.unotice=this.getUserNotice(c)}return e},this.getUserNotice=function(t){for(var r={},n=e(t,0),o=0;o<n.length;o++){var h=b(t,n[o]);"30"!=h.substr(0,2)&&(r.exptext=this.getDisplayText(h))}return r},this.getDisplayText=function(t){var e={};return e.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[t.substr(0,2)],e.str=Rt(r(t,0)),e},this.getExtCRLNumber=function(t,e){var n={extname:"cRLNumber"};if(e&&(n.critical=!0),"02"==t.substr(0,2))return n.num={hex:r(t,0)},n;throw new Error("hExtV parse error: "+t)},this.getExtCRLReason=function(t,e){var n={extname:"cRLReason"};if(e&&(n.critical=!0),"0a"==t.substr(0,2))return n.code=parseInt(r(t,0),16),n;throw new Error("hExtV parse error: "+t)},this.getExtOcspNonce=function(t,e){var n={extname:"ocspNonce"};e&&(n.critical=!0);var o=r(t,0);return n.hex=o,n},this.getExtOcspNoCheck=function(t,e){var r={extname:"ocspNoCheck"};return e&&(r.critical=!0),r},this.getExtAdobeTimeStamp=function(t,r){if(void 0===t&&void 0===r){var n=this.getExtInfo("adobeTimeStamp");if(void 0===n)return;t=b(this.hex,n.vidx),r=n.critical}var o={extname:"adobeTimeStamp"};r&&(o.critical=!0);var h=e(t,0);if(h.length>1){var c=b(t,h[1]),l=this.getGeneralName(c);null!=l.uri&&(o.uri=l.uri)}if(h.length>2){var f=b(t,h[2]);"0101ff"==f&&(o.reqauth=!0),"010100"==f&&(o.reqauth=!1)}return o};var m=function(t){var e={};try{var r=t.seq[0].oid,n=gt.asn1.x509.OID.name2oid(r);e.type=gt.asn1.x509.OID.oid2atype(n);var o=t.seq[1];if(null!=o.utf8str)e.ds="utf8",e.value=o.utf8str.str;else if(null!=o.numstr)e.ds="num",e.value=o.numstr.str;else if(null!=o.telstr)e.ds="tel",e.value=o.telstr.str;else if(null!=o.prnstr)e.ds="prn",e.value=o.prnstr.str;else if(null!=o.ia5str)e.ds="ia5",e.value=o.ia5str.str;else if(null!=o.visstr)e.ds="vis",e.value=o.visstr.str;else{if(null==o.bmpstr)throw"error";e.ds="bmp",e.value=o.bmpstr.str}return e}catch(t){throw new Erorr("improper ASN.1 parsed AttrTypeAndValue")}},i=function(t){try{return t.set.map((function(t){return m(t)}))}catch(t){throw new Error("improper ASN.1 parsed RDN: "+t)}};this.getX500NameRule=function(t){for(var e=null,r=[],n=0;n<t.length;n++)for(var o=t[n],h=0;h<o.length;h++)r.push(o[h]);for(n=0;n<r.length;n++){var c=r[n],l=c.ds,f=c.value,d=c.type;if(":"+l,"prn"!=l&&"utf8"!=l&&"ia5"!=l)return"mixed";if("ia5"==l){if("CN"!=d)return"mixed";if(gt.lang.String.isMail(f))continue;return"mixed"}if("C"==d){if("prn"==l)continue;return"mixed"}if(":"+l,null==e)e=l;else if(e!==l)return"mixed"}return null==e?"prn":e},this.getAttrTypeAndValue=function(t){var e=n(t);return m(e)},this.getRDN=function(t){var e=n(t);return i(e)},this.getX500NameArray=function(t){return function(t){try{return t.seq.map((function(t){return i(t)}))}catch(t){throw new Error("improper ASN.1 parsed X500Name: "+t)}}(n(t))},this.getX500Name=function(t){var e=this.getX500NameArray(t);return{array:e,str:this.dnarraytostr(e)}},this.readCertPEM=function(t){this.readCertHex(v(t))},this.readCertHex=function(t){this.hex=t,this.getVersion();try{c(this.hex,0,[0,7],"a3"),this.parseExt()}catch(t){}},this.getParam=function(t){var e={};return e.version=this.getVersion(),e.serial={hex:this.getSerialNumberHex()},e.sigalg=this.getSignatureAlgorithmField(),e.issuer=this.getIssuer(),e.notbefore=this.getNotBefore(),e.notafter=this.getNotAfter(),e.subject=this.getSubject(),e.sbjpubkey=jt(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(e.ext=this.getExtParamArray()),e.sighex=this.getSignatureValueHex(),"object"==typeof t&&(1==t.tbshex&&(e.tbshex=a(this.hex,0,[0])),1==t.nodnarray&&(delete e.issuer.array,delete e.subject.array)),e},this.getExtParamArray=function(t){null==t&&(-1!=l(this.hex,0,[0,"[3]"])&&(t=p(this.hex,0,[0,"[3]",0],"30")));for(var r=[],n=e(t,0),o=0;o<n.length;o++){var h=b(t,n[o]),c=this.getExtParam(h);null!=c&&r.push(c)}return r},this.getExtParam=function(t){var r=e(t,0).length;if(2!=r&&3!=r)throw new Error("wrong number elements in Extension: "+r+" "+t);var n=q(o(t,0,[0],"06")),h=!1;3==r&&"0101ff"==a(t,0,[1])&&(h=!0);var c=a(t,0,[r-1,0]),l=void 0;if("2.5.29.14"==n?l=this.getExtSubjectKeyIdentifier(c,h):"2.5.29.15"==n?l=this.getExtKeyUsage(c,h):"2.5.29.17"==n?l=this.getExtSubjectAltName(c,h):"2.5.29.18"==n?l=this.getExtIssuerAltName(c,h):"2.5.29.19"==n?l=this.getExtBasicConstraints(c,h):"2.5.29.30"==n?l=this.getExtNameConstraints(c,h):"2.5.29.31"==n?l=this.getExtCRLDistributionPoints(c,h):"2.5.29.32"==n?l=this.getExtCertificatePolicies(c,h):"2.5.29.35"==n?l=this.getExtAuthorityKeyIdentifier(c,h):"2.5.29.37"==n?l=this.getExtExtKeyUsage(c,h):"1.3.6.1.5.5.7.1.1"==n?l=this.getExtAuthorityInfoAccess(c,h):"2.5.29.20"==n?l=this.getExtCRLNumber(c,h):"2.5.29.21"==n?l=this.getExtCRLReason(c,h):"1.3.6.1.5.5.7.48.1.2"==n?l=this.getExtOcspNonce(c,h):"1.3.6.1.5.5.7.48.1.5"==n?l=this.getExtOcspNoCheck(c,h):"1.2.840.113583.1.1.9.1"==n&&(l=this.getExtAdobeTimeStamp(c,h)),null!=l)return l;var f={extname:n,extn:c};return h&&(f.critical=!0),f},this.findExt=function(t,e){for(var r=0;r<t.length;r++)if(t[r].extname==e)return t[r];return null},this.updateExtCDPFullURI=function(t,e){var r=this.findExt(t,"cRLDistributionPoints");if(null!=r&&null!=r.array)for(var n=r.array,o=0;o<n.length;o++)if(null!=n[o].dpname&&null!=n[o].dpname.full)for(var h=n[o].dpname.full,c=0;c<h.length;c++){var l=h[o];null!=l.uri&&(l.uri=e)}},this.updateExtAIAOCSP=function(t,e){var r=this.findExt(t,"authorityInfoAccess");if(null!=r&&null!=r.array)for(var n=r.array,o=0;o<n.length;o++)null!=n[o].ocsp&&(n[o].ocsp=e)},this.updateExtAIACAIssuer=function(t,e){var r=this.findExt(t,"authorityInfoAccess");if(null!=r&&null!=r.array)for(var n=r.array,o=0;o<n.length;o++)null!=n[o].caissuer&&(n[o].caissuer=e)},this.dnarraytostr=function(t){return"/"+t.map((function(t){return function(t){return t.map((function(t){return function(t){return t.type+"="+t.value}(t).replace(/\+/,"\\+")})).join("+")}(t).replace(/\//,"\\/")})).join("/")},this.getInfo=function(){var t,e,r,n,o=function(t){for(var e="",r=t.array,n=0;n<r.length;n++){var o=r[n];if(e+="    policy oid: "+o.policyoid+"\n",void 0!==o.array)for(var h=0;h<o.array.length;h++){var c=o.array[h];void 0!==c.cps&&(e+="    cps: "+c.cps+"\n")}}return e},h=function(t){for(var e="",r=t.array,n=0;n<r.length;n++){var o=r[n];try{void 0!==o.dpname.full[0].uri&&(e+="    "+o.dpname.full[0].uri+"\n")}catch(t){}try{void 0!==o.dname.full[0].dn.hex&&(e+="    "+oe.hex2dn(o.dpname.full[0].dn.hex)+"\n")}catch(t){}}return e},c=function(t){for(var e="",r=t.array,n=0;n<r.length;n++){var o=r[n];void 0!==o.caissuer&&(e+="    caissuer: "+o.caissuer+"\n"),void 0!==o.ocsp&&(e+="    ocsp: "+o.ocsp+"\n")}return e};if(t="Basic Fields\n",t+="  serial number: "+this.getSerialNumberHex()+"\n",t+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",t+="  issuer: "+this.getIssuerString()+"\n",t+="  notBefore: "+this.getNotBefore()+"\n",t+="  notAfter: "+this.getNotAfter()+"\n",t+="  subject: "+this.getSubjectString()+"\n",t+="  subject public key info: \n",t+="    key algorithm: "+(e=this.getPublicKey()).type+"\n","RSA"===e.type&&(t+="    n="+$t(e.n.toString(16)).substr(0,16)+"...\n",t+="    e="+$t(e.e.toString(16))+"\n"),null!=(r=this.aExtInfo)){t+="X509v3 Extensions:\n";for(var l=0;l<r.length;l++){var f=r[l],d=gt.asn1.x509.OID.oid2name(f.oid);""===d&&(d=f.oid);var y="";if(!0===f.critical&&(y="CRITICAL"),t+="  "+d+" "+y+":\n","basicConstraints"===d){var v=this.getExtBasicConstraints();void 0===v.cA?t+="    {}\n":(t+="    cA=true",void 0!==v.pathLen&&(t+=", pathLen="+v.pathLen),t+="\n")}else if("keyUsage"===d)t+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===d)t+="    "+this.getExtSubjectKeyIdentifier().kid.hex+"\n";else if("authorityKeyIdentifier"===d){var m=this.getExtAuthorityKeyIdentifier();void 0!==m.kid&&(t+="    kid="+m.kid.hex+"\n")}else{if("extKeyUsage"===d)t+="    "+this.getExtExtKeyUsage().array.join(", ")+"\n";else if("subjectAltName"===d)t+="    "+(n=this.getExtSubjectAltName(),JSON.stringify(n.array).replace(/[\[\]\{\}\"]/g,""))+"\n";else if("cRLDistributionPoints"===d)t+=h(this.getExtCRLDistributionPoints());else if("authorityInfoAccess"===d)t+=c(this.getExtAuthorityInfoAccess());else"certificatePolicies"===d&&(t+=o(this.getExtCertificatePolicies()))}}}return t+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n",t+="signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"},"string"==typeof u&&(-1!=u.indexOf("-----BEGIN")?this.readCertPEM(u):gt.lang.String.isHex(u)&&this.readCertHex(u))}ut.prototype.sign=function(t,a){var e=function(t){return gt.crypto.Util.hashString(t,a)}(t);return this.signWithMessageHash(e,a)},ut.prototype.signWithMessageHash=function(t,e){var b=at(gt.crypto.Util.getPaddedDigestInfoHex(t,e,this.n.bitLength()),16);return ie(this.doPrivate(b).toString(16),this.n.bitLength())},ut.prototype.signPSS=function(t,a,e){var r,b=(r=Tt(t),gt.crypto.Util.hashHex(r,a));return void 0===e&&(e=-1),this.signWithMessageHashPSS(b,a,e)},ut.prototype.signWithMessageHashPSS=function(t,a,e){var r,b=Rt(t),g=b.length,n=this.n.bitLength()-1,o=Math.ceil(n/8),h=function(i){return gt.crypto.Util.hashHex(i,a)};if(-1===e||void 0===e)e=g;else if(-2===e)e=o-g-2;else if(e<-2)throw new Error("invalid salt length");if(o<g+e+2)throw new Error("data too long");var c="";e>0&&(c=new Array(e),(new st).nextBytes(c),c=String.fromCharCode.apply(String,c));var l=Rt(h(Tt("\0\0\0\0\0\0\0\0"+b+c))),f=[];for(r=0;r<o-e-g-2;r+=1)f[r]=0;var d=String.fromCharCode.apply(String,f)+""+c,y=se(l,d.length,h),q=[];for(r=0;r<d.length;r+=1)q[r]=d.charCodeAt(r)^y.charCodeAt(r);var p=65280>>8*o-n&255;for(q[0]&=~p,r=0;r<g;r++)q.push(l.charCodeAt(r));return q.push(188),ie(this.doPrivate(new A(q)).toString(16),this.n.bitLength())},ut.prototype.verify=function(t,e){if(null==(e=e.toLowerCase()).match(/^[0-9a-f]+$/))return!1;var b=at(e,16),r=this.n.bitLength();if(b.bitLength()>r)return!1;var i=this.doPublic(b).toString(16);if(i.length+3!=r/4)return!1;var g=ae(i.replace(/^1f+00/,""));if(0==g.length)return!1;var n=g[0],o=g[1],h=function(t){return gt.crypto.Util.hashString(t,n)}(t);return o==h},ut.prototype.verifyWithMessageHash=function(t,a){if(a.length!=Math.ceil(this.n.bitLength()/4))return!1;var b=at(a,16);if(b.bitLength()>this.n.bitLength())return 0;var e=ae(this.doPublic(b).toString(16).replace(/^1f+00/,""));if(0==e.length)return!1;e[0];return e[1]==t},ut.prototype.verifyPSS=function(t,b,a,e){var g,r=(g=Tt(t),gt.crypto.Util.hashHex(g,a));return void 0===e&&(e=-1),this.verifyWithMessageHashPSS(r,b,a,e)},ut.prototype.verifyWithMessageHashPSS=function(t,s,e,r){if(s.length!=Math.ceil(this.n.bitLength()/4))return!1;var q,n=new A(s,16),o=function(i){return gt.crypto.Util.hashHex(i,e)},h=Rt(t),c=h.length,g=this.n.bitLength()-1,l=Math.ceil(g/8);if(-1===r||void 0===r)r=c;else if(-2===r)r=l-c-2;else if(r<-2)throw new Error("invalid salt length");if(l<c+r+2)throw new Error("data too long");var a=this.doPublic(n).toByteArray();for(q=0;q<a.length;q+=1)a[q]&=255;for(;a.length<l;)a.unshift(0);if(188!==a[l-1])throw new Error("encoded message does not end in 0xbc");var f=(a=String.fromCharCode.apply(String,a)).substr(0,l-c-1),d=a.substr(f.length,c),p=65280>>8*l-g&255;if(0!=(f.charCodeAt(0)&p))throw new Error("bits beyond keysize not zero");var y=se(d,f.length,o),v=[];for(q=0;q<f.length;q+=1)v[q]=f.charCodeAt(q)^y.charCodeAt(q);v[0]&=~p;var b=l-c-r-2;for(q=0;q<b;q+=1)if(0!==v[q])throw new Error("leftmost octets not zero");if(1!==v[b])throw new Error("0x01 marker not found");return d===Rt(o(Tt("\0\0\0\0\0\0\0\0"+h+String.fromCharCode.apply(String,v.slice(-r)))))},ut.SALT_LEN_HLEN=-1,ut.SALT_LEN_MAX=-2,ut.SALT_LEN_RECOVER=-2,oe.hex2dn=function(t,b){void 0===b&&(b=0);var a=new oe;mt.getTLV(t,b);return a.getX500Name(t).str},oe.hex2rdn=function(t,b){if(void 0===b&&(b=0),"31"!==t.substr(b,2))throw new Error("malformed RDN");for(var e=new Array,r=mt.getChildIdx(t,b),n=0;n<r.length;n++)e.push(oe.hex2attrTypeValue(t,r[n]));return e=e.map((function(a){return a.replace("+","\\+")})),e.join("+")},oe.hex2attrTypeValue=function(t,i){var e=mt,r=e.getV;if(void 0===i&&(i=0),"30"!==t.substr(i,2))throw new Error("malformed attribute type and value");var g=e.getChildIdx(t,i);2!==g.length||t.substr(g[0],2);var b=r(t,g[0]),n=gt.asn1.ASN1Util.oidHexToInt(b);return gt.asn1.x509.OID.oid2atype(n)+"="+Rt(r(t,g[1]))},oe.getPublicKeyFromCertHex=function(b){var a=new oe;return a.readCertHex(b),a.getPublicKey()},oe.getPublicKeyFromCertPEM=function(b){var a=new oe;return a.readCertPEM(b),a.getPublicKey()},oe.getPublicKeyInfoPropOfCertPEM=function(t){var a,e,g=mt.getVbyList,b={};return b.algparam=null,(a=new oe).readCertPEM(t),e=a.getPublicKeyHex(),b.keyhex=g(e,0,[1],"03").substr(2),b.algoid=g(e,0,[0,0],"06"),"2a8648ce3d0201"===b.algoid&&(b.algparam=g(e,0,[0,1],"06")),b},oe.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];void 0!==gt&&gt||(gt={}),void 0!==gt.jws&&gt.jws||(gt.jws={}),gt.jws.JWS=function(){var t=gt.jws.JWS.isSafeJSONString;this.parseJWS=function(g,e){if(void 0===this.parsedJWS||!e&&void 0===this.parsedJWS.sigvalH){var i=g.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==i)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var r=i[1],n=i[2],o=i[3],h=r+"."+n;if(this.parsedJWS={},this.parsedJWS.headB64U=r,this.parsedJWS.payloadB64U=n,this.parsedJWS.sigvalB64U=o,this.parsedJWS.si=h,!e){var c=Pt(o),l=at(c,16);this.parsedJWS.sigvalH=c,this.parsedJWS.sigvalBI=l}var f=vt(r),d=vt(n);if(this.parsedJWS.headS=f,this.parsedJWS.payloadS=d,!t(f,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+f}}},gt.jws.JWS.sign=function(t,e,r,n,a){var o,h,c,l=gt,f=l.jws.JWS,d=f.readSafeJSONString,q=f.isSafeJSONString,y=l.crypto,p=(y.ECDSA,y.Mac),v=y.Signature,u=JSON;if("string"!=typeof e&&"object"!=typeof e)throw"spHeader must be JSON string or object: "+e;if("object"==typeof e&&(h=e,o=u.stringify(h)),"string"==typeof e){if(!q(o=e))throw"JWS Head is not safe JSON string: "+o;h=d(o)}if(c=r,"object"==typeof r&&(c=u.stringify(r)),""!=t&&null!=t||void 0===h.alg||(t=h.alg),""!=t&&null!=t&&void 0===h.alg&&(h.alg=t,o=u.stringify(h)),t!==h.alg)throw"alg and sHeader.alg doesn't match: "+t+"!="+h.alg;var s=null;if(void 0===f.jwsalg2sigalg[t])throw"unsupported alg name: "+t;s=f.jwsalg2sigalg[t];var b=yt(o)+"."+yt(c),m="";if("Hmac"==s.substr(0,4)){if(void 0===n)throw"mac key shall be specified for HS* alg";var i=new p({alg:s,prov:"cryptojs",pass:n});i.updateString(b),m=i.doFinal()}else if(-1!=s.indexOf("withECDSA")){(x=new v({alg:s})).init(n,a),x.updateString(b);var g=x.sign();m=gt.crypto.ECDSA.asn1SigToConcatSig(g)}else{var x;if("none"!=s)(x=new v({alg:s})).init(n,a),x.updateString(b),m=x.sign()}return b+"."+At(m)},gt.jws.JWS.verify=function(t,e,r){var n,o=gt,h=o.jws.JWS,i=h.readSafeJSONString,c=o.crypto,p=c.ECDSA,s=c.Mac,l=c.Signature;n=ut;var f=t.split(".");if(3!==f.length)return!1;var d=f[0]+"."+f[1],y=Pt(f[2]),v=i(vt(f[0])),m=null,x=null;if(void 0===v.alg)throw"algorithm not specified in header";if((x=(m=v.alg).substr(0,2),null!=r&&"[object Array]"===Object.prototype.toString.call(r)&&r.length>0)&&-1==(":"+r.join(":")+":").indexOf(":"+m+":"))throw"algorithm '"+m+"' not accepted in the list";if("none"!=m&&null===e)throw"key shall be specified to verify.";if("string"==typeof e&&-1!=e.indexOf("-----BEGIN ")&&(e=ne.getKey(e)),!("RS"!=x&&"PS"!=x||e instanceof n))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==x&&!(e instanceof p))throw"key shall be a ECDSA obj for ES* algs";var u=null;if(void 0===h.jwsalg2sigalg[v.alg])throw"unsupported alg name: "+m;if("none"==(u=h.jwsalg2sigalg[m]))throw"not supported";if("Hmac"==u.substr(0,4)){if(void 0===e)throw"hexadecimal key shall be specified for HMAC";var S=new s({alg:u,pass:e});return S.updateString(d),y==S.doFinal()}if(-1!=u.indexOf("withECDSA")){var g,w=null;try{w=p.concatSigToASN1Sig(y)}catch(t){return!1}return(g=new l({alg:u})).init(e),g.updateString(d),g.verify(w)}return(g=new l({alg:u})).init(e),g.updateString(d),g.verify(y)},gt.jws.JWS.parse=function(g){var t,e,r,n=g.split("."),b={};if(2!=n.length&&3!=n.length)throw"malformed sJWS: wrong number of '.' splitted elements";return t=n[0],e=n[1],3==n.length&&(r=n[2]),b.headerObj=gt.jws.JWS.readSafeJSONString(vt(t)),b.payloadObj=gt.jws.JWS.readSafeJSONString(vt(e)),b.headerPP=JSON.stringify(b.headerObj,null,"  "),null==b.payloadObj?b.payloadPP=vt(e):b.payloadPP=JSON.stringify(b.payloadObj,null,"  "),void 0!==r&&(b.sigHex=Pt(r)),b},gt.jws.JWS.verifyJWT=function(t,e,r){var n=gt.jws,o=n.JWS,h=o.readSafeJSONString,p=o.inArray,c=o.includedArray,l=t.split("."),f=l[0],i=l[1],d=(Pt(l[2]),h(vt(f))),g=h(vt(i));if(void 0===d.alg)return!1;if(void 0===r.alg)throw"acceptField.alg shall be specified";if(!p(d.alg,r.alg))return!1;if(void 0!==g.iss&&"object"==typeof r.iss&&!p(g.iss,r.iss))return!1;if(void 0!==g.sub&&"object"==typeof r.sub&&!p(g.sub,r.sub))return!1;if(void 0!==g.aud&&"object"==typeof r.aud)if("string"==typeof g.aud){if(!p(g.aud,r.aud))return!1}else if("object"==typeof g.aud&&!c(g.aud,r.aud))return!1;var b=n.IntDate.getNow();return void 0!==r.verifyAt&&"number"==typeof r.verifyAt&&(b=r.verifyAt),void 0!==r.gracePeriod&&"number"==typeof r.gracePeriod||(r.gracePeriod=0),!(void 0!==g.exp&&"number"==typeof g.exp&&g.exp+r.gracePeriod<b)&&(!(void 0!==g.nbf&&"number"==typeof g.nbf&&b<g.nbf-r.gracePeriod)&&(!(void 0!==g.iat&&"number"==typeof g.iat&&b<g.iat-r.gracePeriod)&&((void 0===g.jti||void 0===r.jti||g.jti===r.jti)&&!!o.verify(t,e,r.alg))))},gt.jws.JWS.includedArray=function(b,a){var t=gt.jws.JWS.inArray;if(null===b)return!1;if("object"!=typeof b)return!1;if("number"!=typeof b.length)return!1;for(var e=0;e<b.length;e++)if(!t(b[e],a))return!1;return!0},gt.jws.JWS.inArray=function(t,b){if(null===b)return!1;if("object"!=typeof b)return!1;if("number"!=typeof b.length)return!1;for(var e=0;e<b.length;e++)if(b[e]==t)return!0;return!1},gt.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",ES512:"SHA512withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},gt.jws.JWS.isSafeJSONString=function(t,b,e){var r=null;try{return"object"!=typeof(r=pt(t))||r.constructor===Array?0:(b&&(b[e]=r),1)}catch(t){return 0}},gt.jws.JWS.readSafeJSONString=function(b){var t=null;try{return"object"!=typeof(t=pt(b))||t.constructor===Array?null:t}catch(t){return null}},gt.jws.JWS.getEncodedSignatureValueFromJWS=function(b){var a=b.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==a)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return a[1]},gt.jws.JWS.getJWKthumbprint=function(t){if("RSA"!==t.kty&&"EC"!==t.kty&&"oct"!==t.kty)throw"unsupported algorithm for JWK Thumprint";var a="{";if("RSA"===t.kty){if("string"!=typeof t.n||"string"!=typeof t.e)throw"wrong n and e value for RSA key";a+='"e":"'+t.e+'",',a+='"kty":"'+t.kty+'",',a+='"n":"'+t.n+'"}'}else if("EC"===t.kty){if("string"!=typeof t.crv||"string"!=typeof t.x||"string"!=typeof t.y)throw"wrong crv, x and y value for EC key";a+='"crv":"'+t.crv+'",',a+='"kty":"'+t.kty+'",',a+='"x":"'+t.x+'",',a+='"y":"'+t.y+'"}'}else if("oct"===t.kty){if("string"!=typeof t.k)throw"wrong k value for oct(symmetric) key";a+='"kty":"'+t.kty+'",',a+='"k":"'+t.k+'"}'}var b=Tt(a);return At(gt.crypto.Util.hashHex(b,"sha256"))},gt.jws.IntDate={},gt.jws.IntDate.get=function(t){var b=gt.jws.IntDate,e=b.getNow,a=b.getZulu;if("now"==t)return e();if("now + 1hour"==t)return e()+3600;if("now + 1day"==t)return e()+86400;if("now + 1month"==t)return e()+2592e3;if("now + 1year"==t)return e()+31536e3;if(t.match(/Z$/))return a(t);if(t.match(/^[0-9]+$/))return parseInt(t);throw"unsupported format: "+t},gt.jws.IntDate.getZulu=function(a){return _t(a)},gt.jws.IntDate.getNow=function(){return~~(new Date/1e3)},gt.jws.IntDate.intDate2UTCString=function(a){return new Date(1e3*a).toUTCString()},gt.jws.IntDate.intDate2Zulu=function(t){var i=new Date(1e3*t);return("0000"+i.getUTCFullYear()).slice(-4)+("00"+(i.getUTCMonth()+1)).slice(-2)+("00"+i.getUTCDate()).slice(-2)+("00"+i.getUTCHours()).slice(-2)+("00"+i.getUTCMinutes()).slice(-2)+("00"+i.getUTCSeconds()).slice(-2)+"Z"},void 0!==gt&&gt||(gt={}),void 0!==gt.jws&&gt.jws||(gt.jws={}),gt.jws.JWSJS=function(){var a=gt.jws.JWS,t=a.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(t){this.init();var e=t.split(".");if(3!=e.length)throw"malformed input JWS";this.aHeader.push(e[0]),this.sPayload=e[1],this.aSignature.push(e[2])},this.addSignature=function(t,e,r,n){if(void 0===this.sPayload||null===this.sPayload)throw"there's no JSON-JS signature to add.";var o=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var h=gt.jws.JWS.sign(t,e,this.sPayload,r,n).split(".");h[0],h[2];this.aHeader.push(h[0]),this.aSignature.push(h[2])}catch(t){throw this.aHeader.length>o&&this.aHeader.pop(),this.aSignature.length>o&&this.aSignature.pop(),"addSignature failed: "+t}},this.verifyAll=function(t){if(this.aHeader.length!==t.length||this.aSignature.length!==t.length)return!1;for(var g=0;g<t.length;g++){var e=t[g];if(2!==e.length)return!1;if(!1===this.verifyNth(g,e[0],e[1]))return!1}return!0},this.verifyNth=function(t,e,g){if(this.aHeader.length<=t||this.aSignature.length<=t)return!1;var r=this.aHeader[t],n=this.aSignature[t],o=r+"."+this.sPayload+"."+n,h=!1;try{h=a.verify(o,e,g)}catch(t){return!1}return h},this.readJWSJS=function(g){if("string"==typeof g){var e=t(g);if(null==e)throw"argument is not safe JSON object string";this.aHeader=e.headers,this.sPayload=e.payload,this.aSignature=e.signatures}else try{if(!(g.headers.length>0))throw"malformed header";if(this.aHeader=g.headers,"string"!=typeof g.payload)throw"malformed signatures";if(this.sPayload=g.payload,!(g.signatures.length>0))throw"malformed signatures";this.aSignature=g.signatures}catch(t){throw"malformed JWS-JS JSON object: "+t}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return 0==this.aHeader.length?1:0}},e.SecureRandom=st,e.rng_seed_time=Z,e.BigInteger=A,e.RSAKey=ut,e.ECDSA=gt.crypto.ECDSA,e.DSA=gt.crypto.DSA,e.Signature=gt.crypto.Signature,e.MessageDigest=gt.crypto.MessageDigest,e.Mac=gt.crypto.Mac,e.Cipher=gt.crypto.Cipher,e.KEYUTIL=ne,e.ASN1HEX=mt,e.X509=oe,e.X509CRL=function(t){var e=gt.lang.String.isHex,r=mt,n=r.getV,b=r.getTLV,o=r.getVbyList,h=r.getTLVbyList,c=r.getTLVbyListEx,i=r.getIdxbyList,g=r.getIdxbyListEx,l=r.getChildIdx,f=new oe;this.hex=null,this.posSigAlg=null,this.posRevCert=null,this.parsed=null,this._setPos=function(){var t=i(this.hex,0,[0,0]),e=this.hex.substr(t,2);if("02"==e)this.posSigAlg=1;else{if("30"!=e)throw new Error("malformed 1st item of TBSCertList: "+e);this.posSigAlg=0}var q,s=i(this.hex,0,[0,this.posSigAlg+3]),r=this.hex.substr(s,2);if("17"==r||"18"==r)q=i(this.hex,0,[0,this.posSigAlg+4]),this.posRevCert=null,-1!=q&&"30"==this.hex.substr(q,2)&&(this.posRevCert=this.posSigAlg+4);else if("30"==r)this.posRevCert=this.posSigAlg+3;else{if("a0"!=r)throw new Error("malformed nextUpdate or revCert tag: "+r);this.posRevCert=null}},this.getVersion=function(){return 0==this.posSigAlg?null:parseInt(o(this.hex,0,[0,0],"02"),16)+1},this.getSignatureAlgorithmField=function(){var t=h(this.hex,0,[0,this.posSigAlg],"30");return f.getAlgorithmIdentifierName(t)},this.getIssuer=function(){return f.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return h(this.hex,0,[0,this.posSigAlg+1],"30")},this.getThisUpdate=function(){var t=o(this.hex,0,[0,this.posSigAlg+2]);return result=Rt(t)},this.getNextUpdate=function(){var t=i(this.hex,0,[0,this.posSigAlg+3]),e=this.hex.substr(t,2);return"17"!=e&&"18"!=e?null:Rt(n(this.hex,t))},this.getRevCertArray=function(){if(null==this.posRevCert)return null;for(var t=[],e=i(this.hex,0,[0,this.posRevCert]),p=l(this.hex,e),q=0;q<p.length;q++){var r=b(this.hex,p[q]);t.push(this.getRevCert(r))}return t},this.getRevCert=function(p){var t={},e=l(p,0);return t.sn={hex:o(p,0,[0],"02")},t.date=Rt(o(p,0,[1])),3==e.length&&(t.ext=f.getExtParamArray(h(p,0,[2]))),t},this.findRevCert=function(p){var t=new oe(p).getSerialNumberHex();return this.findRevCertBySN(t)},this.findRevCertBySN=function(t){if(null==this.parsed&&this.getParam(),null==this.parsed.revcert)return null;for(var e=this.parsed.revcert,p=0;p<e.length;p++)if(t==e[p].sn.hex)return e[p];return null},this.getSignatureValueHex=function(){return o(this.hex,0,[2],"03",!0)},this.verifySignature=function(t){var p=this.getSignatureAlgorithmField(),e=this.getSignatureValueHex(),q=h(this.hex,0,[0],"30"),r=new gt.crypto.Signature({alg:p});return r.init(t),r.updateHex(q),r.verify(e)},this.getParam=function(t){var e={},p=this.getVersion();null!=p&&(e.version=p),e.sigalg=this.getSignatureAlgorithmField(),e.issuer=this.getIssuer(),e.thisupdate=this.getThisUpdate();var q=this.getNextUpdate();null!=q&&(e.nextupdate=q);var r=this.getRevCertArray();if(null!=r&&(e.revcert=r),-1!=g(this.hex,0,[0,"[0]"])){var n=c(this.hex,0,[0,"[0]",0]);e.ext=f.getExtParamArray(n)}return e.sighex=this.getSignatureValueHex(),this.parsed=e,"object"==typeof t&&(1==t.tbshex&&(e.tbshex=h(this.hex,0,[0])),1==t.nodnarray&&delete e.issuer.array),e},"string"==typeof t&&(e(t)?this.hex=t:t.match(/-----BEGIN X509 CRL/)&&(this.hex=Ht(t)),this._setPos())},e.CryptoJS=m,e.b64tohex=E,e.b64toBA=F,e.ECFieldElementFp=ct,e.ECPointFp=lt,e.ECCurveFp=ft,e.stoBA=xt,e.BAtos=St,e.BAtohex=wt,e.stohex=bt,e.stob64=function(a){return w(bt(a))},e.stob64u=function(a){return Et(w(bt(a)))},e.b64utos=function(a){return St(F(Ft(a)))},e.b64tob64u=Et,e.b64utob64=Ft,e.hex2b64=w,e.hextob64u=At,e.b64utohex=Pt,e.utf8tob64u=yt,e.b64utoutf8=vt,e.utf8tob64=function(a){return w(kt(Yt(a)))},e.b64toutf8=function(a){return decodeURIComponent(Lt(E(a)))},e.utf8tohex=Dt,e.hextoutf8=It,e.hextorstr=Rt,e.rstrtohex=Tt,e.hextob64=Bt,e.hextob64nl=Nt,e.b64nltohex=Ot,e.hextopem=jt,e.pemtohex=Ht,e.hextoArrayBuffer=function(t){if(t.length%2!=0)throw"input is not even length";if(null==t.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var b=new ArrayBuffer(t.length/2),a=new DataView(b),e=0;e<t.length/2;e++)a.setUint8(e,parseInt(t.substr(2*e,2),16));return b},e.ArrayBuffertohex=function(b){for(var t="",a=new DataView(b),e=0;e<b.byteLength;e++)t+=("00"+a.getUint8(e).toString(16)).slice(-2);return t},e.zulutomsec=Vt,e.zulutosec=_t,e.zulutodate=function(a){return new Date(Vt(a))},e.datetozulu=function(g,t,e){var b,a=g.getUTCFullYear();if(t){if(a<1950||2049<a)throw"not proper year for UTCTime: "+a;b=(""+a).slice(-2)}else b=("000"+a).slice(-4);if(b+=("0"+(g.getUTCMonth()+1)).slice(-2),b+=("0"+g.getUTCDate()).slice(-2),b+=("0"+g.getUTCHours()).slice(-2),b+=("0"+g.getUTCMinutes()).slice(-2),b+=("0"+g.getUTCSeconds()).slice(-2),e){var r=g.getUTCMilliseconds();0!==r&&(b+="."+(r=(r=("00"+r).slice(-3)).replace(/0+$/g,"")))}return b+="Z"},e.uricmptohex=kt,e.hextouricmp=Lt,e.ipv6tohex=Kt,e.hextoipv6=Mt,e.hextoip=Ut,e.iptohex=Gt,e.ucs2hextoutf8=Wt,e.encodeURIComponentAll=Yt,e.newline_toUnix=function(a){return a=a.replace(/\r\n/gm,"\n")},e.newline_toDos=function(a){return a=(a=a.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},e.hextoposhex=$t,e.intarystrtohex=function(b){b=(b=(b=b.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return b.split(/,/).map((function(g,t,e){var r=parseInt(g);if(r<0||255<r)throw"integer not in range 0-255";return("00"+r.toString(16)).slice(-2)})).join("")}catch(t){throw"malformed integer array string: "+t}},e.strdiffidx=function(t,a){var e=t.length;t.length>a.length&&(e=a.length);for(var b=0;b<e;b++)if(t.charCodeAt(b)!=a.charCodeAt(b))return b;return t.length!=a.length?e:-1},e.oidtohex=Xt,e.hextooid=Zt,e.strpad=Qt,e.bitstrtoint=te,e.inttobitstr=ee,e.KJUR=gt,e.crypto=gt.crypto,e.asn1=gt.asn1,e.jws=gt.jws,e.lang=gt.lang}).call(this,r(357).Buffer)},324:function(t,e,r){"use strict";var n,o=SyntaxError,h=Function,c=TypeError,l=function(t){try{return h('"use strict"; return ('+t+").constructor;")()}catch(t){}},f=Object.getOwnPropertyDescriptor;if(f)try{f({},"")}catch(t){f=null}var d=function(){throw new c},y=f?function(){try{return d}catch(t){try{return f(arguments,"callee").get}catch(t){return d}}}():d,v=r(348)(),m=Object.getPrototypeOf||function(t){return t.__proto__},x={},S="undefined"==typeof Uint8Array?n:m(Uint8Array),w={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":v?m([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":x,"%AsyncGenerator%":x,"%AsyncGeneratorFunction%":x,"%AsyncIteratorPrototype%":x,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":h,"%GeneratorFunction%":x,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":v?m(m([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&v?m((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&v?m((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":v?m(""[Symbol.iterator]()):n,"%Symbol%":v?Symbol:n,"%SyntaxError%":o,"%ThrowTypeError%":y,"%TypedArray%":S,"%TypeError%":c,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet},E=function t(e){var r;if("%AsyncFunction%"===e)r=l("async function () {}");else if("%GeneratorFunction%"===e)r=l("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=l("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var o=t("%AsyncGenerator%");o&&(r=m(o.prototype))}return w[e]=r,r},F={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},A=r(325),P=r(351),D=A.call(Function.call,Array.prototype.concat),I=A.call(Function.apply,Array.prototype.splice),C=A.call(Function.call,String.prototype.replace),R=A.call(Function.call,String.prototype.slice),T=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,B=/\\(\\)?/g,N=function(t){var e=R(t,0,1),r=R(t,-1);if("%"===e&&"%"!==r)throw new o("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new o("invalid intrinsic syntax, expected opening `%`");var n=[];return C(t,T,(function(t,e,r,o){n[n.length]=r?C(o,B,"$1"):e||t})),n},O=function(t,e){var r,n=t;if(P(F,n)&&(n="%"+(r=F[n])[0]+"%"),P(w,n)){var h=w[n];if(h===x&&(h=E(n)),void 0===h&&!e)throw new c("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:h}}throw new o("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new c('"allowMissing" argument must be a boolean');var r=N(t),n=r.length>0?r[0]:"",h=O("%"+n+"%",e),l=h.name,d=h.value,y=!1,v=h.alias;v&&(n=v[0],I(r,D([0,1],v)));for(var i=1,m=!0;i<r.length;i+=1){var x=r[i],S=R(x,0,1),E=R(x,-1);if(('"'===S||"'"===S||"`"===S||'"'===E||"'"===E||"`"===E)&&S!==E)throw new o("property names with quotes must have matching quotes");if("constructor"!==x&&m||(y=!0),P(w,l="%"+(n+="."+x)+"%"))d=w[l];else if(null!=d){if(!(x in d)){if(!e)throw new c("base intrinsic for "+t+" exists, but the property is not available.");return}if(f&&i+1>=r.length){var desc=f(d,x);d=(m=!!desc)&&"get"in desc&&!("originalValue"in desc.get)?desc.get:d[x]}else m=P(d,x),d=d[x];m&&!y&&(w[l]=d)}}return d}},325:function(t,e,r){"use strict";var n=r(350);t.exports=Function.prototype.bind||n},326:function(t,e,r){"use strict";var n=String.prototype.replace,o=/%20/g,h="RFC1738",c="RFC3986";t.exports={default:c,formatters:{RFC1738:function(t){return n.call(t,o,"+")},RFC3986:function(t){return String(t)}},RFC1738:h,RFC3986:c}},332:function(t,e,r){"use strict";var n=r(326),o=Object.prototype.hasOwnProperty,h=Array.isArray,c=function(){for(var t=[],i=0;i<256;++i)t.push("%"+((i<16?"0":"")+i.toString(16)).toUpperCase());return t}(),l=function(source,t){for(var e=t&&t.plainObjects?Object.create(null):{},i=0;i<source.length;++i)void 0!==source[i]&&(e[i]=source[i]);return e};t.exports={arrayToObject:l,assign:function(t,source){return Object.keys(source).reduce((function(t,e){return t[e]=source[e],t}),t)},combine:function(a,b){return[].concat(a,b)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],r=[],i=0;i<e.length;++i)for(var n=e[i],o=n.obj[n.prop],c=Object.keys(o),l=0;l<c.length;++l){var f=c[l],d=o[f];"object"==typeof d&&null!==d&&-1===r.indexOf(d)&&(e.push({obj:o,prop:f}),r.push(d))}return function(t){for(;t.length>1;){var e=t.pop(),r=e.obj[e.prop];if(h(r)){for(var n=[],o=0;o<r.length;++o)void 0!==r[o]&&n.push(r[o]);e.obj[e.prop]=n}}}(e),t},decode:function(t,e,r){var n=t.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(t){return n}},encode:function(t,e,r,o,h){if(0===t.length)return t;var l=t;if("symbol"==typeof t?l=Symbol.prototype.toString.call(t):"string"!=typeof t&&(l=String(t)),"iso-8859-1"===r)return escape(l).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var f="",i=0;i<l.length;++i){var d=l.charCodeAt(i);45===d||46===d||95===d||126===d||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||h===n.RFC1738&&(40===d||41===d)?f+=l.charAt(i):d<128?f+=c[d]:d<2048?f+=c[192|d>>6]+c[128|63&d]:d<55296||d>=57344?f+=c[224|d>>12]+c[128|d>>6&63]+c[128|63&d]:(i+=1,d=65536+((1023&d)<<10|1023&l.charCodeAt(i)),f+=c[240|d>>18]+c[128|d>>12&63]+c[128|d>>6&63]+c[128|63&d])}return f},isBuffer:function(t){return!(!t||"object"!=typeof t)&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},maybeMap:function(t,e){if(h(t)){for(var r=[],i=0;i<t.length;i+=1)r.push(e(t[i]));return r}return e(t)},merge:function t(e,source,r){if(!source)return e;if("object"!=typeof source){if(h(e))e.push(source);else{if(!e||"object"!=typeof e)return[e,source];(r&&(r.plainObjects||r.allowPrototypes)||!o.call(Object.prototype,source))&&(e[source]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(source);var n=e;return h(e)&&!h(source)&&(n=l(e,r)),h(e)&&h(source)?(source.forEach((function(n,i){if(o.call(e,i)){var h=e[i];h&&"object"==typeof h&&n&&"object"==typeof n?e[i]=t(h,n,r):e.push(n)}else e[i]=n})),e):Object.keys(source).reduce((function(e,n){var h=source[n];return o.call(e,n)?e[n]=t(e[n],h,r):e[n]=h,e}),n)}}},343:function(t,e,r){var n=r(83).match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},344:function(t,e,r){var n=r(83);t.exports=/MSIE|Trident/.test(n)},345:function(t,e,r){var n=r(83).match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},346:function(t,e,r){"use strict";var n=r(347),o=r(332),h=r(326),c=Object.prototype.hasOwnProperty,l={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},f=Array.isArray,d=String.prototype.split,y=Array.prototype.push,v=function(t,e){y.apply(t,f(e)?e:[e])},m=Date.prototype.toISOString,x=h.default,S={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:o.encode,encodeValuesOnly:!1,format:x,formatter:h.formatters[x],indices:!1,serializeDate:function(t){return m.call(t)},skipNulls:!1,strictNullHandling:!1},w={},E=function t(object,e,r,h,c,l,filter,y,m,x,E,F,A,P,D){for(var I,C=object,R=D,T=0,B=!1;void 0!==(R=R.get(w))&&!B;){var N=R.get(object);if(T+=1,void 0!==N){if(N===T)throw new RangeError("Cyclic object value");B=!0}void 0===R.get(w)&&(T=0)}if("function"==typeof filter?C=filter(e,C):C instanceof Date?C=x(C):"comma"===r&&f(C)&&(C=o.maybeMap(C,(function(t){return t instanceof Date?x(t):t}))),null===C){if(h)return l&&!A?l(e,S.encoder,P,"key",E):e;C=""}if("string"==typeof(I=C)||"number"==typeof I||"boolean"==typeof I||"symbol"==typeof I||"bigint"==typeof I||o.isBuffer(C)){if(l){var O=A?e:l(e,S.encoder,P,"key",E);if("comma"===r&&A){for(var j=d.call(String(C),","),H="",i=0;i<j.length;++i)H+=(0===i?"":",")+F(l(j[i],S.encoder,P,"value",E));return[F(O)+"="+H]}return[F(O)+"="+F(l(C,S.encoder,P,"value",E))]}return[F(e)+"="+F(String(C))]}var V,_=[];if(void 0===C)return _;if("comma"===r&&f(C))V=[{value:C.length>0?C.join(",")||null:void 0}];else if(f(filter))V=filter;else{var k=Object.keys(C);V=y?k.sort(y):k}for(var L=0;L<V.length;++L){var K=V[L],M="object"==typeof K&&void 0!==K.value?K.value:C[K];if(!c||null!==M){var U=f(C)?"function"==typeof r?r(e,K):e:e+(m?"."+K:"["+K+"]");D.set(object,T);var G=n();G.set(w,D),v(_,t(M,U,r,h,c,l,filter,y,m,x,E,F,A,P,G))}}return _};t.exports=function(object,t){var e,r=object,o=function(t){if(!t)return S;if(null!==t.encoder&&void 0!==t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||S.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=h.default;if(void 0!==t.format){if(!c.call(h.formatters,t.format))throw new TypeError("Unknown format option provided.");r=t.format}var n=h.formatters[r],filter=S.filter;return("function"==typeof t.filter||f(t.filter))&&(filter=t.filter),{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:S.addQueryPrefix,allowDots:void 0===t.allowDots?S.allowDots:!!t.allowDots,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:S.charsetSentinel,delimiter:void 0===t.delimiter?S.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:S.encode,encoder:"function"==typeof t.encoder?t.encoder:S.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:S.encodeValuesOnly,filter:filter,format:r,formatter:n,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:S.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:S.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:S.strictNullHandling}}(t);"function"==typeof o.filter?r=(0,o.filter)("",r):f(o.filter)&&(e=o.filter);var d,y=[];if("object"!=typeof r||null===r)return"";d=t&&t.arrayFormat in l?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var m=l[d];e||(e=Object.keys(r)),o.sort&&e.sort(o.sort);for(var x=n(),i=0;i<e.length;++i){var w=e[i];o.skipNulls&&null===r[w]||v(y,E(r[w],w,m,o.strictNullHandling,o.skipNulls,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.format,o.formatter,o.encodeValuesOnly,o.charset,x))}var F=y.join(o.delimiter),A=!0===o.addQueryPrefix?"?":"";return o.charsetSentinel&&("iso-8859-1"===o.charset?A+="utf8=%26%2310003%3B&":A+="utf8=%E2%9C%93&"),F.length>0?A+F:""}},347:function(t,e,r){"use strict";var n=r(324),o=r(352),h=r(354),c=n("%TypeError%"),l=n("%WeakMap%",!0),f=n("%Map%",!0),d=o("WeakMap.prototype.get",!0),y=o("WeakMap.prototype.set",!0),v=o("WeakMap.prototype.has",!0),m=o("Map.prototype.get",!0),x=o("Map.prototype.set",!0),S=o("Map.prototype.has",!0),w=function(t,e){for(var r,n=t;null!==(r=n.next);n=r)if(r.key===e)return n.next=r.next,r.next=t.next,t.next=r,r};t.exports=function(){var t,e,r,n={assert:function(t){if(!n.has(t))throw new c("Side channel does not contain "+h(t))},get:function(n){if(l&&n&&("object"==typeof n||"function"==typeof n)){if(t)return d(t,n)}else if(f){if(e)return m(e,n)}else if(r)return function(t,e){var r=w(t,e);return r&&r.value}(r,n)},has:function(n){if(l&&n&&("object"==typeof n||"function"==typeof n)){if(t)return v(t,n)}else if(f){if(e)return S(e,n)}else if(r)return function(t,e){return!!w(t,e)}(r,n);return!1},set:function(n,o){l&&n&&("object"==typeof n||"function"==typeof n)?(t||(t=new l),y(t,n,o)):f?(e||(e=new f),x(e,n,o)):(r||(r={key:{},next:null}),function(t,e,r){var n=w(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}}(r,n,o))}};return n}},348:function(t,e,r){"use strict";var n="undefined"!=typeof Symbol&&Symbol,o=r(349);t.exports=function(){return"function"==typeof n&&("function"==typeof Symbol&&("symbol"==typeof n("foo")&&("symbol"==typeof Symbol("bar")&&o())))}},349:function(t,e,r){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},350:function(t,e,r){"use strict";var n="Function.prototype.bind called on incompatible ",o=Array.prototype.slice,h=Object.prototype.toString,c="[object Function]";t.exports=function(t){var e=this;if("function"!=typeof e||h.call(e)!==c)throw new TypeError(n+e);for(var r,l=o.call(arguments,1),f=function(){if(this instanceof r){var n=e.apply(this,l.concat(o.call(arguments)));return Object(n)===n?n:this}return e.apply(t,l.concat(o.call(arguments)))},d=Math.max(0,e.length-l.length),y=[],i=0;i<d;i++)y.push("$"+i);if(r=Function("binder","return function ("+y.join(",")+"){ return binder.apply(this,arguments); }")(f),e.prototype){var v=function(){};v.prototype=e.prototype,r.prototype=new v,v.prototype=null}return r}},351:function(t,e,r){"use strict";var n=r(325);t.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},352:function(t,e,r){"use strict";var n=r(324),o=r(353),h=o(n("String.prototype.indexOf"));t.exports=function(t,e){var r=n(t,!!e);return"function"==typeof r&&h(t,".prototype.")>-1?o(r):r}},353:function(t,e,r){"use strict";var n=r(325),o=r(324),h=o("%Function.prototype.apply%"),c=o("%Function.prototype.call%"),l=o("%Reflect.apply%",!0)||n.call(c,h),f=o("%Object.getOwnPropertyDescriptor%",!0),d=o("%Object.defineProperty%",!0),y=o("%Math.max%");if(d)try{d({},"a",{value:1})}catch(t){d=null}t.exports=function(t){var e=l(n,c,arguments);if(f&&d){var desc=f(e,"length");desc.configurable&&d(e,"length",{value:1+y(0,t.length-(arguments.length-1))})}return e};var v=function(){return l(n,h,arguments)};d?d(t.exports,"apply",{value:v}):t.exports.apply=v},354:function(t,e,r){var n="function"==typeof Map&&Map.prototype,o=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,h=n&&o&&"function"==typeof o.get?o.get:null,c=n&&Map.prototype.forEach,l="function"==typeof Set&&Set.prototype,f=Object.getOwnPropertyDescriptor&&l?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,d=l&&f&&"function"==typeof f.get?f.get:null,y=l&&Set.prototype.forEach,v="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,m="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,x="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,S=Boolean.prototype.valueOf,w=Object.prototype.toString,E=Function.prototype.toString,F=String.prototype.match,A=String.prototype.slice,P=String.prototype.replace,D=String.prototype.toUpperCase,I=String.prototype.toLowerCase,C=RegExp.prototype.test,R=Array.prototype.concat,T=Array.prototype.join,B=Array.prototype.slice,N=Math.floor,O="function"==typeof BigInt?BigInt.prototype.valueOf:null,j=Object.getOwnPropertySymbols,H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,V="function"==typeof Symbol&&"object"==typeof Symbol.iterator,_="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===V||"symbol")?Symbol.toStringTag:null,k=Object.prototype.propertyIsEnumerable,L=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function K(t,e){if(t===1/0||t===-1/0||t!=t||t&&t>-1e3&&t<1e3||C.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof t){var n=t<0?-N(-t):N(t);if(n!==t){var o=String(n),h=A.call(e,o.length+1);return P.call(o,r,"$&_")+"."+P.call(P.call(h,/([0-9]{3})/g,"$&_"),/_$/,"")}}return P.call(e,r,"$&_")}var M=r(321).custom,U=M&&Y(M)?M:null;function G(s,t,e){var r="double"===(e.quoteStyle||t)?'"':"'";return r+s+r}function z(s){return P.call(String(s),/"/g,"&quot;")}function W(t){return!("[object Array]"!==X(t)||_&&"object"==typeof t&&_ in t)}function Y(t){if(V)return t&&"object"==typeof t&&t instanceof Symbol;if("symbol"==typeof t)return!0;if(!t||"object"!=typeof t||!H)return!1;try{return H.call(t),!0}catch(t){}return!1}t.exports=function t(e,r,n,o){var l=r||{};if($(l,"quoteStyle")&&"single"!==l.quoteStyle&&"double"!==l.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if($(l,"maxStringLength")&&("number"==typeof l.maxStringLength?l.maxStringLength<0&&l.maxStringLength!==1/0:null!==l.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var f=!$(l,"customInspect")||l.customInspect;if("boolean"!=typeof f&&"symbol"!==f)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if($(l,"indent")&&null!==l.indent&&"\t"!==l.indent&&!(parseInt(l.indent,10)===l.indent&&l.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if($(l,"numericSeparator")&&"boolean"!=typeof l.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var w=l.numericSeparator;if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return Q(e,l);if("number"==typeof e){if(0===e)return 1/0/e>0?"0":"-0";var D=String(e);return w?K(e,D):D}if("bigint"==typeof e){var C=String(e)+"n";return w?K(e,C):C}var N=void 0===l.depth?5:l.depth;if(void 0===n&&(n=0),n>=N&&N>0&&"object"==typeof e)return W(e)?"[Array]":"[Object]";var j=function(t,e){var r;if("\t"===t.indent)r="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;r=T.call(Array(t.indent+1)," ")}return{base:r,prev:T.call(Array(e+1),r)}}(l,n);if(void 0===o)o=[];else if(Z(o,e)>=0)return"[Circular]";function M(e,r,h){if(r&&(o=B.call(o)).push(r),h){var c={depth:l.depth};return $(l,"quoteStyle")&&(c.quoteStyle=l.quoteStyle),t(e,c,n+1,o)}return t(e,l,n+1,o)}if("function"==typeof e){var J=function(t){if(t.name)return t.name;var e=F.call(E.call(t),/^function\s*([\w$]+)/);if(e)return e[1];return null}(e),tt=at(e,M);return"[Function"+(J?": "+J:" (anonymous)")+"]"+(tt.length>0?" { "+T.call(tt,", ")+" }":"")}if(Y(e)){var ot=V?P.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):H.call(e);return"object"!=typeof e||V?ot:et(ot)}if(function(t){if(!t||"object"!=typeof t)return!1;if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement)return!0;return"string"==typeof t.nodeName&&"function"==typeof t.getAttribute}(e)){for(var s="<"+I.call(String(e.nodeName)),ut=e.attributes||[],i=0;i<ut.length;i++)s+=" "+ut[i].name+"="+G(z(ut[i].value),"double",l);return s+=">",e.childNodes&&e.childNodes.length&&(s+="..."),s+="</"+I.call(String(e.nodeName))+">"}if(W(e)){if(0===e.length)return"[]";var ht=at(e,M);return j&&!function(t){for(var i=0;i<t.length;i++)if(Z(t[i],"\n")>=0)return!1;return!0}(ht)?"["+st(ht,j)+"]":"[ "+T.call(ht,", ")+" ]"}if(function(t){return!("[object Error]"!==X(t)||_&&"object"==typeof t&&_ in t)}(e)){var ct=at(e,M);return"cause"in e&&!k.call(e,"cause")?"{ ["+String(e)+"] "+T.call(R.call("[cause]: "+M(e.cause),ct),", ")+" }":0===ct.length?"["+String(e)+"]":"{ ["+String(e)+"] "+T.call(ct,", ")+" }"}if("object"==typeof e&&f){if(U&&"function"==typeof e[U])return e[U]();if("symbol"!==f&&"function"==typeof e.inspect)return e.inspect()}if(function(t){if(!h||!t||"object"!=typeof t)return!1;try{h.call(t);try{d.call(t)}catch(t){return!0}return t instanceof Map}catch(t){}return!1}(e)){var lt=[];return c.call(e,(function(t,r){lt.push(M(r,e,!0)+" => "+M(t,e))})),it("Map",h.call(e),lt,j)}if(function(t){if(!d||!t||"object"!=typeof t)return!1;try{d.call(t);try{h.call(t)}catch(t){return!0}return t instanceof Set}catch(t){}return!1}(e)){var ft=[];return y.call(e,(function(t){ft.push(M(t,e))})),it("Set",d.call(e),ft,j)}if(function(t){if(!v||!t||"object"!=typeof t)return!1;try{v.call(t,v);try{m.call(t,m)}catch(t){return!0}return t instanceof WeakMap}catch(t){}return!1}(e))return nt("WeakMap");if(function(t){if(!m||!t||"object"!=typeof t)return!1;try{m.call(t,m);try{v.call(t,v)}catch(t){return!0}return t instanceof WeakSet}catch(t){}return!1}(e))return nt("WeakSet");if(function(t){if(!x||!t||"object"!=typeof t)return!1;try{return x.call(t),!0}catch(t){}return!1}(e))return nt("WeakRef");if(function(t){return!("[object Number]"!==X(t)||_&&"object"==typeof t&&_ in t)}(e))return et(M(Number(e)));if(function(t){if(!t||"object"!=typeof t||!O)return!1;try{return O.call(t),!0}catch(t){}return!1}(e))return et(M(O.call(e)));if(function(t){return!("[object Boolean]"!==X(t)||_&&"object"==typeof t&&_ in t)}(e))return et(S.call(e));if(function(t){return!("[object String]"!==X(t)||_&&"object"==typeof t&&_ in t)}(e))return et(M(String(e)));if(!function(t){return!("[object Date]"!==X(t)||_&&"object"==typeof t&&_ in t)}(e)&&!function(t){return!("[object RegExp]"!==X(t)||_&&"object"==typeof t&&_ in t)}(e)){var pt=at(e,M),gt=L?L(e)===Object.prototype:e instanceof Object||e.constructor===Object,yt=e instanceof Object?"":"null prototype",vt=!gt&&_&&Object(e)===e&&_ in e?A.call(X(e),8,-1):yt?"Object":"",mt=(gt||"function"!=typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(vt||yt?"["+T.call(R.call([],vt||[],yt||[]),": ")+"] ":"");return 0===pt.length?mt+"{}":j?mt+"{"+st(pt,j)+"}":mt+"{ "+T.call(pt,", ")+" }"}return String(e)};var J=Object.prototype.hasOwnProperty||function(t){return t in this};function $(t,e){return J.call(t,e)}function X(t){return w.call(t)}function Z(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1}function Q(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return Q(A.call(t,0,e.maxStringLength),e)+n}return G(P.call(P.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,tt),"single",e)}function tt(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+D.call(e.toString(16))}function et(t){return"Object("+t+")"}function nt(t){return t+" { ? }"}function it(t,e,r,n){return t+" ("+e+") {"+(n?st(r,n):T.call(r,", "))+"}"}function st(t,e){if(0===t.length)return"";var r="\n"+e.prev+e.base;return r+T.call(t,","+r)+"\n"+e.prev}function at(t,e){var r=W(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=$(t,i)?e(t[i],t):""}var o,h="function"==typeof j?j(t):[];if(V){o={};for(var c=0;c<h.length;c++)o["$"+h[c]]=h[c]}for(var l in t)$(t,l)&&(r&&String(Number(l))===l&&l<t.length||V&&o["$"+l]instanceof Symbol||(C.call(/[^\w$]/,l)?n.push(e(l,t)+": "+e(t[l],t)):n.push(l+": "+e(t[l],t))));if("function"==typeof j)for(var f=0;f<h.length;f++)k.call(t,h[f])&&n.push("["+e(h[f])+"]: "+e(t[h[f]],t));return n}},355:function(t,e,r){"use strict";var n=r(332),o=Object.prototype.hasOwnProperty,h=Array.isArray,c={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},l=function(t){return t.replace(/&#(\d+);/g,(function(t,e){return String.fromCharCode(parseInt(e,10))}))},f=function(t,e){return t&&"string"==typeof t&&e.comma&&t.indexOf(",")>-1?t.split(","):t},d=function(t,e,r,n){if(t){var h=r.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,c=/(\[[^[\]]*])/g,l=r.depth>0&&/(\[[^[\]]*])/.exec(h),d=l?h.slice(0,l.index):h,y=[];if(d){if(!r.plainObjects&&o.call(Object.prototype,d)&&!r.allowPrototypes)return;y.push(d)}for(var i=0;r.depth>0&&null!==(l=c.exec(h))&&i<r.depth;){if(i+=1,!r.plainObjects&&o.call(Object.prototype,l[1].slice(1,-1))&&!r.allowPrototypes)return;y.push(l[1])}return l&&y.push("["+h.slice(l.index)+"]"),function(t,e,r,n){for(var o=n?e:f(e,r),i=t.length-1;i>=0;--i){var h,c=t[i];if("[]"===c&&r.parseArrays)h=[].concat(o);else{h=r.plainObjects?Object.create(null):{};var l="["===c.charAt(0)&&"]"===c.charAt(c.length-1)?c.slice(1,-1):c,d=parseInt(l,10);r.parseArrays||""!==l?!isNaN(d)&&c!==l&&String(d)===l&&d>=0&&r.parseArrays&&d<=r.arrayLimit?(h=[])[d]=o:"__proto__"!==l&&(h[l]=o):h={0:o}}o=h}return o}(y,e,r,n)}};t.exports=function(t,e){var r=function(t){if(!t)return c;if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e=void 0===t.charset?c.charset:t.charset;return{allowDots:void 0===t.allowDots?c.allowDots:!!t.allowDots,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:c.allowPrototypes,allowSparse:"boolean"==typeof t.allowSparse?t.allowSparse:c.allowSparse,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:c.arrayLimit,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:c.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:c.comma,decoder:"function"==typeof t.decoder?t.decoder:c.decoder,delimiter:"string"==typeof t.delimiter||n.isRegExp(t.delimiter)?t.delimiter:c.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:c.depth,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:c.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:c.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:c.plainObjects,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:c.strictNullHandling}}(e);if(""===t||null==t)return r.plainObjects?Object.create(null):{};for(var y="string"==typeof t?function(t,e){var i,r={},d=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,y=e.parameterLimit===1/0?void 0:e.parameterLimit,v=d.split(e.delimiter,y),m=-1,x=e.charset;if(e.charsetSentinel)for(i=0;i<v.length;++i)0===v[i].indexOf("utf8=")&&("utf8=%E2%9C%93"===v[i]?x="utf-8":"utf8=%26%2310003%3B"===v[i]&&(x="iso-8859-1"),m=i,i=v.length);for(i=0;i<v.length;++i)if(i!==m){var S,w,E=v[i],F=E.indexOf("]="),A=-1===F?E.indexOf("="):F+1;-1===A?(S=e.decoder(E,c.decoder,x,"key"),w=e.strictNullHandling?null:""):(S=e.decoder(E.slice(0,A),c.decoder,x,"key"),w=n.maybeMap(f(E.slice(A+1),e),(function(t){return e.decoder(t,c.decoder,x,"value")}))),w&&e.interpretNumericEntities&&"iso-8859-1"===x&&(w=l(w)),E.indexOf("[]=")>-1&&(w=h(w)?[w]:w),o.call(r,S)?r[S]=n.combine(r[S],w):r[S]=w}return r}(t,r):t,v=r.plainObjects?Object.create(null):{},m=Object.keys(y),i=0;i<m.length;++i){var x=m[i],S=d(x,y[x],r,"string"==typeof t);v=n.merge(v,S,r)}return!0===r.allowSparse?v:n.compact(v)}},356:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},357:function(t,e,r){"use strict";(function(t){var n=r(358),o=r(359),h=r(360);function c(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function l(t,e){if(c()<e)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=f.prototype:(null===t&&(t=new f(e)),t.length=e),t}function f(t,e,r){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return v(this,t)}return d(this,t,e,r)}function d(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);f.TYPED_ARRAY_SUPPORT?(t=e).__proto__=f.prototype:t=m(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!f.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|S(e,r),o=(t=l(t,n)).write(e,r);o!==n&&(t=t.slice(0,o));return t}(t,e,r):function(t,e){if(f.isBuffer(e)){var r=0|x(e.length);return 0===(t=l(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?l(t,0):m(t,e);if("Buffer"===e.type&&h(e.data))return m(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function y(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function v(t,e){if(y(e),t=l(t,e<0?0:0|x(e)),!f.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function m(t,e){var r=e.length<0?0:0|x(e.length);t=l(t,r);for(var i=0;i<r;i+=1)t[i]=255&e[i];return t}function x(t){if(t>=c())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c().toString(16)+" bytes");return 0|t}function S(t,e){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return J(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return $(t).length;default:if(n)return J(t).length;e=(""+e).toLowerCase(),n=!0}}function w(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return V(this,e,r);case"utf8":case"utf-8":return N(this,e,r);case"ascii":return j(this,e,r);case"latin1":case"binary":return H(this,e,r);case"base64":return B(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function E(b,t,e){var i=b[t];b[t]=b[e],b[e]=i}function F(t,e,r,n,o){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof e&&(e=f.from(e,n)),f.isBuffer(e))return 0===e.length?-1:A(t,e,r,n,o);if("number"==typeof e)return e&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):A(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function A(t,e,r,n,o){var i,h=1,c=t.length,l=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;h=2,c/=2,l/=2,r/=2}function f(t,i){return 1===h?t[i]:t.readUInt16BE(i*h)}if(o){var d=-1;for(i=r;i<c;i++)if(f(t,i)===f(e,-1===d?0:i-d)){if(-1===d&&(d=i),i-d+1===l)return d*h}else-1!==d&&(i-=i-d),d=-1}else for(r+l>c&&(r=c-l),i=r;i>=0;i--){for(var y=!0,v=0;v<l;v++)if(f(t,i+v)!==f(e,v)){y=!1;break}if(y)return i}return-1}function P(t,e,r,n){r=Number(r)||0;var o=t.length-r;n?(n=Number(n))>o&&(n=o):n=o;var h=e.length;if(h%2!=0)throw new TypeError("Invalid hex string");n>h/2&&(n=h/2);for(var i=0;i<n;++i){var c=parseInt(e.substr(2*i,2),16);if(isNaN(c))return i;t[r+i]=c}return i}function D(t,e,r,n){return X(J(e,t.length-r),t,r,n)}function I(t,e,r,n){return X(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,r,n)}function C(t,e,r,n){return I(t,e,r,n)}function R(t,e,r,n){return X($(e),t,r,n)}function T(t,e,r,n){return X(function(t,e){for(var r,n,o,h=[],i=0;i<t.length&&!((e-=2)<0);++i)n=(r=t.charCodeAt(i))>>8,o=r%256,h.push(o),h.push(n);return h}(e,t.length-r),t,r,n)}function B(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function N(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,h,c,l,f=t[i],d=null,y=f>239?4:f>223?3:f>191?2:1;if(i+y<=r)switch(y){case 1:f<128&&(d=f);break;case 2:128==(192&(o=t[i+1]))&&(l=(31&f)<<6|63&o)>127&&(d=l);break;case 3:o=t[i+1],h=t[i+2],128==(192&o)&&128==(192&h)&&(l=(15&f)<<12|(63&o)<<6|63&h)>2047&&(l<55296||l>57343)&&(d=l);break;case 4:o=t[i+1],h=t[i+2],c=t[i+3],128==(192&o)&&128==(192&h)&&128==(192&c)&&(l=(15&f)<<18|(63&o)<<12|(63&h)<<6|63&c)>65535&&l<1114112&&(d=l)}null===d?(d=65533,y=1):d>65535&&(d-=65536,n.push(d>>>10&1023|55296),d=56320|1023&d),n.push(d),i+=y}return function(t){var e=t.length;if(e<=O)return String.fromCharCode.apply(String,t);var r="",i=0;for(;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=O));return r}(n)}e.Buffer=f,e.SlowBuffer=function(t){+t!=t&&(t=0);return f.alloc(+t)},e.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=c(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,e,r){return d(null,t,e,r)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,e,r){return function(t,e,r,n){return y(e),e<=0?l(t,e):void 0!==r?"string"==typeof n?l(t,e).fill(r,n):l(t,e).fill(r):l(t,e)}(null,t,e,r)},f.allocUnsafe=function(t){return v(null,t)},f.allocUnsafeSlow=function(t){return v(null,t)},f.isBuffer=function(b){return!(null==b||!b._isBuffer)},f.compare=function(a,b){if(!f.isBuffer(a)||!f.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var t=a.length,e=b.length,i=0,r=Math.min(t,e);i<r;++i)if(a[i]!==b[i]){t=a[i],e=b[i];break}return t<e?-1:e<t?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,e){if(!h(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var r=f.allocUnsafe(e),n=0;for(i=0;i<t.length;++i){var o=t[i];if(!f.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,n),n+=o.length}return r},f.byteLength=S,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<t;i+=2)E(this,i,i+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<t;i+=4)E(this,i,i+3),E(this,i+1,i+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<t;i+=8)E(this,i,i+7),E(this,i+1,i+6),E(this,i+2,i+5),E(this,i+3,i+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?N(this,0,t):w.apply(this,arguments)},f.prototype.equals=function(b){if(!f.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===f.compare(this,b)},f.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,e,r,n,o){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),e<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&e>=r)return 0;if(n>=o)return-1;if(e>=r)return 1;if(this===t)return 0;for(var h=(o>>>=0)-(n>>>=0),c=(r>>>=0)-(e>>>=0),l=Math.min(h,c),d=this.slice(n,o),y=t.slice(e,r),i=0;i<l;++i)if(d[i]!==y[i]){h=d[i],c=y[i];break}return h<c?-1:c<h?1:0},f.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},f.prototype.indexOf=function(t,e,r){return F(this,t,e,r,!0)},f.prototype.lastIndexOf=function(t,e,r){return F(this,t,e,r,!1)},f.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var h=!1;;)switch(n){case"hex":return P(this,t,e,r);case"utf8":case"utf-8":return D(this,t,e,r);case"ascii":return I(this,t,e,r);case"latin1":case"binary":return C(this,t,e,r);case"base64":return R(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,r);default:if(h)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),h=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function j(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function H(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function V(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=e;i<r;++i)o+=Y(t[i]);return o}function _(t,e,r){for(var n=t.slice(e,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function k(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,r,n,o,h){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<h)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function K(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function M(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function U(t,e,r,n,o,h){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function G(t,e,r,n,h){return h||U(t,0,r,4),o.write(t,e,r,n,23,4),r+4}function z(t,e,r,n,h){return h||U(t,0,r,8),o.write(t,e,r,n,52,8),r+8}f.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),f.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=f.prototype;else{var o=e-t;r=new f(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+t]}return r},f.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||k(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n},f.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||k(t,e,this.length);for(var n=this[t+--e],o=1;e>0&&(o*=256);)n+=this[t+--e]*o;return n},f.prototype.readUInt8=function(t,e){return e||k(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,e){return e||k(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,e){return e||k(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,e){return e||k(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,e){return e||k(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||k(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*e)),n},f.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||k(t,e,this.length);for(var i=e,n=1,o=this[t+--i];i>0&&(n*=256);)o+=this[t+--i]*n;return o>=(n*=128)&&(o-=Math.pow(2,8*e)),o},f.prototype.readInt8=function(t,e){return e||k(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,e){e||k(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},f.prototype.readInt16BE=function(t,e){e||k(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},f.prototype.readInt32LE=function(t,e){return e||k(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,e){return e||k(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,e){return e||k(t,4,this.length),o.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,e){return e||k(t,4,this.length),o.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,e){return e||k(t,8,this.length),o.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,e){return e||k(t,8,this.length),o.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||L(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},f.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||L(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},f.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},f.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):K(this,t,e,!0),e+2},f.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):K(this,t,e,!1),e+2},f.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):M(this,t,e,!0),e+4},f.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},f.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);L(this,t,e,r,o-1,-o)}var i=0,h=1,sub=0;for(this[e]=255&t;++i<r&&(h*=256);)t<0&&0===sub&&0!==this[e+i-1]&&(sub=1),this[e+i]=(t/h>>0)-sub&255;return e+r},f.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);L(this,t,e,r,o-1,-o)}var i=r-1,h=1,sub=0;for(this[e+i]=255&t;--i>=0&&(h*=256);)t<0&&0===sub&&0!==this[e+i+1]&&(sub=1),this[e+i]=(t/h>>0)-sub&255;return e+r},f.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},f.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):K(this,t,e,!0),e+2},f.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):K(this,t,e,!1),e+2},f.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):M(this,t,e,!0),e+4},f.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},f.prototype.writeFloatLE=function(t,e,r){return G(this,t,e,!0,r)},f.prototype.writeFloatBE=function(t,e,r){return G(this,t,e,!1,r)},f.prototype.writeDoubleLE=function(t,e,r){return z(this,t,e,!0,r)},f.prototype.writeDoubleBE=function(t,e,r){return z(this,t,e,!1,r)},f.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},f.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var code=t.charCodeAt(0);code<256&&(t=code)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{var o=f.isBuffer(t)?t:J(new f(t,n).toString()),h=o.length;for(i=0;i<r-e;++i)this[i+e]=o[i%h]}return this};var W=/[^+\/0-9A-Za-z-_]/g;function Y(t){return t<16?"0"+t.toString(16):t.toString(16)}function J(t,e){var r;e=e||1/0;for(var n=t.length,o=null,h=[],i=0;i<n;++i){if((r=t.charCodeAt(i))>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&h.push(239,191,189);continue}if(i+1===n){(e-=3)>-1&&h.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&h.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(e-=3)>-1&&h.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;h.push(r)}else if(r<2048){if((e-=2)<0)break;h.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;h.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;h.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return h}function $(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(W,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function X(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}).call(this,r(45))},358:function(t,e,r){"use strict";e.byteLength=function(t){var e=l(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,i,r=l(t),n=r[0],c=r[1],f=new h(function(t,e,r){return 3*(e+r)/4-r}(0,n,c)),d=0,y=c>0?n-4:n;for(i=0;i<y;i+=4)e=o[t.charCodeAt(i)]<<18|o[t.charCodeAt(i+1)]<<12|o[t.charCodeAt(i+2)]<<6|o[t.charCodeAt(i+3)],f[d++]=e>>16&255,f[d++]=e>>8&255,f[d++]=255&e;2===c&&(e=o[t.charCodeAt(i)]<<2|o[t.charCodeAt(i+1)]>>4,f[d++]=255&e);1===c&&(e=o[t.charCodeAt(i)]<<10|o[t.charCodeAt(i+1)]<<4|o[t.charCodeAt(i+2)]>>2,f[d++]=e>>8&255,f[d++]=255&e);return f},e.fromByteArray=function(t){for(var e,r=t.length,o=r%3,h=[],c=16383,i=0,l=r-o;i<l;i+=c)h.push(f(t,i,i+c>l?l:i+c));1===o?(e=t[r-1],h.push(n[e>>2]+n[e<<4&63]+"==")):2===o&&(e=(t[r-2]<<8)+t[r-1],h.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return h.join("")};for(var n=[],o=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,c=code.length;i<c;++i)n[i]=code[i],o[code.charCodeAt(i)]=i;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function f(t,e,r){for(var o,h,output=[],i=e;i<r;i+=3)o=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(255&t[i+2]),output.push(n[(h=o)>>18&63]+n[h>>12&63]+n[h>>6&63]+n[63&h]);return output.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},359:function(t,e){e.read=function(t,e,r,n,o){var h,c,l=8*o-n-1,f=(1<<l)-1,d=f>>1,y=-7,i=r?o-1:0,v=r?-1:1,s=t[e+i];for(i+=v,h=s&(1<<-y)-1,s>>=-y,y+=l;y>0;h=256*h+t[e+i],i+=v,y-=8);for(c=h&(1<<-y)-1,h>>=-y,y+=n;y>0;c=256*c+t[e+i],i+=v,y-=8);if(0===h)h=1-d;else{if(h===f)return c?NaN:1/0*(s?-1:1);c+=Math.pow(2,n),h-=d}return(s?-1:1)*c*Math.pow(2,h-n)},e.write=function(t,e,r,n,o,h){var c,l,f,d=8*h-o-1,y=(1<<d)-1,v=y>>1,rt=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,i=n?0:h-1,m=n?1:-1,s=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,c=y):(c=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-c))<1&&(c--,f*=2),(e+=c+v>=1?rt/f:rt*Math.pow(2,1-v))*f>=2&&(c++,f/=2),c+v>=y?(l=0,c=y):c+v>=1?(l=(e*f-1)*Math.pow(2,o),c+=v):(l=e*Math.pow(2,v-1)*Math.pow(2,o),c=0));o>=8;t[r+i]=255&l,i+=m,l/=256,o-=8);for(c=c<<o|l,d+=o;d>0;t[r+i]=255&c,i+=m,c/=256,d-=8);t[r+i-m]|=128*s}},360:function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}}}]);